{
  "requesterUsername": "OnlyToCode",
  "requesterAvatarIconUri": {
    "$mid": 1,
    "path": "/u/188051009",
    "scheme": "https",
    "authority": "avatars.githubusercontent.com",
    "query": "v=4"
  },
  "responderUsername": "GitHub Copilot",
  "responderAvatarIconUri": {
    "id": "copilot"
  },
  "initialLocation": "editing-session",
  "requests": [
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 28
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 29
            },
            "text": "fix coliciones con jugadores",
            "kind": "text"
          }
        ],
        "text": "fix coliciones con jugadores"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you improve the player collision detection and handling. Here's the solution:\n\n### Main.py\n\nUpdate the CollisionHandler class to better handle player collisions and improve damage calculation.\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "\nclass CollisionHandler:\n    # ...existing code...\n\n    @staticmethod\n    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):\n        \"\"\"Enhanced player collision detection and response\"\"\"\n        if not player1.get_rect().colliderect(player2.get_rect()):\n            return\n\n        # Calculate relative velocities\n        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)\n        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)\n        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)\n\n        if impact_velocity <= damage_threshold:\n            return\n\n        # Calculate impact direction\n        if abs(rel_vel_x) > abs(rel_vel_y):\n            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'\n        else:\n            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'\n\n        # Calculate damage\n        damage = (impact_velocity - damage_threshold) * damage_factor\n\n        # Apply damage and knockback\n        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:\n            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)\n        else:\n            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)\n\n    @staticmethod\n    def _apply_collision_effects(receiver, attacker, damage, direction):\n        \"\"\"Apply collision effects to the receiving player\"\"\"\n        # Apply damage considering blocking\n        if receiver.bloqueando and receiver.direccion_bloqueo == direction:\n            damage *= 0.3  # 70% damage reduction when blocking correctly\n            # Reverse some momentum back to attacker\n            if direction in ['left', 'right']:\n                attacker.velocidad_x *= -0.5\n            else:\n                attacker.velocidad_y *= -0.5\n        else:\n            # Apply knockback to receiver\n            knockback_force = damage * 2\n            if direction == 'left':\n                receiver.velocidad_x = -knockback_force\n            elif direction == 'right':\n                receiver.velocidad_x = knockback_force\n            elif direction == 'up':\n                receiver.velocidad_y = -knockback_force\n            else:  # down\n                receiver.velocidad_y = knockback_force\n\n        receiver.take_damage(damage)\n\n# ...existing code...\n\nclass GameStateManager:\n    # ...existing code...\n\n    def _update_game_state(self, teclas, delta_time):\n        \"\"\"Update game state for all players\"\"\"\n        # Update player states first\n        for jugador in self.jugadores:\n            self._update_player(jugador, teclas, delta_time)\n        \n        # Then check collisions\n        if len(self.jugadores) > 1:\n            CollisionHandler.check_player_collisions(\n                self.jugadores[0],\n                self.jugadores[1],\n                damage_threshold=7,  # Adjusted threshold\n                damage_factor=0.8    # Adjusted damage factor\n            )\n```\n\nThese changes:\n1. Improve collision detection by considering relative velocities in both x and y directions\n2. Calculate impact direction based on relative position and velocity\n3. Add knockback effects based on collision direction\n4. Implement better blocking mechanics with damage reduction and momentum reflection\n5. Add proper momentum transfer between players\n6. Scale damage and knockback based on impact velocity\n7. Adjust collision parameters in GameStateManager for better gameplay feel\n\nThe collision system now feels more impactful and strategic, especially with the blocking mechanics. Players can use momentum to their advantage and blocking becomes a more viable defensive strategy.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Enhanced player collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate relative velocities",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if impact_velocity <= damage_threshold:",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate impact direction",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if abs(rel_vel_x) > abs(rel_vel_y):",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate damage",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        damage = (impact_velocity - damage_threshold) * damage_factor",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage and knockback",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_collision_effects(receiver, attacker, damage, direction):",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply collision effects to the receiving player\"\"\"",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage considering blocking",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if receiver.bloqueando and receiver.direccion_bloqueo == direction:",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            damage *= 0.3  # 70% damage reduction when blocking correctly",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Reverse some momentum back to attacker",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction in ['left', 'right']:",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_x *= -0.5",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_y *= -0.5",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Apply knockback to receiver",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            knockback_force = damage * 2",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction == 'left':",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = -knockback_force",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'right':",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = knockback_force",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'up':",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = -knockback_force",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:  # down",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = knockback_force",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        receiver.take_damage(damage)",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Update player states first",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Then check collisions",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0],",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1],",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=7,  # Adjusted threshold",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_factor=0.8    # Adjusted damage factor",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1192,
                  "startColumn": 1073741825,
                  "endLineNumber": 1192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1193,
                  "startColumn": 1073741825,
                  "endLineNumber": 1193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1194,
                  "startColumn": 1073741825,
                  "endLineNumber": 1194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1195,
                  "startColumn": 1073741825,
                  "endLineNumber": 1195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1196,
                  "startColumn": 1073741825,
                  "endLineNumber": 1196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1197,
                  "startColumn": 1073741825,
                  "endLineNumber": 1197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    # Crear jugadores",
                "range": {
                  "startLineNumber": 1198,
                  "startColumn": 1073741825,
                  "endLineNumber": 1198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    mid_x = pantalla_principal.get_screen_data(\"mid_x\")",
                "range": {
                  "startLineNumber": 1199,
                  "startColumn": 1073741825,
                  "endLineNumber": 1199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    jugadores = [",
                "range": {
                  "startLineNumber": 1200,
                  "startColumn": 1073741825,
                  "endLineNumber": 1200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        Personaje(",
                "range": {
                  "startLineNumber": 1201,
                  "startColumn": 1073741825,
                  "endLineNumber": 1201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            mid_x - 50,  # Más a la izquierda",
                "range": {
                  "startLineNumber": 1202,
                  "startColumn": 1073741825,
                  "endLineNumber": 1202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            300,",
                "range": {
                  "startLineNumber": 1203,
                  "startColumn": 1073741825,
                  "endLineNumber": 1203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1204,
                  "startColumn": 1073741825,
                  "endLineNumber": 1204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=1",
                "range": {
                  "startLineNumber": 1205,
                  "startColumn": 1073741825,
                  "endLineNumber": 1205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ),",
                "range": {
                  "startLineNumber": 1206,
                  "startColumn": 1073741825,
                  "endLineNumber": 1206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        Personaje(",
                "range": {
                  "startLineNumber": 1207,
                  "startColumn": 1073741825,
                  "endLineNumber": 1207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            mid_x + 50,  # Más a la derecha",
                "range": {
                  "startLineNumber": 1208,
                  "startColumn": 1073741825,
                  "endLineNumber": 1208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            300,",
                "range": {
                  "startLineNumber": 1209,
                  "startColumn": 1073741825,
                  "endLineNumber": 1209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1210,
                  "startColumn": 1073741825,
                  "endLineNumber": 1210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=2",
                "range": {
                  "startLineNumber": 1211,
                  "startColumn": 1073741825,
                  "endLineNumber": 1211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1212,
                  "startColumn": 1073741825,
                  "endLineNumber": 1212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]",
                "range": {
                  "startLineNumber": 1213,
                  "startColumn": 1073741825,
                  "endLineNumber": 1213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1214,
                  "startColumn": 1073741825,
                  "endLineNumber": 1214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1215,
                  "startColumn": 1073741825,
                  "endLineNumber": 1215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1216,
                  "startColumn": 1073741825,
                  "endLineNumber": 1216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try:",
                "range": {
                  "startLineNumber": 1217,
                  "startColumn": 1073741825,
                  "endLineNumber": 1217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1218,
                  "startColumn": 1073741825,
                  "endLineNumber": 1218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pantalla_principal,",
                "range": {
                  "startLineNumber": 1219,
                  "startColumn": 1073741825,
                  "endLineNumber": 1219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            jugadores,",
                "range": {
                  "startLineNumber": 1220,
                  "startColumn": 1073741825,
                  "endLineNumber": 1220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            controlador,",
                "range": {
                  "startLineNumber": 1221,
                  "startColumn": 1073741825,
                  "endLineNumber": 1221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            hud",
                "range": {
                  "startLineNumber": 1222,
                  "startColumn": 1073741825,
                  "endLineNumber": 1222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1223,
                  "startColumn": 1073741825,
                  "endLineNumber": 1223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager.run()",
                "range": {
                  "startLineNumber": 1224,
                  "startColumn": 1073741825,
                  "endLineNumber": 1224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1225,
                  "startColumn": 1073741825,
                  "endLineNumber": 1225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1226,
                  "startColumn": 1073741825,
                  "endLineNumber": 1226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1227,
                  "startColumn": 1073741825,
                  "endLineNumber": 1227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1228,
                  "startColumn": 1073741825,
                  "endLineNumber": 1228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1229,
                  "startColumn": 1073741825,
                  "endLineNumber": 1229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1230,
                  "startColumn": 1073741825,
                  "endLineNumber": 1230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1231,
                  "startColumn": 1073741825,
                  "endLineNumber": 1231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1232,
                  "startColumn": 1073741825,
                  "endLineNumber": 1232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1233,
                  "startColumn": 1073741825,
                  "endLineNumber": 1233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1234,
                  "startColumn": 1073741825,
                  "endLineNumber": 1234,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 6767,
          "totalElapsed": 66058
        },
        "metadata": {
          "applyEditsId": "5f4b50ee-90c1-4ab2-a1ba-beed529a0483",
          "modelMessageId": "3ba87d54-ae68-4173-a36c-3814efed152a",
          "responseId": "b41d663f-f3f0-4613-bcf1-ec5e09b07585",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 55
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 56
            },
            "text": "cambia la posion de respaw, a donde aparece por defecto",
            "kind": "text"
          }
        ],
        "text": "cambia la posion de respaw, a donde aparece por defecto"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll modify the spawn positions for both players. Here's the change:\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "\ndef main():\n    pygame.init()\n    pygame.mixer.init()\n    \n    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")\n    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")\n    controlador = controlador_plataformas()\n    \n    # Crear jugadores con nuevas posiciones de spawn\n    screen_data = pantalla_principal.get_screen_data(\"mid_x\", \"mid_y\", \"tiles_x\", \"tile_size\")\n    spawn_height = screen_data[1] - screen_data[3] * 2  # Altura de spawn más arriba\n    \n    # Spawn positions at 1/4 and 3/4 of screen width\n    spawn_x1 = screen_data[0] - (screen_data[2] * screen_data[3]) // 4\n    spawn_x2 = screen_data[0] + (screen_data[2] * screen_data[3]) // 4\n    \n    jugadores = [\n        Personaje(\n            spawn_x1,\n            spawn_height,\n            tamaño_baldosa,\n            player_id=1\n        ),\n        Personaje(\n            spawn_x2,\n            spawn_height,\n            tamaño_baldosa,\n            player_id=2\n        )\n    ]\n    \n    # ...existing code...\n```\n\nThis change:\n1. Makes players spawn higher up in the screen\n2. Places players at 1/4 and 3/4 of the screen width\n3. Uses the same spawn positions for initial spawn and respawning\n4. Keeps players within the playable area\n\nThe same positions will be used when players respawn after falling.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Enhanced player collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate relative velocities",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if impact_velocity <= damage_threshold:",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate impact direction",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if abs(rel_vel_x) > abs(rel_vel_y):",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate damage",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        damage = (impact_velocity - damage_threshold) * damage_factor",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage and knockback",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_collision_effects(receiver, attacker, damage, direction):",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply collision effects to the receiving player\"\"\"",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage considering blocking",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if receiver.bloqueando and receiver.direccion_bloqueo == direction:",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            damage *= 0.3  # 70% damage reduction when blocking correctly",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Reverse some momentum back to attacker",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction in ['left', 'right']:",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_x *= -0.5",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_y *= -0.5",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Apply knockback to receiver",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            knockback_force = damage * 2",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction == 'left':",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = -knockback_force",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'right':",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = knockback_force",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'up':",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = -knockback_force",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:  # down",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = knockback_force",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        receiver.take_damage(damage)",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Update player states first",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Then check collisions",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0],",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1],",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=7,  # Adjusted threshold",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_factor=0.8    # Adjusted damage factor",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1192,
                  "startColumn": 1,
                  "endLineNumber": 1192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1193,
                  "startColumn": 1,
                  "endLineNumber": 1193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1194,
                  "startColumn": 1,
                  "endLineNumber": 1194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1195,
                  "startColumn": 1,
                  "endLineNumber": 1195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1196,
                  "startColumn": 1,
                  "endLineNumber": 1196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1197,
                  "startColumn": 1,
                  "endLineNumber": 1197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear jugadores con nuevas posiciones de spawn",
                "range": {
                  "startLineNumber": 1198,
                  "startColumn": 1,
                  "endLineNumber": 1198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla_principal.get_screen_data(\"mid_x\", \"mid_y\", \"tiles_x\", \"tile_size\")",
                "range": {
                  "startLineNumber": 1199,
                  "startColumn": 1,
                  "endLineNumber": 1199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    spawn_height = screen_data[1] - screen_data[3] * 2  # Altura de spawn más arriba",
                "range": {
                  "startLineNumber": 1200,
                  "startColumn": 1,
                  "endLineNumber": 1200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1201,
                  "startColumn": 1,
                  "endLineNumber": 1201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Spawn positions at 1/4 and 3/4 of screen width",
                "range": {
                  "startLineNumber": 1202,
                  "startColumn": 1,
                  "endLineNumber": 1202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    spawn_x1 = screen_data[0] - (screen_data[2] * screen_data[3]) // 4",
                "range": {
                  "startLineNumber": 1203,
                  "startColumn": 1,
                  "endLineNumber": 1203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    spawn_x2 = screen_data[0] + (screen_data[2] * screen_data[3]) // 4",
                "range": {
                  "startLineNumber": 1204,
                  "startColumn": 1,
                  "endLineNumber": 1204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1205,
                  "startColumn": 1,
                  "endLineNumber": 1205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1206,
                  "startColumn": 1,
                  "endLineNumber": 1206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1207,
                  "startColumn": 1,
                  "endLineNumber": 1207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_x1,",
                "range": {
                  "startLineNumber": 1208,
                  "startColumn": 1,
                  "endLineNumber": 1208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_height,",
                "range": {
                  "startLineNumber": 1209,
                  "startColumn": 1,
                  "endLineNumber": 1209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1210,
                  "startColumn": 1,
                  "endLineNumber": 1210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=1",
                "range": {
                  "startLineNumber": 1211,
                  "startColumn": 1,
                  "endLineNumber": 1211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ),",
                "range": {
                  "startLineNumber": 1212,
                  "startColumn": 1,
                  "endLineNumber": 1212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1213,
                  "startColumn": 1,
                  "endLineNumber": 1213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_x2,",
                "range": {
                  "startLineNumber": 1214,
                  "startColumn": 1,
                  "endLineNumber": 1214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_height,",
                "range": {
                  "startLineNumber": 1215,
                  "startColumn": 1,
                  "endLineNumber": 1215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1216,
                  "startColumn": 1,
                  "endLineNumber": 1216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=2",
                "range": {
                  "startLineNumber": 1217,
                  "startColumn": 1,
                  "endLineNumber": 1217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1218,
                  "startColumn": 1,
                  "endLineNumber": 1218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 1219,
                  "startColumn": 1,
                  "endLineNumber": 1219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1220,
                  "startColumn": 1,
                  "endLineNumber": 1220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1221,
                  "startColumn": 1,
                  "endLineNumber": 1221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1222,
                  "startColumn": 1,
                  "endLineNumber": 1222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    try:",
                "range": {
                  "startLineNumber": 1223,
                  "startColumn": 1,
                  "endLineNumber": 1223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1224,
                  "startColumn": 1,
                  "endLineNumber": 1224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla_principal,",
                "range": {
                  "startLineNumber": 1225,
                  "startColumn": 1,
                  "endLineNumber": 1225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores,",
                "range": {
                  "startLineNumber": 1226,
                  "startColumn": 1,
                  "endLineNumber": 1226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador,",
                "range": {
                  "startLineNumber": 1227,
                  "startColumn": 1,
                  "endLineNumber": 1227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud",
                "range": {
                  "startLineNumber": 1228,
                  "startColumn": 1,
                  "endLineNumber": 1228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1229,
                  "startColumn": 1,
                  "endLineNumber": 1229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        game_manager.run()",
                "range": {
                  "startLineNumber": 1230,
                  "startColumn": 1,
                  "endLineNumber": 1230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1231,
                  "startColumn": 1,
                  "endLineNumber": 1231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1232,
                  "startColumn": 1,
                  "endLineNumber": 1232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    finally:",
                "range": {
                  "startLineNumber": 1233,
                  "startColumn": 1,
                  "endLineNumber": 1233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1234,
                  "startColumn": 1,
                  "endLineNumber": 1234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1235,
                  "startColumn": 1073741825,
                  "endLineNumber": 1235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1236,
                  "startColumn": 1073741825,
                  "endLineNumber": 1236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1237,
                  "startColumn": 1073741825,
                  "endLineNumber": 1237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1238,
                  "startColumn": 1073741825,
                  "endLineNumber": 1238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1239,
                  "startColumn": 1073741825,
                  "endLineNumber": 1239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1240,
                  "startColumn": 1073741825,
                  "endLineNumber": 1240,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 8246,
          "totalElapsed": 30381
        },
        "metadata": {
          "applyEditsId": "6da7be76-958b-4909-a67b-7fa3f3e75aeb",
          "modelMessageId": "363f6d15-3c3c-426d-a393-10f7e01a97ef",
          "responseId": "caf41600-3468-48ea-ae00-6a139e63a9ca",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 112
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 113
            },
            "text": "camabia el respawning a la misma poscion de spawn, si uno muere ponle la cara del ganardor y un boton de restart",
            "kind": "text"
          }
        ],
        "text": "camabia el respawning a la misma poscion de spawn, si uno muere ponle la cara del ganardor y un boton de restart"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll break this down into steps:\n\n1. Create spawn position constants\n2. Add win/lose state handling\n3. Update respawn logic\n4. Add winner display and restart button\n\nHere are the changes:\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "\nclass GameConstants:\n    # ...existing code...\n    \n    # Game States\n    STATE_PLAYING = \"Playing\"\n    STATE_GAME_OVER = \"GameOver\"\n    \n    # Spawn Points (new)\n    SPAWN_HEIGHT_OFFSET = 2  # Tiles from mid height\n    SPAWN_WIDTH_OFFSET = 4   # Tiles from mid width\n    \n    # UI\n    RESTART_BUTTON_WIDTH = 200\n    RESTART_BUTTON_HEIGHT = 50\n    WINNER_TEXT_SIZE = 48\n\nclass GameStateManager:\n    def __init__(self, pantalla, jugadores, controlador, hud):\n        # ...existing code...\n        self.winner = None\n        self.spawn_positions = self._calculate_spawn_positions()\n\n    def _calculate_spawn_positions(self):\n        \"\"\"Calculate default spawn positions for both players\"\"\"\n        screen_data = self.pantalla.get_screen_data(\"mid_x\", \"mid_y\", \"tile_size\")\n        spawn_height = screen_data[1] - (screen_data[2] * GameConstants.SPAWN_HEIGHT_OFFSET)\n        spawn_x1 = screen_data[0] - (screen_data[2] * GameConstants.SPAWN_WIDTH_OFFSET)\n        spawn_x2 = screen_data[0] + (screen_data[2] * GameConstants.SPAWN_WIDTH_OFFSET)\n        \n        return [(spawn_x1, spawn_height), (spawn_x2, spawn_height)]\n\n    def _check_game_over(self):\n        \"\"\"Check if any player has died\"\"\"\n        for i, player in enumerate(self.jugadores):\n            if player.health <= 0:\n                self.winner = self.jugadores[1 - i]  # Other player wins\n                self.current_state = GameConstants.STATE_GAME_OVER\n                return True\n        return False\n\n    def _handle_current_state(self):\n        \"\"\"Handle current game state\"\"\"\n        state_handlers = {\n            \"menu\": self.handle_menu,\n            \"playing\": self.handle_playing,\n            GameConstants.STATE_GAME_OVER: self.handle_game_over\n        }\n        return state_handlers.get(self.current_state, lambda: False)()\n\n    def handle_game_over(self):\n        \"\"\"Handle game over state\"\"\"\n        if self._check_quit_event():\n            return True\n\n        teclas = pygame.key.get_pressed()\n        mouse_pos = pygame.mouse.get_pos()\n        mouse_click = pygame.mouse.get_pressed()[0]\n\n        self._render_game()  # Draw game state in background\n        self._draw_winner_screen(mouse_pos)\n\n        if self._check_restart_button(mouse_pos, mouse_click):\n            self._restart_game()\n            return False\n\n        if teclas[pygame.K_BACKSPACE]:\n            return True\n            \n        return False\n\n    def _draw_winner_screen(self, mouse_pos):\n        \"\"\"Draw winner screen overlay\"\"\"\n        display = self.pantalla.get_screen_data(\"display\")\n        width, height = display.get_size()\n        \n        # Semi-transparent overlay\n        overlay = pygame.Surface((width, height), pygame.SRCALPHA)\n        overlay.fill((0, 0, 0, 128))\n        display.blit(overlay, (0, 0))\n        \n        # Winner text\n        font = pygame.font.Font(None, GameConstants.WINNER_TEXT_SIZE)\n        winner_text = f\"Player {self.winner.player_id} Wins!\"\n        text_surf = font.render(winner_text, True, GameConstants.COLORS['WHITE'])\n        text_rect = text_surf.get_rect(center=(width/2, height/3))\n        display.blit(text_surf, text_rect)\n        \n        # Restart button\n        button_rect = self._draw_restart_button(mouse_pos)\n        pygame.display.flip()\n        return button_rect\n\n    def _draw_restart_button(self, mouse_pos):\n        \"\"\"Draw restart button and return its rect\"\"\"\n        display = self.pantalla.get_screen_data(\"display\")\n        width, height = display.get_size()\n        \n        button_rect = pygame.Rect(\n            (width - GameConstants.RESTART_BUTTON_WIDTH) // 2,\n            height * 2 // 3,\n            GameConstants.RESTART_BUTTON_WIDTH,\n            GameConstants.RESTART_BUTTON_HEIGHT\n        )\n        \n        # Change color if mouse is over button\n        color = GameConstants.COLORS['GREEN'] if button_rect.collidepoint(mouse_pos) else GameConstants.COLORS['RED']\n        pygame.draw.rect(display, color, button_rect)\n        \n        # Button text\n        font = pygame.font.Font(None, 36)\n        text_surf = font.render(\"Restart\", True, GameConstants.COLORS['WHITE'])\n        text_rect = text_surf.get_rect(center=button_rect.center)\n        display.blit(text_surf, text_rect)\n        \n        return button_rect\n\n    def _check_restart_button(self, mouse_pos, mouse_click):\n        \"\"\"Check if restart button was clicked\"\"\"\n        button_rect = pygame.Rect(\n            (self.pantalla.get_screen_data(\"width\") - GameConstants.RESTART_BUTTON_WIDTH) // 2,\n            self.pantalla.get_screen_data(\"height\") * 2 // 3,\n            GameConstants.RESTART_BUTTON_WIDTH,\n            GameConstants.RESTART_BUTTON_HEIGHT\n        )\n        return mouse_click and button_rect.collidepoint(mouse_pos)\n\n    def _restart_game(self):\n        \"\"\"Reset game state\"\"\"\n        for i, player in enumerate(self.jugadores):\n            player.health = GameConstants.PLAYER_MAX_HEALTH\n            player.reiniciar_posicion(*self.spawn_positions[i])\n        self.winner = None\n        self.current_state = GameConstants.STATE_PLAYING\n\n    def _update_game_state(self, teclas, delta_time):\n        \"\"\"Update game state for all players\"\"\"\n        # Update player states first\n        for jugador in self.jugadores:\n            self._update_player(jugador, teclas, delta_time)\n        \n        # Then check collisions\n        if len(self.jugadores) > 1:\n            CollisionHandler.check_player_collisions(\n                self.jugadores[0],\n                self.jugadores[1],\n                damage_threshold=7,\n                damage_factor=0.8\n            )\n            \n        # Check for game over\n        self._check_game_over()\n\nclass Personaje:\n    def _check_respawn(self, pantalla):\n        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"\n        datos_pantalla = pantalla.get_screen_data(\n            \"tiles_y\", \"tiles_x\", \"border_x\", \n            \"border_y\", \"tile_size\"\n        )\n        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]\n        \n        if self.rect.y > tamaño_Y + self.tamaño:\n            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)\n            # Use initial spawn position based on player_id\n            spawn_x = pantalla.get_screen_data(\"",
          "supportThemeIcons": false,
          "supportHtml": false
        }
      ],
      "isCanceled": true,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 83
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 84
            },
            "text": "haz en uno y dos, Create spawn position constants y Create spawn position constants",
            "kind": "text"
          }
        ],
        "text": "haz en uno y dos, Create spawn position constants y Create spawn position constants"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you add spawn position constants to the code. Here's how we'll do it:\n\n1. First, add spawn position constants to the GameConstants class.\n2. Create a method to calculate spawn positions based on the screen size.\n\n### [Main.py](file:///d:/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computación%20Gráfica/Ultimate%20Cube%20Battle/Main.py)\n\nAdd spawn position constants and calculation method.\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "class GameConstants:\n    # ...existing code...\n\n    # Spawn positions (as percentage of screen)\n    SPAWN_OFFSET_X = 0.15  # 15% offset from center for both players\n    SPAWN_HEIGHT = 0.4     # 40% from top of screen\n    \n    @staticmethod\n    def calculate_spawn_positions(screen_width, screen_height):\n        \"\"\"Calculate spawn positions for both players\"\"\"\n        center_x = screen_width / 2\n        spawn_y = screen_height * GameConstants.SPAWN_HEIGHT\n        offset_x = screen_width * GameConstants.SPAWN_OFFSET_X\n        \n        return {\n            1: (center_x - offset_x, spawn_y),  # Left player\n            2: (center_x + offset_x, spawn_y)   # Right player\n        }\n\n# ...existing code...\n\ndef main():\n    pygame.init()\n    pygame.mixer.init()\n    \n    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")\n    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")\n    controlador = controlador_plataformas()\n    \n    # Calculate spawn positions\n    screen_width = pantalla_principal.get_screen_data(\"width\")\n    screen_height = pantalla_principal.get_screen_data(\"height\")\n    spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)\n    \n    # Create players with calculated spawn positions\n    jugadores = [\n        Personaje(\n            spawn_positions[1][0],\n            spawn_positions[1][1],\n            tamaño_baldosa,\n            player_id=1\n        ),\n        Personaje(\n            spawn_positions[2][0],\n            spawn_positions[2][1],\n            tamaño_baldosa,\n            player_id=2\n        )\n    ]\n    \n    # ...existing code...\n```\n\nThese changes add spawn position constants and a calculation method to determine where players should spawn based on screen size. The spawn positions are now calculated as a percentage of the screen size, making them more flexible for different screen resolutions. Player 1 spawns on the left side of the center, and Player 2 spawns on the right side.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Spawn positions (as percentage of screen)",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_OFFSET_X = 0.15  # 15% offset from center for both players",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_HEIGHT = 0.4     # 40% from top of screen",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_spawn_positions(screen_width, screen_height):",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate spawn positions for both players\"\"\"",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        center_x = screen_width / 2",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_y = screen_height * GameConstants.SPAWN_HEIGHT",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        offset_x = screen_width * GameConstants.SPAWN_OFFSET_X",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: (center_x - offset_x, spawn_y),  # Left player",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: (center_x + offset_x, spawn_y)   # Right player",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Enhanced player collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate relative velocities",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if impact_velocity <= damage_threshold:",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate impact direction",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if abs(rel_vel_x) > abs(rel_vel_y):",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate damage",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        damage = (impact_velocity - damage_threshold) * damage_factor",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage and knockback",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_collision_effects(receiver, attacker, damage, direction):",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply collision effects to the receiving player\"\"\"",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage considering blocking",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if receiver.bloqueando and receiver.direccion_bloqueo == direction:",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            damage *= 0.3  # 70% damage reduction when blocking correctly",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Reverse some momentum back to attacker",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction in ['left', 'right']:",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_x *= -0.5",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_y *= -0.5",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Apply knockback to receiver",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            knockback_force = damage * 2",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction == 'left':",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = -knockback_force",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'right':",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = knockback_force",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'up':",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = -knockback_force",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:  # down",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = knockback_force",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        receiver.take_damage(damage)",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Update player states first",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Then check collisions",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0],",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1],",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=7,  # Adjusted threshold",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_factor=0.8    # Adjusted damage factor",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1192,
                  "startColumn": 1,
                  "endLineNumber": 1192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1193,
                  "startColumn": 1,
                  "endLineNumber": 1193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1194,
                  "startColumn": 1,
                  "endLineNumber": 1194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1195,
                  "startColumn": 1,
                  "endLineNumber": 1195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1196,
                  "startColumn": 1,
                  "endLineNumber": 1196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1197,
                  "startColumn": 1,
                  "endLineNumber": 1197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1198,
                  "startColumn": 1,
                  "endLineNumber": 1198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1199,
                  "startColumn": 1,
                  "endLineNumber": 1199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1200,
                  "startColumn": 1,
                  "endLineNumber": 1200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1201,
                  "startColumn": 1,
                  "endLineNumber": 1201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1202,
                  "startColumn": 1,
                  "endLineNumber": 1202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1203,
                  "startColumn": 1,
                  "endLineNumber": 1203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1204,
                  "startColumn": 1,
                  "endLineNumber": 1204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1205,
                  "startColumn": 1,
                  "endLineNumber": 1205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1206,
                  "startColumn": 1,
                  "endLineNumber": 1206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1207,
                  "startColumn": 1,
                  "endLineNumber": 1207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1208,
                  "startColumn": 1,
                  "endLineNumber": 1208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1209,
                  "startColumn": 1,
                  "endLineNumber": 1209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1210,
                  "startColumn": 1,
                  "endLineNumber": 1210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1211,
                  "startColumn": 1,
                  "endLineNumber": 1211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1212,
                  "startColumn": 1,
                  "endLineNumber": 1212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1213,
                  "startColumn": 1,
                  "endLineNumber": 1213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Calculate spawn positions",
                "range": {
                  "startLineNumber": 1214,
                  "startColumn": 1,
                  "endLineNumber": 1214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_width = pantalla_principal.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1215,
                  "startColumn": 1,
                  "endLineNumber": 1215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_height = pantalla_principal.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1216,
                  "startColumn": 1,
                  "endLineNumber": 1216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 1217,
                  "startColumn": 1,
                  "endLineNumber": 1217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1218,
                  "startColumn": 1,
                  "endLineNumber": 1218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Create players with calculated spawn positions",
                "range": {
                  "startLineNumber": 1219,
                  "startColumn": 1,
                  "endLineNumber": 1219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1220,
                  "startColumn": 1,
                  "endLineNumber": 1220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1221,
                  "startColumn": 1,
                  "endLineNumber": 1221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[1][0],",
                "range": {
                  "startLineNumber": 1222,
                  "startColumn": 1,
                  "endLineNumber": 1222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[1][1],",
                "range": {
                  "startLineNumber": 1223,
                  "startColumn": 1,
                  "endLineNumber": 1223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1224,
                  "startColumn": 1,
                  "endLineNumber": 1224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=1",
                "range": {
                  "startLineNumber": 1225,
                  "startColumn": 1,
                  "endLineNumber": 1225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ),",
                "range": {
                  "startLineNumber": 1226,
                  "startColumn": 1,
                  "endLineNumber": 1226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1227,
                  "startColumn": 1,
                  "endLineNumber": 1227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[2][0],",
                "range": {
                  "startLineNumber": 1228,
                  "startColumn": 1,
                  "endLineNumber": 1228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[2][1],",
                "range": {
                  "startLineNumber": 1229,
                  "startColumn": 1,
                  "endLineNumber": 1229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1230,
                  "startColumn": 1,
                  "endLineNumber": 1230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=2",
                "range": {
                  "startLineNumber": 1231,
                  "startColumn": 1,
                  "endLineNumber": 1231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1232,
                  "startColumn": 1,
                  "endLineNumber": 1232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 1233,
                  "startColumn": 1,
                  "endLineNumber": 1233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1234,
                  "startColumn": 1,
                  "endLineNumber": 1234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1235,
                  "startColumn": 1073741825,
                  "endLineNumber": 1235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1236,
                  "startColumn": 1073741825,
                  "endLineNumber": 1236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try:",
                "range": {
                  "startLineNumber": 1237,
                  "startColumn": 1073741825,
                  "endLineNumber": 1237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1238,
                  "startColumn": 1073741825,
                  "endLineNumber": 1238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pantalla_principal,",
                "range": {
                  "startLineNumber": 1239,
                  "startColumn": 1073741825,
                  "endLineNumber": 1239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            jugadores,",
                "range": {
                  "startLineNumber": 1240,
                  "startColumn": 1073741825,
                  "endLineNumber": 1240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            controlador,",
                "range": {
                  "startLineNumber": 1241,
                  "startColumn": 1073741825,
                  "endLineNumber": 1241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            hud",
                "range": {
                  "startLineNumber": 1242,
                  "startColumn": 1073741825,
                  "endLineNumber": 1242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1243,
                  "startColumn": 1073741825,
                  "endLineNumber": 1243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager.run()",
                "range": {
                  "startLineNumber": 1244,
                  "startColumn": 1073741825,
                  "endLineNumber": 1244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1245,
                  "startColumn": 1073741825,
                  "endLineNumber": 1245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1246,
                  "startColumn": 1073741825,
                  "endLineNumber": 1246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1247,
                  "startColumn": 1073741825,
                  "endLineNumber": 1247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1248,
                  "startColumn": 1073741825,
                  "endLineNumber": 1248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1249,
                  "startColumn": 1073741825,
                  "endLineNumber": 1249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1250,
                  "startColumn": 1073741825,
                  "endLineNumber": 1250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1251,
                  "startColumn": 1073741825,
                  "endLineNumber": 1251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1252,
                  "startColumn": 1073741825,
                  "endLineNumber": 1252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1253,
                  "startColumn": 1073741825,
                  "endLineNumber": 1253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1254,
                  "startColumn": 1073741825,
                  "endLineNumber": 1254,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 5921,
          "totalElapsed": 43038
        },
        "metadata": {
          "applyEditsId": "b8d682e0-c162-4a30-b0aa-bf97d5dc2d98",
          "modelMessageId": "b71ee1c7-6c8c-4dc4-9378-31cc69296425",
          "responseId": "e3a88e32-ac4e-4c85-8582-577c4ed3ac5a",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 68
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 69
            },
            "text": "pantalla de victoria con el sprite del ganador y un boton de restart",
            "kind": "text"
          }
        ],
        "text": "pantalla de victoria con el sprite del ganador y un boton de restart"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "Here's how to add a victory screen with the winner's sprite and a restart button:\n\n1. Add victory state constants and UI constants\n2. Add a victory screen handler to GameStateManager\n3. Create a VictoryScreen class\n\n### [Main.py](file:///d:/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computación%20Gráfica/Ultimate%20Cube%20Battle/Main.py)\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "\nclass GameConstants:\n    # ...existing code...\n    \n    # Victory screen constants\n    VICTORY_TITLE_SIZE = 64\n    VICTORY_TEXT_COLOR = (255, 215, 0)  # Gold color\n    VICTORY_SPRITE_SCALE = 4  # Scale factor for winner sprite\n    BUTTON_WIDTH = 200\n    BUTTON_HEIGHT = 50\n    BUTTON_COLOR = (100, 100, 100)\n    BUTTON_HOVER_COLOR = (150, 150, 150)\n    BUTTON_TEXT_COLOR = (255, 255, 255)\n    BUTTON_TEXT_SIZE = 32\n\nclass VictoryScreen:\n    def __init__(self, pantalla, winner):\n        self.pantalla = pantalla\n        self.winner = winner\n        self.setup_ui()\n        \n    def setup_ui(self):\n        screen_width = self.pantalla.get_screen_data(\"width\")\n        screen_height = self.pantalla.get_screen_data(\"height\")\n        \n        # Setup restart button\n        self.button_rect = pygame.Rect(\n            (screen_width - GameConstants.BUTTON_WIDTH) // 2,\n            screen_height * 0.7,\n            GameConstants.BUTTON_WIDTH,\n            GameConstants.BUTTON_HEIGHT\n        )\n        \n        # Setup fonts\n        self.title_font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)\n        self.button_font = pygame.font.Font(None, GameConstants.BUTTON_TEXT_SIZE)\n        \n    def draw(self, surface):\n        # Draw background overlay\n        overlay = pygame.Surface(\n            (self.pantalla.get_screen_data(\"width\"), \n             self.pantalla.get_screen_data(\"height\")), \n            pygame.SRCALPHA\n        )\n        overlay.fill((0, 0, 0, 180))  # Semi-transparent black\n        surface.blit(overlay, (0, 0))\n        \n        # Draw victory text\n        text = self.title_font.render(f\"Player {self.winner.player_id} Wins!\", True, \n                                    GameConstants.VICTORY_TEXT_COLOR)\n        text_rect = text.get_rect(centerx=self.pantalla.get_screen_data(\"mid_x\"), \n                                 y=100)\n        surface.blit(text, text_rect)\n        \n        # Draw winner sprite scaled up\n        resource_manager = ResourceManager()\n        winner_sprite = resource_manager.get_scaled_sprite(\n            'player',\n            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            self.winner.sprite_config['row'],\n            self.winner.sprite_config['col']\n        )\n        if winner_sprite:\n            sprite_rect = winner_sprite.get_rect(\n                center=(self.pantalla.get_screen_data(\"mid_x\"),\n                       self.pantalla.get_screen_data(\"mid_y\"))\n            )\n            surface.blit(winner_sprite, sprite_rect)\n        \n        # Draw restart button\n        mouse_pos = pygame.mouse.get_pos()\n        button_color = (GameConstants.BUTTON_HOVER_COLOR \n                       if self.button_rect.collidepoint(mouse_pos) \n                       else GameConstants.BUTTON_COLOR)\n        \n        pygame.draw.rect(surface, button_color, self.button_rect)\n        \n        # Draw button text\n        button_text = self.button_font.render(\"Restart\", True, \n                                            GameConstants.BUTTON_TEXT_COLOR)\n        text_rect = button_text.get_rect(center=self.button_rect.center)\n        surface.blit(button_text, text_rect)\n    \n    def handle_input(self):\n        \"\"\"Handle input events for the victory screen\"\"\"\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                return \"quit\"\n            if event.type == pygame.MOUSEBUTTONDOWN:\n                if self.button_rect.collidepoint(event.pos):\n                    return \"restart\"\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_ESCAPE:\n                    return \"restart\"\n        return None\n\nclass GameStateManager:\n    # ...existing code...\n\n    def __init__(self, pantalla, jugadores, controlador, hud):\n        # ...existing code...\n        self.victory_screen = None\n\n    def _handle_current_state(self):\n        state_handlers = {\n            \"menu\": self.handle_menu,\n            \"playing\": self.handle_playing,\n            \"victory\": self.handle_victory\n        }\n        return state_handlers.get(self.current_state, lambda: False)()\n\n    def handle_victory(self):\n        \"\"\"Handle victory screen state\"\"\"\n        result = self.victory_screen.handle_input()\n        \n        if result == \"quit\":\n            return True\n        elif result == \"restart\":\n            self._reset_game()\n            self._transition_to_state(\"playing\")\n            return False\n            \n        self._render_victory()\n        return False\n    \n    def _render_victory(self):\n        \"\"\"Render victory screen\"\"\"\n        self.pantalla.actualizar_juego(\n            fondo=self.fondo,\n            jugadores=self.jugadores,\n            plataforma=self.controlador\n        )\n        self.victory_screen.draw(self.pantalla.get_screen_data(\"display\"))\n        pygame.display.flip()\n\n    def _check_victory(self):\n        \"\"\"Check if someone won\"\"\"\n        for jugador in self.jugadores:\n            if jugador.health <= 0:\n                winner = next(p for p in self.jugadores if p != jugador)\n                self.victory_screen = VictoryScreen(self.pantalla, winner)\n                self._transition_to_state(\"victory\")\n                break\n\n    def _reset_game(self):\n        \"\"\"Reset game state for a new match\"\"\"\n        screen_width = self.pantalla.get_screen_data(\"width\")\n        screen_height = self.pantalla.get_screen_data(\"height\")\n        spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)\n        \n        for jugador in self.jugadores:\n            jugador.health = GameConstants.PLAYER_MAX_HEALTH\n            spawn_pos = spawn_positions[jugador.player_id]\n            jugador.reiniciar_posicion(spawn_pos[0], spawn_pos[1])\n\n    def _update_game_state(self, teclas, delta_time):\n        # ...existing code...\n        self._check_victory()  # Add this line at the end\n```\n\nThis code:\n\n1. Adds victory screen constants to GameConstants\n2. Creates a VictoryScreen class that handles drawing and input\n3. Adds victory state handling to GameStateManager\n4. Implements game reset functionality\n5. Adds victory condition checking\n\nTo use it, the game will automatically transition to the victory screen when a player's health reaches 0. The screen shows:\n- A victory message\n- The winner's sprite enlarged\n- A restart button that can be clicked\n- The option to press ESC to restart\n\nThe background game state remains visible but darkened. Players can restart the game by clicking the button or pressing ESC.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Spawn positions (as percentage of screen)",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_OFFSET_X = 0.15  # 15% offset from center for both players",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_HEIGHT = 0.4     # 40% from top of screen",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Victory screen constants",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_TITLE_SIZE = 64",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_TEXT_COLOR = (255, 215, 0)  # Gold color",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_SPRITE_SCALE = 4  # Scale factor for winner sprite",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_WIDTH = 200",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_HEIGHT = 50",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_COLOR = (100, 100, 100)",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_HOVER_COLOR = (150, 150, 150)",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_TEXT_COLOR = (255, 255, 255)",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_TEXT_SIZE = 32",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_spawn_positions(screen_width, screen_height):",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate spawn positions for both players\"\"\"",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        center_x = screen_width / 2",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_y = screen_height * GameConstants.SPAWN_HEIGHT",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        offset_x = screen_width * GameConstants.SPAWN_OFFSET_X",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: (center_x - offset_x, spawn_y),  # Left player",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: (center_x + offset_x, spawn_y)   # Right player",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Enhanced player collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate relative velocities",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if impact_velocity <= damage_threshold:",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate impact direction",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if abs(rel_vel_x) > abs(rel_vel_y):",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate damage",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        damage = (impact_velocity - damage_threshold) * damage_factor",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage and knockback",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_collision_effects(receiver, attacker, damage, direction):",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply collision effects to the receiving player\"\"\"",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage considering blocking",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if receiver.bloqueando and receiver.direccion_bloqueo == direction:",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            damage *= 0.3  # 70% damage reduction when blocking correctly",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Reverse some momentum back to attacker",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction in ['left', 'right']:",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_x *= -0.5",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_y *= -0.5",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Apply knockback to receiver",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            knockback_force = damage * 2",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction == 'left':",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = -knockback_force",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'right':",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = knockback_force",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'up':",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = -knockback_force",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:  # down",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = knockback_force",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        receiver.take_damage(damage)",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen = None",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing,",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"victory\": self.handle_victory",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_victory(self):",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle victory screen state\"\"\"",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        result = self.victory_screen.handle_input()",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if result == \"quit\":",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif result == \"restart\":",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._reset_game()",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_victory()",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_victory(self):",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render victory screen\"\"\"",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen.draw(self.pantalla.get_screen_data(\"display\"))",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_victory(self):",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if someone won\"\"\"",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if jugador.health <= 0:",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                winner = next(p for p in self.jugadores if p != jugador)",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.victory_screen = VictoryScreen(self.pantalla, winner)",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self._transition_to_state(\"victory\")",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                break",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _reset_game(self):",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reset game state for a new match\"\"\"",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = self.pantalla.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = self.pantalla.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugador.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_pos = spawn_positions[jugador.player_id]",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugador.reiniciar_posicion(spawn_pos[0], spawn_pos[1])",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Update player states first",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Then check collisions",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0],",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1],",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=7,  # Adjusted threshold",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_factor=0.8    # Adjusted damage factor",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_victory()  # Add this line at the end",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1192,
                  "startColumn": 1,
                  "endLineNumber": 1192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1193,
                  "startColumn": 1,
                  "endLineNumber": 1193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1194,
                  "startColumn": 1,
                  "endLineNumber": 1194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1195,
                  "startColumn": 1,
                  "endLineNumber": 1195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1196,
                  "startColumn": 1,
                  "endLineNumber": 1196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1197,
                  "startColumn": 1,
                  "endLineNumber": 1197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1198,
                  "startColumn": 1,
                  "endLineNumber": 1198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1199,
                  "startColumn": 1,
                  "endLineNumber": 1199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1200,
                  "startColumn": 1,
                  "endLineNumber": 1200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1201,
                  "startColumn": 1,
                  "endLineNumber": 1201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1202,
                  "startColumn": 1,
                  "endLineNumber": 1202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1203,
                  "startColumn": 1,
                  "endLineNumber": 1203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1204,
                  "startColumn": 1,
                  "endLineNumber": 1204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1205,
                  "startColumn": 1,
                  "endLineNumber": 1205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1206,
                  "startColumn": 1,
                  "endLineNumber": 1206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1207,
                  "startColumn": 1,
                  "endLineNumber": 1207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1208,
                  "startColumn": 1,
                  "endLineNumber": 1208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1209,
                  "startColumn": 1,
                  "endLineNumber": 1209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1210,
                  "startColumn": 1,
                  "endLineNumber": 1210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1211,
                  "startColumn": 1,
                  "endLineNumber": 1211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1212,
                  "startColumn": 1,
                  "endLineNumber": 1212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1213,
                  "startColumn": 1,
                  "endLineNumber": 1213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1214,
                  "startColumn": 1,
                  "endLineNumber": 1214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1215,
                  "startColumn": 1,
                  "endLineNumber": 1215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1216,
                  "startColumn": 1,
                  "endLineNumber": 1216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1217,
                  "startColumn": 1,
                  "endLineNumber": 1217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1218,
                  "startColumn": 1,
                  "endLineNumber": 1218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1219,
                  "startColumn": 1,
                  "endLineNumber": 1219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1220,
                  "startColumn": 1,
                  "endLineNumber": 1220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1221,
                  "startColumn": 1,
                  "endLineNumber": 1221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1222,
                  "startColumn": 1,
                  "endLineNumber": 1222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1223,
                  "startColumn": 1,
                  "endLineNumber": 1223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1224,
                  "startColumn": 1,
                  "endLineNumber": 1224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1225,
                  "startColumn": 1,
                  "endLineNumber": 1225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1226,
                  "startColumn": 1,
                  "endLineNumber": 1226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1227,
                  "startColumn": 1,
                  "endLineNumber": 1227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1228,
                  "startColumn": 1,
                  "endLineNumber": 1228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1229,
                  "startColumn": 1,
                  "endLineNumber": 1229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1230,
                  "startColumn": 1,
                  "endLineNumber": 1230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1231,
                  "startColumn": 1,
                  "endLineNumber": 1231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1232,
                  "startColumn": 1,
                  "endLineNumber": 1232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1233,
                  "startColumn": 1,
                  "endLineNumber": 1233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1234,
                  "startColumn": 1,
                  "endLineNumber": 1234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1235,
                  "startColumn": 1,
                  "endLineNumber": 1235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1236,
                  "startColumn": 1,
                  "endLineNumber": 1236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1237,
                  "startColumn": 1,
                  "endLineNumber": 1237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1238,
                  "startColumn": 1,
                  "endLineNumber": 1238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1239,
                  "startColumn": 1,
                  "endLineNumber": 1239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1240,
                  "startColumn": 1,
                  "endLineNumber": 1240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1241,
                  "startColumn": 1,
                  "endLineNumber": 1241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1242,
                  "startColumn": 1,
                  "endLineNumber": 1242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1243,
                  "startColumn": 1,
                  "endLineNumber": 1243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1244,
                  "startColumn": 1,
                  "endLineNumber": 1244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1245,
                  "startColumn": 1,
                  "endLineNumber": 1245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1246,
                  "startColumn": 1,
                  "endLineNumber": 1246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1247,
                  "startColumn": 1,
                  "endLineNumber": 1247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1248,
                  "startColumn": 1,
                  "endLineNumber": 1248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1249,
                  "startColumn": 1,
                  "endLineNumber": 1249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1250,
                  "startColumn": 1,
                  "endLineNumber": 1250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1251,
                  "startColumn": 1,
                  "endLineNumber": 1251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1252,
                  "startColumn": 1,
                  "endLineNumber": 1252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1253,
                  "startColumn": 1,
                  "endLineNumber": 1253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1254,
                  "startColumn": 1,
                  "endLineNumber": 1254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1255,
                  "startColumn": 1073741825,
                  "endLineNumber": 1255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1256,
                  "startColumn": 1073741825,
                  "endLineNumber": 1256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    @classmethod",
                "range": {
                  "startLineNumber": 1257,
                  "startColumn": 1073741825,
                  "endLineNumber": 1257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1258,
                  "startColumn": 1073741825,
                  "endLineNumber": 1258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        if player_number == 1:",
                "range": {
                  "startLineNumber": 1259,
                  "startColumn": 1073741825,
                  "endLineNumber": 1259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1260,
                  "startColumn": 1073741825,
                  "endLineNumber": 1260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1261,
                  "startColumn": 1073741825,
                  "endLineNumber": 1261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1262,
                  "startColumn": 1073741825,
                  "endLineNumber": 1262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nclass VictoryScreen:",
                "range": {
                  "startLineNumber": 1263,
                  "startColumn": 1073741825,
                  "endLineNumber": 1263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    def __init__(self, pantalla, winner):",
                "range": {
                  "startLineNumber": 1264,
                  "startColumn": 1073741825,
                  "endLineNumber": 1264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 1265,
                  "startColumn": 1073741825,
                  "endLineNumber": 1265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        self.winner = winner",
                "range": {
                  "startLineNumber": 1266,
                  "startColumn": 1073741825,
                  "endLineNumber": 1266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        self.setup_ui()",
                "range": {
                  "startLineNumber": 1267,
                  "startColumn": 1073741825,
                  "endLineNumber": 1267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1268,
                  "startColumn": 1073741825,
                  "endLineNumber": 1268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    def setup_ui(self):",
                "range": {
                  "startLineNumber": 1269,
                  "startColumn": 1073741825,
                  "endLineNumber": 1269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        screen_width = self.pantalla.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1270,
                  "startColumn": 1073741825,
                  "endLineNumber": 1270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        screen_height = self.pantalla.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1271,
                  "startColumn": 1073741825,
                  "endLineNumber": 1271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1272,
                  "startColumn": 1073741825,
                  "endLineNumber": 1272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Setup restart button",
                "range": {
                  "startLineNumber": 1273,
                  "startColumn": 1073741825,
                  "endLineNumber": 1273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        self.button_rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 1274,
                  "startColumn": 1073741825,
                  "endLineNumber": 1274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            (screen_width - GameConstants.BUTTON_WIDTH) // 2,",
                "range": {
                  "startLineNumber": 1275,
                  "startColumn": 1073741825,
                  "endLineNumber": 1275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            screen_height * 0.7,",
                "range": {
                  "startLineNumber": 1276,
                  "startColumn": 1073741825,
                  "endLineNumber": 1276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            GameConstants.BUTTON_WIDTH,",
                "range": {
                  "startLineNumber": 1277,
                  "startColumn": 1073741825,
                  "endLineNumber": 1277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            GameConstants.BUTTON_HEIGHT",
                "range": {
                  "startLineNumber": 1278,
                  "startColumn": 1073741825,
                  "endLineNumber": 1278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1279,
                  "startColumn": 1073741825,
                  "endLineNumber": 1279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1280,
                  "startColumn": 1073741825,
                  "endLineNumber": 1280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Setup fonts",
                "range": {
                  "startLineNumber": 1281,
                  "startColumn": 1073741825,
                  "endLineNumber": 1281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        self.title_font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)",
                "range": {
                  "startLineNumber": 1282,
                  "startColumn": 1073741825,
                  "endLineNumber": 1282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        self.button_font = pygame.font.Font(None, GameConstants.BUTTON_TEXT_SIZE)",
                "range": {
                  "startLineNumber": 1283,
                  "startColumn": 1073741825,
                  "endLineNumber": 1283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1284,
                  "startColumn": 1073741825,
                  "endLineNumber": 1284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    def draw(self, surface):",
                "range": {
                  "startLineNumber": 1285,
                  "startColumn": 1073741825,
                  "endLineNumber": 1285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Draw background overlay",
                "range": {
                  "startLineNumber": 1286,
                  "startColumn": 1073741825,
                  "endLineNumber": 1286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 1287,
                  "startColumn": 1073741825,
                  "endLineNumber": 1287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            (self.pantalla.get_screen_data(\"width\"), ",
                "range": {
                  "startLineNumber": 1288,
                  "startColumn": 1073741825,
                  "endLineNumber": 1288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n             self.pantalla.get_screen_data(\"height\")), ",
                "range": {
                  "startLineNumber": 1289,
                  "startColumn": 1073741825,
                  "endLineNumber": 1289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 1290,
                  "startColumn": 1073741825,
                  "endLineNumber": 1290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1291,
                  "startColumn": 1073741825,
                  "endLineNumber": 1291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        overlay.fill((0, 0, 0, 180))  # Semi-transparent black",
                "range": {
                  "startLineNumber": 1292,
                  "startColumn": 1073741825,
                  "endLineNumber": 1292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 1293,
                  "startColumn": 1073741825,
                  "endLineNumber": 1293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1294,
                  "startColumn": 1073741825,
                  "endLineNumber": 1294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Draw victory text",
                "range": {
                  "startLineNumber": 1295,
                  "startColumn": 1073741825,
                  "endLineNumber": 1295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        text = self.title_font.render(f\"Player {self.winner.player_id} Wins!\", True, ",
                "range": {
                  "startLineNumber": 1296,
                  "startColumn": 1073741825,
                  "endLineNumber": 1296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                    GameConstants.VICTORY_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 1297,
                  "startColumn": 1073741825,
                  "endLineNumber": 1297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        text_rect = text.get_rect(centerx=self.pantalla.get_screen_data(\"mid_x\"), ",
                "range": {
                  "startLineNumber": 1298,
                  "startColumn": 1073741825,
                  "endLineNumber": 1298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                 y=100)",
                "range": {
                  "startLineNumber": 1299,
                  "startColumn": 1073741825,
                  "endLineNumber": 1299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        surface.blit(text, text_rect)",
                "range": {
                  "startLineNumber": 1300,
                  "startColumn": 1073741825,
                  "endLineNumber": 1300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1301,
                  "startColumn": 1073741825,
                  "endLineNumber": 1301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Draw winner sprite scaled up",
                "range": {
                  "startLineNumber": 1302,
                  "startColumn": 1073741825,
                  "endLineNumber": 1302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 1303,
                  "startColumn": 1073741825,
                  "endLineNumber": 1303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        winner_sprite = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 1304,
                  "startColumn": 1073741825,
                  "endLineNumber": 1304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            'player',",
                "range": {
                  "startLineNumber": 1305,
                  "startColumn": 1073741825,
                  "endLineNumber": 1305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 1306,
                  "startColumn": 1073741825,
                  "endLineNumber": 1306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 1307,
                  "startColumn": 1073741825,
                  "endLineNumber": 1307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            self.winner.sprite_config['row'],",
                "range": {
                  "startLineNumber": 1308,
                  "startColumn": 1073741825,
                  "endLineNumber": 1308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            self.winner.sprite_config['col']",
                "range": {
                  "startLineNumber": 1309,
                  "startColumn": 1073741825,
                  "endLineNumber": 1309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1310,
                  "startColumn": 1073741825,
                  "endLineNumber": 1310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        if winner_sprite:",
                "range": {
                  "startLineNumber": 1311,
                  "startColumn": 1073741825,
                  "endLineNumber": 1311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            sprite_rect = winner_sprite.get_rect(",
                "range": {
                  "startLineNumber": 1312,
                  "startColumn": 1073741825,
                  "endLineNumber": 1312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                center=(self.pantalla.get_screen_data(\"mid_x\"),",
                "range": {
                  "startLineNumber": 1313,
                  "startColumn": 1073741825,
                  "endLineNumber": 1313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                       self.pantalla.get_screen_data(\"mid_y\"))",
                "range": {
                  "startLineNumber": 1314,
                  "startColumn": 1073741825,
                  "endLineNumber": 1314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            )",
                "range": {
                  "startLineNumber": 1315,
                  "startColumn": 1073741825,
                  "endLineNumber": 1315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            surface.blit(winner_sprite, sprite_rect)",
                "range": {
                  "startLineNumber": 1316,
                  "startColumn": 1073741825,
                  "endLineNumber": 1316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1317,
                  "startColumn": 1073741825,
                  "endLineNumber": 1317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Draw restart button",
                "range": {
                  "startLineNumber": 1318,
                  "startColumn": 1073741825,
                  "endLineNumber": 1318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        mouse_pos = pygame.mouse.get_pos()",
                "range": {
                  "startLineNumber": 1319,
                  "startColumn": 1073741825,
                  "endLineNumber": 1319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        button_color = (GameConstants.BUTTON_HOVER_COLOR ",
                "range": {
                  "startLineNumber": 1320,
                  "startColumn": 1073741825,
                  "endLineNumber": 1320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                       if self.button_rect.collidepoint(mouse_pos) ",
                "range": {
                  "startLineNumber": 1321,
                  "startColumn": 1073741825,
                  "endLineNumber": 1321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                       else GameConstants.BUTTON_COLOR)",
                "range": {
                  "startLineNumber": 1322,
                  "startColumn": 1073741825,
                  "endLineNumber": 1322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1323,
                  "startColumn": 1073741825,
                  "endLineNumber": 1323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.draw.rect(surface, button_color, self.button_rect)",
                "range": {
                  "startLineNumber": 1324,
                  "startColumn": 1073741825,
                  "endLineNumber": 1324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 1325,
                  "startColumn": 1073741825,
                  "endLineNumber": 1325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        # Draw button text",
                "range": {
                  "startLineNumber": 1326,
                  "startColumn": 1073741825,
                  "endLineNumber": 1326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        button_text = self.button_font.render(\"Restart\", True, ",
                "range": {
                  "startLineNumber": 1327,
                  "startColumn": 1073741825,
                  "endLineNumber": 1327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                            GameConstants.BUTTON_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 1328,
                  "startColumn": 1073741825,
                  "endLineNumber": 1328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        text_rect = button_text.get_rect(center=self.button_rect.center)",
                "range": {
                  "startLineNumber": 1329,
                  "startColumn": 1073741825,
                  "endLineNumber": 1329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        surface.blit(button_text, text_rect)",
                "range": {
                  "startLineNumber": 1330,
                  "startColumn": 1073741825,
                  "endLineNumber": 1330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1331,
                  "startColumn": 1073741825,
                  "endLineNumber": 1331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    def handle_input(self):",
                "range": {
                  "startLineNumber": 1332,
                  "startColumn": 1073741825,
                  "endLineNumber": 1332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"\"\"Handle input events for the victory screen\"\"\"",
                "range": {
                  "startLineNumber": 1333,
                  "startColumn": 1073741825,
                  "endLineNumber": 1333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        for event in pygame.event.get():",
                "range": {
                  "startLineNumber": 1334,
                  "startColumn": 1073741825,
                  "endLineNumber": 1334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            if event.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 1335,
                  "startColumn": 1073741825,
                  "endLineNumber": 1335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                return \"quit\"",
                "range": {
                  "startLineNumber": 1336,
                  "startColumn": 1073741825,
                  "endLineNumber": 1336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            if event.type == pygame.MOUSEBUTTONDOWN:",
                "range": {
                  "startLineNumber": 1337,
                  "startColumn": 1073741825,
                  "endLineNumber": 1337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if self.button_rect.collidepoint(event.pos):",
                "range": {
                  "startLineNumber": 1338,
                  "startColumn": 1073741825,
                  "endLineNumber": 1338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    return \"restart\"",
                "range": {
                  "startLineNumber": 1339,
                  "startColumn": 1073741825,
                  "endLineNumber": 1339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            if event.type == pygame.KEYDOWN:",
                "range": {
                  "startLineNumber": 1340,
                  "startColumn": 1073741825,
                  "endLineNumber": 1340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if event.key == pygame.K_ESCAPE:",
                "range": {
                  "startLineNumber": 1341,
                  "startColumn": 1073741825,
                  "endLineNumber": 1341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    return \"restart\"",
                "range": {
                  "startLineNumber": 1342,
                  "startColumn": 1073741825,
                  "endLineNumber": 1342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        return None",
                "range": {
                  "startLineNumber": 1343,
                  "startColumn": 1073741825,
                  "endLineNumber": 1343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1344,
                  "startColumn": 1073741825,
                  "endLineNumber": 1344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1345,
                  "startColumn": 1073741825,
                  "endLineNumber": 1345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ndef main():",
                "range": {
                  "startLineNumber": 1346,
                  "startColumn": 1073741825,
                  "endLineNumber": 1346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    pygame.init()",
                "range": {
                  "startLineNumber": 1347,
                  "startColumn": 1073741825,
                  "endLineNumber": 1347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1348,
                  "startColumn": 1073741825,
                  "endLineNumber": 1348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1349,
                  "startColumn": 1073741825,
                  "endLineNumber": 1349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1350,
                  "startColumn": 1073741825,
                  "endLineNumber": 1350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1351,
                  "startColumn": 1073741825,
                  "endLineNumber": 1351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1352,
                  "startColumn": 1073741825,
                  "endLineNumber": 1352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1353,
                  "startColumn": 1073741825,
                  "endLineNumber": 1353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    # Calculate spawn positions",
                "range": {
                  "startLineNumber": 1354,
                  "startColumn": 1073741825,
                  "endLineNumber": 1354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    screen_width = pantalla_principal.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1355,
                  "startColumn": 1073741825,
                  "endLineNumber": 1355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    screen_height = pantalla_principal.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1356,
                  "startColumn": 1073741825,
                  "endLineNumber": 1356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 1357,
                  "startColumn": 1073741825,
                  "endLineNumber": 1357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1358,
                  "startColumn": 1073741825,
                  "endLineNumber": 1358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    # Create players with calculated spawn positions",
                "range": {
                  "startLineNumber": 1359,
                  "startColumn": 1073741825,
                  "endLineNumber": 1359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    jugadores = [",
                "range": {
                  "startLineNumber": 1360,
                  "startColumn": 1073741825,
                  "endLineNumber": 1360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        Personaje(",
                "range": {
                  "startLineNumber": 1361,
                  "startColumn": 1073741825,
                  "endLineNumber": 1361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            spawn_positions[1][0],",
                "range": {
                  "startLineNumber": 1362,
                  "startColumn": 1073741825,
                  "endLineNumber": 1362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            spawn_positions[1][1],",
                "range": {
                  "startLineNumber": 1363,
                  "startColumn": 1073741825,
                  "endLineNumber": 1363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1364,
                  "startColumn": 1073741825,
                  "endLineNumber": 1364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=1",
                "range": {
                  "startLineNumber": 1365,
                  "startColumn": 1073741825,
                  "endLineNumber": 1365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ),",
                "range": {
                  "startLineNumber": 1366,
                  "startColumn": 1073741825,
                  "endLineNumber": 1366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        Personaje(",
                "range": {
                  "startLineNumber": 1367,
                  "startColumn": 1073741825,
                  "endLineNumber": 1367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            spawn_positions[2][0],",
                "range": {
                  "startLineNumber": 1368,
                  "startColumn": 1073741825,
                  "endLineNumber": 1368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            spawn_positions[2][1],",
                "range": {
                  "startLineNumber": 1369,
                  "startColumn": 1073741825,
                  "endLineNumber": 1369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1370,
                  "startColumn": 1073741825,
                  "endLineNumber": 1370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=2",
                "range": {
                  "startLineNumber": 1371,
                  "startColumn": 1073741825,
                  "endLineNumber": 1371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1372,
                  "startColumn": 1073741825,
                  "endLineNumber": 1372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]",
                "range": {
                  "startLineNumber": 1373,
                  "startColumn": 1073741825,
                  "endLineNumber": 1373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1374,
                  "startColumn": 1073741825,
                  "endLineNumber": 1374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1375,
                  "startColumn": 1073741825,
                  "endLineNumber": 1375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1376,
                  "startColumn": 1073741825,
                  "endLineNumber": 1376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try:",
                "range": {
                  "startLineNumber": 1377,
                  "startColumn": 1073741825,
                  "endLineNumber": 1377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1378,
                  "startColumn": 1073741825,
                  "endLineNumber": 1378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pantalla_principal,",
                "range": {
                  "startLineNumber": 1379,
                  "startColumn": 1073741825,
                  "endLineNumber": 1379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            jugadores,",
                "range": {
                  "startLineNumber": 1380,
                  "startColumn": 1073741825,
                  "endLineNumber": 1380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            controlador,",
                "range": {
                  "startLineNumber": 1381,
                  "startColumn": 1073741825,
                  "endLineNumber": 1381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            hud",
                "range": {
                  "startLineNumber": 1382,
                  "startColumn": 1073741825,
                  "endLineNumber": 1382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1383,
                  "startColumn": 1073741825,
                  "endLineNumber": 1383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager.run()",
                "range": {
                  "startLineNumber": 1384,
                  "startColumn": 1073741825,
                  "endLineNumber": 1384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1385,
                  "startColumn": 1073741825,
                  "endLineNumber": 1385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1386,
                  "startColumn": 1073741825,
                  "endLineNumber": 1386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1387,
                  "startColumn": 1073741825,
                  "endLineNumber": 1387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1388,
                  "startColumn": 1073741825,
                  "endLineNumber": 1388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1389,
                  "startColumn": 1073741825,
                  "endLineNumber": 1389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1390,
                  "startColumn": 1073741825,
                  "endLineNumber": 1390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1391,
                  "startColumn": 1073741825,
                  "endLineNumber": 1391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1392,
                  "startColumn": 1073741825,
                  "endLineNumber": 1392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1393,
                  "startColumn": 1073741825,
                  "endLineNumber": 1393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1394,
                  "startColumn": 1073741825,
                  "endLineNumber": 1394,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 8493,
          "totalElapsed": 164893
        },
        "metadata": {
          "applyEditsId": "c0ae7986-ba7d-4ea7-b328-562669df7011",
          "modelMessageId": "cbbda037-6c81-4333-97d1-bb5af8a65485",
          "responseId": "efd7ad1e-005d-4934-82c7-de8718d9e8c1",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 42
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 43
            },
            "text": "pon el winer en el menu junto con el boton",
            "kind": "text"
          }
        ],
        "text": "pon el winer en el menu junto con el boton"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll modify the menu to show the winner sprite when transitioning from victory state. Here's how to update the necessary parts:\n\n### [Main.py](file:///d:/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computación%20Gráfica/Ultimate%20Cube%20Battle/Main.py)\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "\nclass Pantalla:\n    # ...existing code...\n    \n    def actualizar_menu(self, winner=None):\n        \"\"\"Update menu display with overlay and optional winner\"\"\"\n        self._clear_screen()\n        self._draw_menu_overlay()\n        if winner:\n            self._draw_winner(winner)\n        self._update_display()\n\n    def _draw_winner(self, winner):\n        \"\"\"Draw winner sprite and text in menu\"\"\"\n        resource_manager = ResourceManager()\n        \n        # Draw winner sprite\n        winner_sprite = resource_manager.get_scaled_sprite(\n            'player',\n            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            winner.sprite_config['row'],\n            winner.sprite_config['col']\n        )\n        if winner_sprite:\n            sprite_rect = winner_sprite.get_rect(\n                center=(self.screen_data.mid_x,\n                       self.screen_data.mid_y))\n            self.display_surface.blit(winner_sprite, sprite_rect)\n\n        # Draw winner text\n        font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)\n        text = font.render(f\"Player {winner.player_id} Wins!\", True, \n                         GameConstants.VICTORY_TEXT_COLOR)\n        text_rect = text.get_rect(centerx=self.screen_data.mid_x, y=100)\n        self.display_surface.blit(text, text_rect)\n\nclass GameStateManager:\n    # ...existing code...\n    \n    def __init__(self, pantalla, jugadores, controlador, hud):\n        # ...existing code...\n        self.last_winner = None\n\n    def handle_menu(self):\n        \"\"\"Handle menu state\"\"\"\n        if self._check_quit_event():\n            return True\n\n        teclas = pygame.key.get_pressed()\n        self.pantalla.actualizar_menu(self.last_winner)\n\n        if teclas[pygame.K_ESCAPE]:\n            self._transition_to_state(\"playing\")\n            self.last_winner = None  # Clear winner when starting new game\n        elif teclas[pygame.K_BACKSPACE]:\n            return True\n        return False\n\n    def handle_victory(self):\n        \"\"\"Handle victory screen state\"\"\"\n        result = self.victory_screen.handle_input()\n        \n        if result == \"quit\":\n            return True\n        elif result == \"restart\":\n            self.last_winner = self.victory_screen.winner  # Store winner before resetting\n            self._reset_game()\n            self._transition_to_state(\"menu\")  # Change to menu instead of playing\n            return False\n            \n        self._render_victory()\n        return False\n```\n\nThese changes will:\n\n1. Add the ability to show a winner in the menu screen\n2. Store the last winner in the GameStateManager\n3. Display the winner sprite and text in the menu after a victory\n4. Clear the winner when starting a new game\n5. Transition to menu (instead of directly to playing) after clicking restart in victory screen\n\nNow when a player wins:\n1. Victory screen shows\n2. Clicking restart takes you to menu\n3. Menu shows the winner sprite and text\n4. Starting a new game clears the winner display",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Spawn positions (as percentage of screen)",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_OFFSET_X = 0.15  # 15% offset from center for both players",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_HEIGHT = 0.4     # 40% from top of screen",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Victory screen constants",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_TITLE_SIZE = 64",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_TEXT_COLOR = (255, 215, 0)  # Gold color",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_SPRITE_SCALE = 4  # Scale factor for winner sprite",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_WIDTH = 200",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_HEIGHT = 50",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_COLOR = (100, 100, 100)",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_HOVER_COLOR = (150, 150, 150)",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_TEXT_COLOR = (255, 255, 255)",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_TEXT_SIZE = 32",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_spawn_positions(screen_width, screen_height):",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate spawn positions for both players\"\"\"",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        center_x = screen_width / 2",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_y = screen_height * GameConstants.SPAWN_HEIGHT",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        offset_x = screen_width * GameConstants.SPAWN_OFFSET_X",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: (center_x - offset_x, spawn_y),  # Left player",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: (center_x + offset_x, spawn_y)   # Right player",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self, winner=None):",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay and optional winner\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if winner:",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._draw_winner(winner)",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_winner(self, winner):",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw winner sprite and text in menu\"\"\"",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw winner sprite",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        winner_sprite = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player',",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.sprite_config['row'],",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.sprite_config['col']",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if winner_sprite:",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprite_rect = winner_sprite.get_rect(",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                center=(self.screen_data.mid_x,",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       self.screen_data.mid_y))",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.display_surface.blit(winner_sprite, sprite_rect)",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw winner text",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text = font.render(f\"Player {winner.player_id} Wins!\", True, ",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         GameConstants.VICTORY_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text_rect = text.get_rect(centerx=self.screen_data.mid_x, y=100)",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(text, text_rect)",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Enhanced player collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate relative velocities",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if impact_velocity <= damage_threshold:",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate impact direction",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if abs(rel_vel_x) > abs(rel_vel_y):",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate damage",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        damage = (impact_velocity - damage_threshold) * damage_factor",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage and knockback",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_collision_effects(receiver, attacker, damage, direction):",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply collision effects to the receiving player\"\"\"",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage considering blocking",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if receiver.bloqueando and receiver.direccion_bloqueo == direction:",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            damage *= 0.3  # 70% damage reduction when blocking correctly",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Reverse some momentum back to attacker",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction in ['left', 'right']:",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_x *= -0.5",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_y *= -0.5",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Apply knockback to receiver",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            knockback_force = damage * 2",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction == 'left':",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = -knockback_force",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'right':",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = knockback_force",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'up':",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = -knockback_force",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:  # down",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = knockback_force",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        receiver.take_damage(damage)",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen = None",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.last_winner = None",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing,",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"victory\": self.handle_victory",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu(self.last_winner)",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.last_winner = None  # Clear winner when starting new game",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_victory(self):",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle victory screen state\"\"\"",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        result = self.victory_screen.handle_input()",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if result == \"quit\":",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif result == \"restart\":",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.last_winner = self.victory_screen.winner  # Store winner before resetting",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._reset_game()",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")  # Change to menu instead of playing",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_victory()",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_victory(self):",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render victory screen\"\"\"",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen.draw(self.pantalla.get_screen_data(\"display\"))",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_victory(self):",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if someone won\"\"\"",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if jugador.health <= 0:",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                winner = next(p for p in self.jugadores if p != jugador)",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.victory_screen = VictoryScreen(self.pantalla, winner)",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self._transition_to_state(\"victory\")",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                break",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _reset_game(self):",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reset game state for a new match\"\"\"",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = self.pantalla.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = self.pantalla.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugador.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_pos = spawn_positions[jugador.player_id]",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugador.reiniciar_posicion(spawn_pos[0], spawn_pos[1])",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Update player states first",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Then check collisions",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0],",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1],",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=7,  # Adjusted threshold",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_factor=0.8    # Adjusted damage factor",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_victory()  # Add this line at the end",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1192,
                  "startColumn": 1,
                  "endLineNumber": 1192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1193,
                  "startColumn": 1,
                  "endLineNumber": 1193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1194,
                  "startColumn": 1,
                  "endLineNumber": 1194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1195,
                  "startColumn": 1,
                  "endLineNumber": 1195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1196,
                  "startColumn": 1,
                  "endLineNumber": 1196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1197,
                  "startColumn": 1,
                  "endLineNumber": 1197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1198,
                  "startColumn": 1,
                  "endLineNumber": 1198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1199,
                  "startColumn": 1,
                  "endLineNumber": 1199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1200,
                  "startColumn": 1,
                  "endLineNumber": 1200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1201,
                  "startColumn": 1,
                  "endLineNumber": 1201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1202,
                  "startColumn": 1,
                  "endLineNumber": 1202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1203,
                  "startColumn": 1,
                  "endLineNumber": 1203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1204,
                  "startColumn": 1,
                  "endLineNumber": 1204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1205,
                  "startColumn": 1,
                  "endLineNumber": 1205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1206,
                  "startColumn": 1,
                  "endLineNumber": 1206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1207,
                  "startColumn": 1,
                  "endLineNumber": 1207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1208,
                  "startColumn": 1,
                  "endLineNumber": 1208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1209,
                  "startColumn": 1,
                  "endLineNumber": 1209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1210,
                  "startColumn": 1,
                  "endLineNumber": 1210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1211,
                  "startColumn": 1,
                  "endLineNumber": 1211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1212,
                  "startColumn": 1,
                  "endLineNumber": 1212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1213,
                  "startColumn": 1,
                  "endLineNumber": 1213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1214,
                  "startColumn": 1,
                  "endLineNumber": 1214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1215,
                  "startColumn": 1,
                  "endLineNumber": 1215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1216,
                  "startColumn": 1,
                  "endLineNumber": 1216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1217,
                  "startColumn": 1,
                  "endLineNumber": 1217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1218,
                  "startColumn": 1,
                  "endLineNumber": 1218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1219,
                  "startColumn": 1,
                  "endLineNumber": 1219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1220,
                  "startColumn": 1,
                  "endLineNumber": 1220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1221,
                  "startColumn": 1,
                  "endLineNumber": 1221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1222,
                  "startColumn": 1,
                  "endLineNumber": 1222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1223,
                  "startColumn": 1,
                  "endLineNumber": 1223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1224,
                  "startColumn": 1,
                  "endLineNumber": 1224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1225,
                  "startColumn": 1,
                  "endLineNumber": 1225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1226,
                  "startColumn": 1,
                  "endLineNumber": 1226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1227,
                  "startColumn": 1,
                  "endLineNumber": 1227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1228,
                  "startColumn": 1,
                  "endLineNumber": 1228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1229,
                  "startColumn": 1,
                  "endLineNumber": 1229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1230,
                  "startColumn": 1,
                  "endLineNumber": 1230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1231,
                  "startColumn": 1,
                  "endLineNumber": 1231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1232,
                  "startColumn": 1,
                  "endLineNumber": 1232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1233,
                  "startColumn": 1,
                  "endLineNumber": 1233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1234,
                  "startColumn": 1,
                  "endLineNumber": 1234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1235,
                  "startColumn": 1,
                  "endLineNumber": 1235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1236,
                  "startColumn": 1,
                  "endLineNumber": 1236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1237,
                  "startColumn": 1,
                  "endLineNumber": 1237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1238,
                  "startColumn": 1,
                  "endLineNumber": 1238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1239,
                  "startColumn": 1,
                  "endLineNumber": 1239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1240,
                  "startColumn": 1,
                  "endLineNumber": 1240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1241,
                  "startColumn": 1,
                  "endLineNumber": 1241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1242,
                  "startColumn": 1,
                  "endLineNumber": 1242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1243,
                  "startColumn": 1,
                  "endLineNumber": 1243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1244,
                  "startColumn": 1,
                  "endLineNumber": 1244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1245,
                  "startColumn": 1,
                  "endLineNumber": 1245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1246,
                  "startColumn": 1,
                  "endLineNumber": 1246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1247,
                  "startColumn": 1,
                  "endLineNumber": 1247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1248,
                  "startColumn": 1,
                  "endLineNumber": 1248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1249,
                  "startColumn": 1,
                  "endLineNumber": 1249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1250,
                  "startColumn": 1,
                  "endLineNumber": 1250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1251,
                  "startColumn": 1,
                  "endLineNumber": 1251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1252,
                  "startColumn": 1,
                  "endLineNumber": 1252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1253,
                  "startColumn": 1,
                  "endLineNumber": 1253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1254,
                  "startColumn": 1,
                  "endLineNumber": 1254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1255,
                  "startColumn": 1,
                  "endLineNumber": 1255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1256,
                  "startColumn": 1,
                  "endLineNumber": 1256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1257,
                  "startColumn": 1,
                  "endLineNumber": 1257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1258,
                  "startColumn": 1,
                  "endLineNumber": 1258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1259,
                  "startColumn": 1,
                  "endLineNumber": 1259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1260,
                  "startColumn": 1,
                  "endLineNumber": 1260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1261,
                  "startColumn": 1,
                  "endLineNumber": 1261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1262,
                  "startColumn": 1,
                  "endLineNumber": 1262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1263,
                  "startColumn": 1,
                  "endLineNumber": 1263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1264,
                  "startColumn": 1,
                  "endLineNumber": 1264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1265,
                  "startColumn": 1,
                  "endLineNumber": 1265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1266,
                  "startColumn": 1,
                  "endLineNumber": 1266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1267,
                  "startColumn": 1,
                  "endLineNumber": 1267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1268,
                  "startColumn": 1,
                  "endLineNumber": 1268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1269,
                  "startColumn": 1,
                  "endLineNumber": 1269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1270,
                  "startColumn": 1,
                  "endLineNumber": 1270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1271,
                  "startColumn": 1,
                  "endLineNumber": 1271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1272,
                  "startColumn": 1,
                  "endLineNumber": 1272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1273,
                  "startColumn": 1,
                  "endLineNumber": 1273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1274,
                  "startColumn": 1,
                  "endLineNumber": 1274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1275,
                  "startColumn": 1,
                  "endLineNumber": 1275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1276,
                  "startColumn": 1,
                  "endLineNumber": 1276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1277,
                  "startColumn": 1,
                  "endLineNumber": 1277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1278,
                  "startColumn": 1,
                  "endLineNumber": 1278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1279,
                  "startColumn": 1,
                  "endLineNumber": 1279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1280,
                  "startColumn": 1,
                  "endLineNumber": 1280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1281,
                  "startColumn": 1,
                  "endLineNumber": 1281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1282,
                  "startColumn": 1,
                  "endLineNumber": 1282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1283,
                  "startColumn": 1,
                  "endLineNumber": 1283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1284,
                  "startColumn": 1,
                  "endLineNumber": 1284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1285,
                  "startColumn": 1,
                  "endLineNumber": 1285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1286,
                  "startColumn": 1,
                  "endLineNumber": 1286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1287,
                  "startColumn": 1,
                  "endLineNumber": 1287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1288,
                  "startColumn": 1,
                  "endLineNumber": 1288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1289,
                  "startColumn": 1,
                  "endLineNumber": 1289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1290,
                  "startColumn": 1,
                  "endLineNumber": 1290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1291,
                  "startColumn": 1,
                  "endLineNumber": 1291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1292,
                  "startColumn": 1,
                  "endLineNumber": 1292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class VictoryScreen:",
                "range": {
                  "startLineNumber": 1293,
                  "startColumn": 1,
                  "endLineNumber": 1293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, winner):",
                "range": {
                  "startLineNumber": 1294,
                  "startColumn": 1,
                  "endLineNumber": 1294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 1295,
                  "startColumn": 1,
                  "endLineNumber": 1295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.winner = winner",
                "range": {
                  "startLineNumber": 1296,
                  "startColumn": 1,
                  "endLineNumber": 1296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.setup_ui()",
                "range": {
                  "startLineNumber": 1297,
                  "startColumn": 1,
                  "endLineNumber": 1297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1298,
                  "startColumn": 1,
                  "endLineNumber": 1298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def setup_ui(self):",
                "range": {
                  "startLineNumber": 1299,
                  "startColumn": 1,
                  "endLineNumber": 1299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = self.pantalla.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1300,
                  "startColumn": 1,
                  "endLineNumber": 1300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = self.pantalla.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1301,
                  "startColumn": 1,
                  "endLineNumber": 1301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1302,
                  "startColumn": 1,
                  "endLineNumber": 1302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Setup restart button",
                "range": {
                  "startLineNumber": 1303,
                  "startColumn": 1,
                  "endLineNumber": 1303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.button_rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 1304,
                  "startColumn": 1,
                  "endLineNumber": 1304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (screen_width - GameConstants.BUTTON_WIDTH) // 2,",
                "range": {
                  "startLineNumber": 1305,
                  "startColumn": 1,
                  "endLineNumber": 1305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height * 0.7,",
                "range": {
                  "startLineNumber": 1306,
                  "startColumn": 1,
                  "endLineNumber": 1306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            GameConstants.BUTTON_WIDTH,",
                "range": {
                  "startLineNumber": 1307,
                  "startColumn": 1,
                  "endLineNumber": 1307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            GameConstants.BUTTON_HEIGHT",
                "range": {
                  "startLineNumber": 1308,
                  "startColumn": 1,
                  "endLineNumber": 1308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1309,
                  "startColumn": 1,
                  "endLineNumber": 1309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1310,
                  "startColumn": 1,
                  "endLineNumber": 1310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Setup fonts",
                "range": {
                  "startLineNumber": 1311,
                  "startColumn": 1,
                  "endLineNumber": 1311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.title_font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)",
                "range": {
                  "startLineNumber": 1312,
                  "startColumn": 1,
                  "endLineNumber": 1312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.button_font = pygame.font.Font(None, GameConstants.BUTTON_TEXT_SIZE)",
                "range": {
                  "startLineNumber": 1313,
                  "startColumn": 1,
                  "endLineNumber": 1313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1314,
                  "startColumn": 1,
                  "endLineNumber": 1314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def draw(self, surface):",
                "range": {
                  "startLineNumber": 1315,
                  "startColumn": 1,
                  "endLineNumber": 1315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw background overlay",
                "range": {
                  "startLineNumber": 1316,
                  "startColumn": 1,
                  "endLineNumber": 1316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 1317,
                  "startColumn": 1,
                  "endLineNumber": 1317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.pantalla.get_screen_data(\"width\"), ",
                "range": {
                  "startLineNumber": 1318,
                  "startColumn": 1,
                  "endLineNumber": 1318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "             self.pantalla.get_screen_data(\"height\")), ",
                "range": {
                  "startLineNumber": 1319,
                  "startColumn": 1,
                  "endLineNumber": 1319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 1320,
                  "startColumn": 1,
                  "endLineNumber": 1320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1321,
                  "startColumn": 1,
                  "endLineNumber": 1321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((0, 0, 0, 180))  # Semi-transparent black",
                "range": {
                  "startLineNumber": 1322,
                  "startColumn": 1,
                  "endLineNumber": 1322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 1323,
                  "startColumn": 1,
                  "endLineNumber": 1323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1324,
                  "startColumn": 1,
                  "endLineNumber": 1324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw victory text",
                "range": {
                  "startLineNumber": 1325,
                  "startColumn": 1,
                  "endLineNumber": 1325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text = self.title_font.render(f\"Player {self.winner.player_id} Wins!\", True, ",
                "range": {
                  "startLineNumber": 1326,
                  "startColumn": 1,
                  "endLineNumber": 1326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    GameConstants.VICTORY_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 1327,
                  "startColumn": 1,
                  "endLineNumber": 1327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text_rect = text.get_rect(centerx=self.pantalla.get_screen_data(\"mid_x\"), ",
                "range": {
                  "startLineNumber": 1328,
                  "startColumn": 1,
                  "endLineNumber": 1328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                 y=100)",
                "range": {
                  "startLineNumber": 1329,
                  "startColumn": 1,
                  "endLineNumber": 1329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.blit(text, text_rect)",
                "range": {
                  "startLineNumber": 1330,
                  "startColumn": 1,
                  "endLineNumber": 1330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1331,
                  "startColumn": 1,
                  "endLineNumber": 1331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw winner sprite scaled up",
                "range": {
                  "startLineNumber": 1332,
                  "startColumn": 1,
                  "endLineNumber": 1332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 1333,
                  "startColumn": 1,
                  "endLineNumber": 1333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        winner_sprite = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 1334,
                  "startColumn": 1,
                  "endLineNumber": 1334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player',",
                "range": {
                  "startLineNumber": 1335,
                  "startColumn": 1,
                  "endLineNumber": 1335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 1336,
                  "startColumn": 1,
                  "endLineNumber": 1336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 1337,
                  "startColumn": 1,
                  "endLineNumber": 1337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.sprite_config['row'],",
                "range": {
                  "startLineNumber": 1338,
                  "startColumn": 1,
                  "endLineNumber": 1338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.sprite_config['col']",
                "range": {
                  "startLineNumber": 1339,
                  "startColumn": 1,
                  "endLineNumber": 1339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1340,
                  "startColumn": 1,
                  "endLineNumber": 1340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if winner_sprite:",
                "range": {
                  "startLineNumber": 1341,
                  "startColumn": 1,
                  "endLineNumber": 1341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprite_rect = winner_sprite.get_rect(",
                "range": {
                  "startLineNumber": 1342,
                  "startColumn": 1,
                  "endLineNumber": 1342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                center=(self.pantalla.get_screen_data(\"mid_x\"),",
                "range": {
                  "startLineNumber": 1343,
                  "startColumn": 1,
                  "endLineNumber": 1343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       self.pantalla.get_screen_data(\"mid_y\"))",
                "range": {
                  "startLineNumber": 1344,
                  "startColumn": 1,
                  "endLineNumber": 1344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 1345,
                  "startColumn": 1,
                  "endLineNumber": 1345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            surface.blit(winner_sprite, sprite_rect)",
                "range": {
                  "startLineNumber": 1346,
                  "startColumn": 1,
                  "endLineNumber": 1346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1347,
                  "startColumn": 1,
                  "endLineNumber": 1347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw restart button",
                "range": {
                  "startLineNumber": 1348,
                  "startColumn": 1,
                  "endLineNumber": 1348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        mouse_pos = pygame.mouse.get_pos()",
                "range": {
                  "startLineNumber": 1349,
                  "startColumn": 1,
                  "endLineNumber": 1349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        button_color = (GameConstants.BUTTON_HOVER_COLOR ",
                "range": {
                  "startLineNumber": 1350,
                  "startColumn": 1,
                  "endLineNumber": 1350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       if self.button_rect.collidepoint(mouse_pos) ",
                "range": {
                  "startLineNumber": 1351,
                  "startColumn": 1,
                  "endLineNumber": 1351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       else GameConstants.BUTTON_COLOR)",
                "range": {
                  "startLineNumber": 1352,
                  "startColumn": 1,
                  "endLineNumber": 1352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1353,
                  "startColumn": 1,
                  "endLineNumber": 1353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(surface, button_color, self.button_rect)",
                "range": {
                  "startLineNumber": 1354,
                  "startColumn": 1,
                  "endLineNumber": 1354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1355,
                  "startColumn": 1,
                  "endLineNumber": 1355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw button text",
                "range": {
                  "startLineNumber": 1356,
                  "startColumn": 1,
                  "endLineNumber": 1356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        button_text = self.button_font.render(\"Restart\", True, ",
                "range": {
                  "startLineNumber": 1357,
                  "startColumn": 1,
                  "endLineNumber": 1357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            GameConstants.BUTTON_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 1358,
                  "startColumn": 1,
                  "endLineNumber": 1358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text_rect = button_text.get_rect(center=self.button_rect.center)",
                "range": {
                  "startLineNumber": 1359,
                  "startColumn": 1,
                  "endLineNumber": 1359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.blit(button_text, text_rect)",
                "range": {
                  "startLineNumber": 1360,
                  "startColumn": 1,
                  "endLineNumber": 1360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1361,
                  "startColumn": 1,
                  "endLineNumber": 1361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_input(self):",
                "range": {
                  "startLineNumber": 1362,
                  "startColumn": 1,
                  "endLineNumber": 1362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle input events for the victory screen\"\"\"",
                "range": {
                  "startLineNumber": 1363,
                  "startColumn": 1,
                  "endLineNumber": 1363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for event in pygame.event.get():",
                "range": {
                  "startLineNumber": 1364,
                  "startColumn": 1,
                  "endLineNumber": 1364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if event.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 1365,
                  "startColumn": 1,
                  "endLineNumber": 1365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return \"quit\"",
                "range": {
                  "startLineNumber": 1366,
                  "startColumn": 1,
                  "endLineNumber": 1366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if event.type == pygame.MOUSEBUTTONDOWN:",
                "range": {
                  "startLineNumber": 1367,
                  "startColumn": 1,
                  "endLineNumber": 1367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if self.button_rect.collidepoint(event.pos):",
                "range": {
                  "startLineNumber": 1368,
                  "startColumn": 1,
                  "endLineNumber": 1368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    return \"restart\"",
                "range": {
                  "startLineNumber": 1369,
                  "startColumn": 1,
                  "endLineNumber": 1369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if event.type == pygame.KEYDOWN:",
                "range": {
                  "startLineNumber": 1370,
                  "startColumn": 1,
                  "endLineNumber": 1370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if event.key == pygame.K_ESCAPE:",
                "range": {
                  "startLineNumber": 1371,
                  "startColumn": 1,
                  "endLineNumber": 1371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    return \"restart\"",
                "range": {
                  "startLineNumber": 1372,
                  "startColumn": 1,
                  "endLineNumber": 1372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1373,
                  "startColumn": 1,
                  "endLineNumber": 1373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1374,
                  "startColumn": 1,
                  "endLineNumber": 1374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1375,
                  "startColumn": 1,
                  "endLineNumber": 1375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1376,
                  "startColumn": 1,
                  "endLineNumber": 1376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1377,
                  "startColumn": 1,
                  "endLineNumber": 1377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1378,
                  "startColumn": 1,
                  "endLineNumber": 1378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1379,
                  "startColumn": 1,
                  "endLineNumber": 1379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1380,
                  "startColumn": 1,
                  "endLineNumber": 1380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1381,
                  "startColumn": 1,
                  "endLineNumber": 1381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1382,
                  "startColumn": 1,
                  "endLineNumber": 1382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1383,
                  "startColumn": 1,
                  "endLineNumber": 1383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Calculate spawn positions",
                "range": {
                  "startLineNumber": 1384,
                  "startColumn": 1,
                  "endLineNumber": 1384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_width = pantalla_principal.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1385,
                  "startColumn": 1,
                  "endLineNumber": 1385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_height = pantalla_principal.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1386,
                  "startColumn": 1,
                  "endLineNumber": 1386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 1387,
                  "startColumn": 1,
                  "endLineNumber": 1387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1388,
                  "startColumn": 1,
                  "endLineNumber": 1388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Create players with calculated spawn positions",
                "range": {
                  "startLineNumber": 1389,
                  "startColumn": 1,
                  "endLineNumber": 1389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1390,
                  "startColumn": 1,
                  "endLineNumber": 1390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1391,
                  "startColumn": 1,
                  "endLineNumber": 1391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[1][0],",
                "range": {
                  "startLineNumber": 1392,
                  "startColumn": 1,
                  "endLineNumber": 1392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[1][1],",
                "range": {
                  "startLineNumber": 1393,
                  "startColumn": 1,
                  "endLineNumber": 1393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1394,
                  "startColumn": 1,
                  "endLineNumber": 1394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=1",
                "range": {
                  "startLineNumber": 1395,
                  "startColumn": 1073741825,
                  "endLineNumber": 1395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ),",
                "range": {
                  "startLineNumber": 1396,
                  "startColumn": 1073741825,
                  "endLineNumber": 1396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        Personaje(",
                "range": {
                  "startLineNumber": 1397,
                  "startColumn": 1073741825,
                  "endLineNumber": 1397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            spawn_positions[2][0],",
                "range": {
                  "startLineNumber": 1398,
                  "startColumn": 1073741825,
                  "endLineNumber": 1398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            spawn_positions[2][1],",
                "range": {
                  "startLineNumber": 1399,
                  "startColumn": 1073741825,
                  "endLineNumber": 1399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1400,
                  "startColumn": 1073741825,
                  "endLineNumber": 1400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=2",
                "range": {
                  "startLineNumber": 1401,
                  "startColumn": 1073741825,
                  "endLineNumber": 1401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1402,
                  "startColumn": 1073741825,
                  "endLineNumber": 1402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]",
                "range": {
                  "startLineNumber": 1403,
                  "startColumn": 1073741825,
                  "endLineNumber": 1403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1404,
                  "startColumn": 1073741825,
                  "endLineNumber": 1404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1405,
                  "startColumn": 1073741825,
                  "endLineNumber": 1405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1406,
                  "startColumn": 1073741825,
                  "endLineNumber": 1406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try:",
                "range": {
                  "startLineNumber": 1407,
                  "startColumn": 1073741825,
                  "endLineNumber": 1407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1408,
                  "startColumn": 1073741825,
                  "endLineNumber": 1408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pantalla_principal,",
                "range": {
                  "startLineNumber": 1409,
                  "startColumn": 1073741825,
                  "endLineNumber": 1409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            jugadores,",
                "range": {
                  "startLineNumber": 1410,
                  "startColumn": 1073741825,
                  "endLineNumber": 1410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            controlador,",
                "range": {
                  "startLineNumber": 1411,
                  "startColumn": 1073741825,
                  "endLineNumber": 1411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            hud",
                "range": {
                  "startLineNumber": 1412,
                  "startColumn": 1073741825,
                  "endLineNumber": 1412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1413,
                  "startColumn": 1073741825,
                  "endLineNumber": 1413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager.run()",
                "range": {
                  "startLineNumber": 1414,
                  "startColumn": 1073741825,
                  "endLineNumber": 1414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1415,
                  "startColumn": 1073741825,
                  "endLineNumber": 1415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1416,
                  "startColumn": 1073741825,
                  "endLineNumber": 1416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1417,
                  "startColumn": 1073741825,
                  "endLineNumber": 1417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1418,
                  "startColumn": 1073741825,
                  "endLineNumber": 1418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1419,
                  "startColumn": 1073741825,
                  "endLineNumber": 1419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1420,
                  "startColumn": 1073741825,
                  "endLineNumber": 1420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1421,
                  "startColumn": 1073741825,
                  "endLineNumber": 1421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1422,
                  "startColumn": 1073741825,
                  "endLineNumber": 1422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1423,
                  "startColumn": 1073741825,
                  "endLineNumber": 1423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1424,
                  "startColumn": 1073741825,
                  "endLineNumber": 1424,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 10135,
          "totalElapsed": 173312
        },
        "metadata": {
          "applyEditsId": "c1e6882d-c7fa-47f2-9e51-306bec232cf6",
          "modelMessageId": "89e86676-9124-4c06-a8b2-76fc7ef7268e",
          "responseId": "487d4cd1-9e24-4eab-a3b1-723e204fa545",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 71
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 72
            },
            "text": "winer titila no que da la imagen estatica sino que se prende y se apaga",
            "kind": "text"
          }
        ],
        "text": "winer titila no que da la imagen estatica sino que se prende y se apaga"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll add a blinking effect to the winner sprite in the menu. Here's how to modify the code:\n\n### [Main.py](file:///d:/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computación%20Gráfica/Ultimate%20Cube%20Battle/Main.py)\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "\nclass GameConstants:\n    # ...existing code...\n    \n    # Add blink settings\n    BLINK_SPEED = 500  # Milliseconds for one blink cycle\n    BLINK_MIN_ALPHA = 50  # Minimum transparency (0-255)\n    BLINK_MAX_ALPHA = 255  # Maximum transparency\n\nclass Pantalla:\n    def __init__(self, width, height, title=\"Screen\"):\n        # ...existing code...\n        self.blink_timer = 0\n        self.blink_alpha = GameConstants.BLINK_MAX_ALPHA\n\n    def _draw_winner(self, winner):\n        \"\"\"Draw winner sprite and text in menu with blinking effect\"\"\"\n        current_time = pygame.time.get_ticks()\n        \n        # Calculate blink alpha using sine wave\n        blink_progress = (current_time % GameConstants.BLINK_SPEED) / GameConstants.BLINK_SPEED\n        alpha_range = GameConstants.BLINK_MAX_ALPHA - GameConstants.BLINK_MIN_ALPHA\n        self.blink_alpha = GameConstants.BLINK_MIN_ALPHA + int(alpha_range * abs(math.sin(blink_progress * math.pi)))\n        \n        # Draw winner text\n        font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)\n        text = font.render(f\"Player {winner.player_id} Wins!\", True, \n                         GameConstants.VICTORY_TEXT_COLOR)\n        text_rect = text.get_rect(centerx=self.screen_data.mid_x, y=100)\n        self.display_surface.blit(text, text_rect)\n        \n        # Draw winner sprite with blinking effect\n        resource_manager = ResourceManager()\n        winner_sprite = resource_manager.get_scaled_sprite(\n            'player',\n            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            winner.sprite_config['row'],\n            winner.sprite_config['col']\n        )\n        \n        if winner_sprite:\n            # Create a copy of the sprite to modify its transparency\n            sprite_alpha = winner_sprite.copy()\n            sprite_alpha.fill((255, 255, 255, self.blink_alpha), special_flags=pygame.BLEND_RGBA_MULT)\n            ",
          "supportThemeIcons": false,
          "supportHtml": false
        }
      ],
      "isCanceled": true,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 91
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 92
            },
            "text": "I'll add a blinking effect to the winner sprite in the game. Here's how to modify the code:",
            "kind": "text"
          }
        ],
        "text": "I'll add a blinking effect to the winner sprite in the game. Here's how to modify the code:"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you add a blinking effect to the winner sprite. Here's the step-by-step solution:\n\n1. Add a blink timing constant to GameConstants\n2. Add blink state management to VictoryScreen class\n3. Modify the draw method to handle blinking\n\nHere are the necessary code changes:\n\n### [Main.py](file:///d:/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computación%20Gráfica/Ultimate%20Cube%20Battle/Main.py)\n\nFirst, add the blink settings to GameConstants:\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "class GameConstants:\n    # ...existing code...\n    # Victory screen constants\n    VICTORY_TITLE_SIZE = 64\n    VICTORY_TEXT_COLOR = (255, 215, 0)  # Gold color\n    VICTORY_SPRITE_SCALE = 4  # Scale factor for winner sprite\n    VICTORY_SPRITE_BLINK_RATE = 500  # Blink every 500ms\n    VICTORY_SPRITE_MIN_ALPHA = 128  # Minimum transparency during blink\n    # ...existing code...\n\nclass VictoryScreen:\n    def __init__(self, pantalla, winner):\n        self.pantalla = pantalla\n        self.winner = winner\n        self.setup_ui()\n        # Add blink state management\n        self.last_blink = pygame.time.get_ticks()\n        self.sprite_visible = True\n        \n    # ...existing code...\n    \n    def draw(self, surface):\n        # ...existing code before winner sprite drawing...\n        \n        # Update blink state\n        current_time = pygame.time.get_ticks()\n        if current_time - self.last_blink >= GameConstants.VICTORY_SPRITE_BLINK_RATE:\n            self.sprite_visible = not self.sprite_visible\n            self.last_blink = current_time\n        \n        # Draw winner sprite with blink effect\n        resource_manager = ResourceManager()\n        winner_sprite = resource_manager.get_scaled_sprite(\n            'player',\n            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,\n            self.winner.sprite_config['row'],\n            self.winner.sprite_config['col']\n        )\n        if winner_sprite:\n            sprite_rect = winner_sprite.get_rect(\n                center=(self.pantalla.get_screen_data(\"mid_x\"),\n                       self.pantalla.get_screen_data(\"mid_y\"))\n            )\n            \n            # Apply blinking effect\n            if not self.sprite_visible:\n                alpha_surface = pygame.Surface(winner_sprite.get_size(), pygame.SRCALPHA)\n                alpha_surface.fill((255, 255, 255, GameConstants.VICTORY_SPRITE_MIN_ALPHA))\n                winner_sprite.blit(alpha_surface, (",
          "supportThemeIcons": false,
          "supportHtml": false
        }
      ],
      "isCanceled": true,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 30
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 31
            },
            "text": "no agreges, arrglalo es un bug",
            "kind": "text"
          }
        ],
        "text": "no agreges, arrglalo es un bug"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "Revisaré el código para identificar y corregir el bug. Por favor, indícame específicamente:\n1. ¿Qué comportamiento incorrecto estás observando?\n2. ¿En qué parte del código o durante qué acción ocurre?\n3. ¿Cuál es el comportamiento esperado?\n\nCon esta información podré proporcionar una solución más precisa.",
          "supportThemeIcons": false,
          "supportHtml": false
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 5721,
          "totalElapsed": 5761
        },
        "metadata": {
          "applyEditsId": "9e9126d0-396a-4a62-849a-59de70119666",
          "modelMessageId": "212b7055-2919-444a-80cd-29139d1b516a",
          "responseId": "472d77be-ac51-4336-93c7-8c4ad98bdbcf",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 68
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 69
            },
            "text": "en juego, al ganar y titila es un bug la imagen aparece y desaparece",
            "kind": "text"
          }
        ],
        "text": "en juego, al ganar y titila es un bug la imagen aparece y desaparece"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
              "_sep": 1,
              "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
              "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
              "scheme": "file"
            },
            "id": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "Para resolver el parpadeo de la imagen en la pantalla de victoria, necesitamos modificar la gestión de eventos y el renderizado en la clase `GameStateManager`. El problema ocurre porque estamos limpiando y redibujando todo constantemente.\n\n### [Main.py](file:///d:/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computación%20Gráfica/Ultimate%20Cube%20Battle/Main.py)\n\nModificaremos el método `handle_victory` para evitar el parpadeo:\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          }
        },
        {
          "value": "def handle_victory(self):\n    \"\"\"Handle victory screen state\"\"\"\n    # Dibujamos solo una vez el fondo del juego\n    self.pantalla.actualizar_juego(\n        fondo=self.fondo,\n        jugadores=self.jugadores,\n        plataforma=self.controlador\n    )\n    \n    result = self.victory_screen.handle_input()\n    \n    if result == \"quit\":\n        return True\n    elif result == \"restart\":\n        self.last_winner = self.victory_screen.winner\n        self._reset_game()\n        self._transition_to_state(\"menu\")\n        return False\n    \n    # Dibujamos la capa de victoria encima\n    self.victory_screen.draw(self.pantalla.get_screen_data(\"display\"))\n    pygame.display.flip()\n    return False\n\n# ...existing code...\n```\n\nEste cambio hace que:\n1. El fondo del juego se dibuje una sola vez\n2. La capa de victoria se dibuje encima sin limpiar la pantalla\n3. Se actualiza la pantalla una sola vez por frame\n\nEsto debería eliminar el parpadeo en la pantalla de victoria mientras mantiene la funcionalidad existente.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "d:\\Escritorio\\Class the todito\\Trabajos U\\2024-2 progras\\Computación Gráfica\\Ultimate Cube Battle\\Main.py",
            "_sep": 1,
            "external": "file:///d%3A/Escritorio/Class%20the%20todito/Trabajos%20U/2024-2%20progras/Computaci%C3%B3n%20Gr%C3%A1fica/Ultimate%20Cube%20Battle/Main.py",
            "path": "/d:/Escritorio/Class the todito/Trabajos U/2024-2 progras/Computación Gráfica/Ultimate Cube Battle/Main.py",
            "scheme": "file"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Spawn positions (as percentage of screen)",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_OFFSET_X = 0.15  # 15% offset from center for both players",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    SPAWN_HEIGHT = 0.4     # 40% from top of screen",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Victory screen constants",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_TITLE_SIZE = 64",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_TEXT_COLOR = (255, 215, 0)  # Gold color",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    VICTORY_SPRITE_SCALE = 4  # Scale factor for winner sprite",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_WIDTH = 200",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_HEIGHT = 50",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_COLOR = (100, 100, 100)",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_HOVER_COLOR = (150, 150, 150)",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_TEXT_COLOR = (255, 255, 255)",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BUTTON_TEXT_SIZE = 32",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_spawn_positions(screen_width, screen_height):",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate spawn positions for both players\"\"\"",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        center_x = screen_width / 2",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_y = screen_height * GameConstants.SPAWN_HEIGHT",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        offset_x = screen_width * GameConstants.SPAWN_OFFSET_X",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: (center_x - offset_x, spawn_y),  # Left player",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: (center_x + offset_x, spawn_y)   # Right player",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(0)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self, winner=None):",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay and optional winner\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if winner:",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._draw_winner(winner)",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_winner(self, winner):",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw winner sprite and text in menu\"\"\"",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw winner sprite",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        winner_sprite = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player',",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.sprite_config['row'],",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            winner.sprite_config['col']",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if winner_sprite:",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprite_rect = winner_sprite.get_rect(",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                center=(self.screen_data.mid_x,",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       self.screen_data.mid_y))",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.display_surface.blit(winner_sprite, sprite_rect)",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw winner text",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text = font.render(f\"Player {winner.player_id} Wins!\", True, ",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         GameConstants.VICTORY_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text_rect = text.get_rect(centerx=self.screen_data.mid_x, y=100)",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(text, text_rect)",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold=5, damage_factor=0.5):",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Enhanced player collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate relative velocities",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_x = abs(player1.velocidad_x - player2.velocidad_x)",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        rel_vel_y = abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        impact_velocity = math.sqrt(rel_vel_x**2 + rel_vel_y**2)",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if impact_velocity <= damage_threshold:",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate impact direction",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if abs(rel_vel_x) > abs(rel_vel_y):",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'left' if player1.rect.centerx > player2.rect.centerx else 'right'",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            direction = 'up' if player1.rect.centery > player2.rect.centery else 'down'",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Calculate damage",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        damage = (impact_velocity - damage_threshold) * damage_factor",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage and knockback",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.velocidad_x**2 + player1.velocidad_y**2 > player2.velocidad_x**2 + player2.velocidad_y**2:",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player2, player1, damage, direction)",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler._apply_collision_effects(player1, player2, damage, direction)",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_collision_effects(receiver, attacker, damage, direction):",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply collision effects to the receiving player\"\"\"",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Apply damage considering blocking",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if receiver.bloqueando and receiver.direccion_bloqueo == direction:",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            damage *= 0.3  # 70% damage reduction when blocking correctly",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Reverse some momentum back to attacker",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction in ['left', 'right']:",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_x *= -0.5",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                attacker.velocidad_y *= -0.5",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Apply knockback to receiver",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            knockback_force = damage * 2",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if direction == 'left':",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = -knockback_force",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'right':",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_x = knockback_force",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif direction == 'up':",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = -knockback_force",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:  # down",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                receiver.velocidad_y = knockback_force",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        receiver.take_damage(damage)",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen = None",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.last_winner = None",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing,",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"victory\": self.handle_victory",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu(self.last_winner)",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.last_winner = None  # Clear winner when starting new game",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_victory(self):",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle victory screen state\"\"\"",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujamos solo una vez el fondo del juego",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        result = self.victory_screen.handle_input()",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if result == \"quit\":",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif result == \"restart\":",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.last_winner = self.victory_screen.winner",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._reset_game()",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujamos la capa de victoria encima",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen.draw(self.pantalla.get_screen_data(\"display\"))",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_victory(self):",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render victory screen\"\"\"",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.victory_screen.draw(self.pantalla.get_screen_data(\"display\"))",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_victory(self):",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if someone won\"\"\"",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if jugador.health <= 0:",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                winner = next(p for p in self.jugadores if p != jugador)",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.victory_screen = VictoryScreen(self.pantalla, winner)",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self._transition_to_state(\"victory\")",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                break",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _reset_game(self):",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reset game state for a new match\"\"\"",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = self.pantalla.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = self.pantalla.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugador.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_pos = spawn_positions[jugador.player_id]",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugador.reiniciar_posicion(spawn_pos[0], spawn_pos[1])",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Update player states first",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Then check collisions",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0],",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1],",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=7,  # Adjusted threshold",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_factor=0.8    # Adjusted damage factor",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_victory()  # Add this line at the end",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1192,
                  "startColumn": 1,
                  "endLineNumber": 1192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1193,
                  "startColumn": 1,
                  "endLineNumber": 1193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1194,
                  "startColumn": 1,
                  "endLineNumber": 1194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1195,
                  "startColumn": 1,
                  "endLineNumber": 1195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1196,
                  "startColumn": 1,
                  "endLineNumber": 1196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1197,
                  "startColumn": 1,
                  "endLineNumber": 1197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1198,
                  "startColumn": 1,
                  "endLineNumber": 1198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1199,
                  "startColumn": 1,
                  "endLineNumber": 1199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1200,
                  "startColumn": 1,
                  "endLineNumber": 1200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1201,
                  "startColumn": 1,
                  "endLineNumber": 1201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1202,
                  "startColumn": 1,
                  "endLineNumber": 1202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1203,
                  "startColumn": 1,
                  "endLineNumber": 1203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1204,
                  "startColumn": 1,
                  "endLineNumber": 1204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1205,
                  "startColumn": 1,
                  "endLineNumber": 1205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1206,
                  "startColumn": 1,
                  "endLineNumber": 1206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1207,
                  "startColumn": 1,
                  "endLineNumber": 1207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1208,
                  "startColumn": 1,
                  "endLineNumber": 1208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1209,
                  "startColumn": 1,
                  "endLineNumber": 1209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1210,
                  "startColumn": 1,
                  "endLineNumber": 1210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1211,
                  "startColumn": 1,
                  "endLineNumber": 1211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1212,
                  "startColumn": 1,
                  "endLineNumber": 1212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1213,
                  "startColumn": 1,
                  "endLineNumber": 1213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1214,
                  "startColumn": 1,
                  "endLineNumber": 1214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1215,
                  "startColumn": 1,
                  "endLineNumber": 1215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1216,
                  "startColumn": 1,
                  "endLineNumber": 1216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1217,
                  "startColumn": 1,
                  "endLineNumber": 1217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1218,
                  "startColumn": 1,
                  "endLineNumber": 1218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1219,
                  "startColumn": 1,
                  "endLineNumber": 1219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1220,
                  "startColumn": 1,
                  "endLineNumber": 1220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1221,
                  "startColumn": 1,
                  "endLineNumber": 1221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1222,
                  "startColumn": 1,
                  "endLineNumber": 1222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1223,
                  "startColumn": 1,
                  "endLineNumber": 1223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1224,
                  "startColumn": 1,
                  "endLineNumber": 1224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1225,
                  "startColumn": 1,
                  "endLineNumber": 1225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1226,
                  "startColumn": 1,
                  "endLineNumber": 1226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1227,
                  "startColumn": 1,
                  "endLineNumber": 1227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1228,
                  "startColumn": 1,
                  "endLineNumber": 1228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1229,
                  "startColumn": 1,
                  "endLineNumber": 1229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1230,
                  "startColumn": 1,
                  "endLineNumber": 1230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1231,
                  "startColumn": 1,
                  "endLineNumber": 1231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1232,
                  "startColumn": 1,
                  "endLineNumber": 1232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1233,
                  "startColumn": 1,
                  "endLineNumber": 1233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1234,
                  "startColumn": 1,
                  "endLineNumber": 1234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1235,
                  "startColumn": 1,
                  "endLineNumber": 1235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1236,
                  "startColumn": 1,
                  "endLineNumber": 1236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1237,
                  "startColumn": 1,
                  "endLineNumber": 1237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1238,
                  "startColumn": 1,
                  "endLineNumber": 1238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1239,
                  "startColumn": 1,
                  "endLineNumber": 1239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1240,
                  "startColumn": 1,
                  "endLineNumber": 1240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1241,
                  "startColumn": 1,
                  "endLineNumber": 1241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1242,
                  "startColumn": 1,
                  "endLineNumber": 1242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1243,
                  "startColumn": 1,
                  "endLineNumber": 1243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1244,
                  "startColumn": 1,
                  "endLineNumber": 1244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1245,
                  "startColumn": 1,
                  "endLineNumber": 1245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1246,
                  "startColumn": 1,
                  "endLineNumber": 1246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1247,
                  "startColumn": 1,
                  "endLineNumber": 1247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1248,
                  "startColumn": 1,
                  "endLineNumber": 1248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1249,
                  "startColumn": 1,
                  "endLineNumber": 1249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1250,
                  "startColumn": 1,
                  "endLineNumber": 1250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1251,
                  "startColumn": 1,
                  "endLineNumber": 1251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1252,
                  "startColumn": 1,
                  "endLineNumber": 1252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1253,
                  "startColumn": 1,
                  "endLineNumber": 1253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1254,
                  "startColumn": 1,
                  "endLineNumber": 1254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1255,
                  "startColumn": 1,
                  "endLineNumber": 1255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1256,
                  "startColumn": 1,
                  "endLineNumber": 1256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1257,
                  "startColumn": 1,
                  "endLineNumber": 1257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1258,
                  "startColumn": 1,
                  "endLineNumber": 1258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1259,
                  "startColumn": 1,
                  "endLineNumber": 1259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1260,
                  "startColumn": 1,
                  "endLineNumber": 1260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1261,
                  "startColumn": 1,
                  "endLineNumber": 1261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1262,
                  "startColumn": 1,
                  "endLineNumber": 1262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1263,
                  "startColumn": 1,
                  "endLineNumber": 1263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1264,
                  "startColumn": 1,
                  "endLineNumber": 1264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1265,
                  "startColumn": 1,
                  "endLineNumber": 1265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1266,
                  "startColumn": 1,
                  "endLineNumber": 1266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1267,
                  "startColumn": 1,
                  "endLineNumber": 1267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1268,
                  "startColumn": 1,
                  "endLineNumber": 1268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1269,
                  "startColumn": 1,
                  "endLineNumber": 1269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1270,
                  "startColumn": 1,
                  "endLineNumber": 1270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1271,
                  "startColumn": 1,
                  "endLineNumber": 1271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1272,
                  "startColumn": 1,
                  "endLineNumber": 1272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1273,
                  "startColumn": 1,
                  "endLineNumber": 1273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1274,
                  "startColumn": 1,
                  "endLineNumber": 1274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1275,
                  "startColumn": 1,
                  "endLineNumber": 1275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1276,
                  "startColumn": 1,
                  "endLineNumber": 1276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1277,
                  "startColumn": 1,
                  "endLineNumber": 1277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1278,
                  "startColumn": 1,
                  "endLineNumber": 1278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1279,
                  "startColumn": 1,
                  "endLineNumber": 1279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1280,
                  "startColumn": 1,
                  "endLineNumber": 1280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1281,
                  "startColumn": 1,
                  "endLineNumber": 1281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1282,
                  "startColumn": 1,
                  "endLineNumber": 1282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1283,
                  "startColumn": 1,
                  "endLineNumber": 1283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1284,
                  "startColumn": 1,
                  "endLineNumber": 1284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1285,
                  "startColumn": 1,
                  "endLineNumber": 1285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1286,
                  "startColumn": 1,
                  "endLineNumber": 1286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1287,
                  "startColumn": 1,
                  "endLineNumber": 1287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1288,
                  "startColumn": 1,
                  "endLineNumber": 1288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1289,
                  "startColumn": 1,
                  "endLineNumber": 1289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1290,
                  "startColumn": 1,
                  "endLineNumber": 1290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1291,
                  "startColumn": 1,
                  "endLineNumber": 1291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1292,
                  "startColumn": 1,
                  "endLineNumber": 1292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1293,
                  "startColumn": 1,
                  "endLineNumber": 1293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1294,
                  "startColumn": 1,
                  "endLineNumber": 1294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1295,
                  "startColumn": 1,
                  "endLineNumber": 1295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1296,
                  "startColumn": 1,
                  "endLineNumber": 1296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1297,
                  "startColumn": 1,
                  "endLineNumber": 1297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1298,
                  "startColumn": 1,
                  "endLineNumber": 1298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1299,
                  "startColumn": 1,
                  "endLineNumber": 1299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1300,
                  "startColumn": 1,
                  "endLineNumber": 1300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1301,
                  "startColumn": 1,
                  "endLineNumber": 1301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class VictoryScreen:",
                "range": {
                  "startLineNumber": 1302,
                  "startColumn": 1,
                  "endLineNumber": 1302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, winner):",
                "range": {
                  "startLineNumber": 1303,
                  "startColumn": 1,
                  "endLineNumber": 1303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 1304,
                  "startColumn": 1,
                  "endLineNumber": 1304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.winner = winner",
                "range": {
                  "startLineNumber": 1305,
                  "startColumn": 1,
                  "endLineNumber": 1305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.setup_ui()",
                "range": {
                  "startLineNumber": 1306,
                  "startColumn": 1,
                  "endLineNumber": 1306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1307,
                  "startColumn": 1,
                  "endLineNumber": 1307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def setup_ui(self):",
                "range": {
                  "startLineNumber": 1308,
                  "startColumn": 1,
                  "endLineNumber": 1308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = self.pantalla.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1309,
                  "startColumn": 1,
                  "endLineNumber": 1309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = self.pantalla.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1310,
                  "startColumn": 1,
                  "endLineNumber": 1310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1311,
                  "startColumn": 1,
                  "endLineNumber": 1311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Setup restart button",
                "range": {
                  "startLineNumber": 1312,
                  "startColumn": 1,
                  "endLineNumber": 1312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.button_rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 1313,
                  "startColumn": 1,
                  "endLineNumber": 1313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (screen_width - GameConstants.BUTTON_WIDTH) // 2,",
                "range": {
                  "startLineNumber": 1314,
                  "startColumn": 1,
                  "endLineNumber": 1314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height * 0.7,",
                "range": {
                  "startLineNumber": 1315,
                  "startColumn": 1,
                  "endLineNumber": 1315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            GameConstants.BUTTON_WIDTH,",
                "range": {
                  "startLineNumber": 1316,
                  "startColumn": 1,
                  "endLineNumber": 1316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            GameConstants.BUTTON_HEIGHT",
                "range": {
                  "startLineNumber": 1317,
                  "startColumn": 1,
                  "endLineNumber": 1317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1318,
                  "startColumn": 1,
                  "endLineNumber": 1318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1319,
                  "startColumn": 1,
                  "endLineNumber": 1319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Setup fonts",
                "range": {
                  "startLineNumber": 1320,
                  "startColumn": 1,
                  "endLineNumber": 1320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.title_font = pygame.font.Font(None, GameConstants.VICTORY_TITLE_SIZE)",
                "range": {
                  "startLineNumber": 1321,
                  "startColumn": 1,
                  "endLineNumber": 1321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.button_font = pygame.font.Font(None, GameConstants.BUTTON_TEXT_SIZE)",
                "range": {
                  "startLineNumber": 1322,
                  "startColumn": 1,
                  "endLineNumber": 1322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1323,
                  "startColumn": 1,
                  "endLineNumber": 1323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def draw(self, surface):",
                "range": {
                  "startLineNumber": 1324,
                  "startColumn": 1,
                  "endLineNumber": 1324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw background overlay",
                "range": {
                  "startLineNumber": 1325,
                  "startColumn": 1,
                  "endLineNumber": 1325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 1326,
                  "startColumn": 1,
                  "endLineNumber": 1326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.pantalla.get_screen_data(\"width\"), ",
                "range": {
                  "startLineNumber": 1327,
                  "startColumn": 1,
                  "endLineNumber": 1327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "             self.pantalla.get_screen_data(\"height\")), ",
                "range": {
                  "startLineNumber": 1328,
                  "startColumn": 1,
                  "endLineNumber": 1328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 1329,
                  "startColumn": 1,
                  "endLineNumber": 1329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1330,
                  "startColumn": 1,
                  "endLineNumber": 1330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((0, 0, 0, 180))  # Semi-transparent black",
                "range": {
                  "startLineNumber": 1331,
                  "startColumn": 1,
                  "endLineNumber": 1331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 1332,
                  "startColumn": 1,
                  "endLineNumber": 1332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1333,
                  "startColumn": 1,
                  "endLineNumber": 1333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw victory text",
                "range": {
                  "startLineNumber": 1334,
                  "startColumn": 1,
                  "endLineNumber": 1334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text = self.title_font.render(f\"Player {self.winner.player_id} Wins!\", True, ",
                "range": {
                  "startLineNumber": 1335,
                  "startColumn": 1,
                  "endLineNumber": 1335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    GameConstants.VICTORY_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 1336,
                  "startColumn": 1,
                  "endLineNumber": 1336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text_rect = text.get_rect(centerx=self.pantalla.get_screen_data(\"mid_x\"), ",
                "range": {
                  "startLineNumber": 1337,
                  "startColumn": 1,
                  "endLineNumber": 1337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                 y=100)",
                "range": {
                  "startLineNumber": 1338,
                  "startColumn": 1,
                  "endLineNumber": 1338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.blit(text, text_rect)",
                "range": {
                  "startLineNumber": 1339,
                  "startColumn": 1,
                  "endLineNumber": 1339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1340,
                  "startColumn": 1,
                  "endLineNumber": 1340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw winner sprite scaled up",
                "range": {
                  "startLineNumber": 1341,
                  "startColumn": 1,
                  "endLineNumber": 1341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 1342,
                  "startColumn": 1,
                  "endLineNumber": 1342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        winner_sprite = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 1343,
                  "startColumn": 1,
                  "endLineNumber": 1343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player',",
                "range": {
                  "startLineNumber": 1344,
                  "startColumn": 1,
                  "endLineNumber": 1344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 1345,
                  "startColumn": 1,
                  "endLineNumber": 1345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.tamaño * GameConstants.VICTORY_SPRITE_SCALE,",
                "range": {
                  "startLineNumber": 1346,
                  "startColumn": 1,
                  "endLineNumber": 1346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.sprite_config['row'],",
                "range": {
                  "startLineNumber": 1347,
                  "startColumn": 1,
                  "endLineNumber": 1347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.winner.sprite_config['col']",
                "range": {
                  "startLineNumber": 1348,
                  "startColumn": 1,
                  "endLineNumber": 1348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1349,
                  "startColumn": 1,
                  "endLineNumber": 1349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if winner_sprite:",
                "range": {
                  "startLineNumber": 1350,
                  "startColumn": 1,
                  "endLineNumber": 1350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprite_rect = winner_sprite.get_rect(",
                "range": {
                  "startLineNumber": 1351,
                  "startColumn": 1,
                  "endLineNumber": 1351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                center=(self.pantalla.get_screen_data(\"mid_x\"),",
                "range": {
                  "startLineNumber": 1352,
                  "startColumn": 1,
                  "endLineNumber": 1352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       self.pantalla.get_screen_data(\"mid_y\"))",
                "range": {
                  "startLineNumber": 1353,
                  "startColumn": 1,
                  "endLineNumber": 1353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 1354,
                  "startColumn": 1,
                  "endLineNumber": 1354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            surface.blit(winner_sprite, sprite_rect)",
                "range": {
                  "startLineNumber": 1355,
                  "startColumn": 1,
                  "endLineNumber": 1355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1356,
                  "startColumn": 1,
                  "endLineNumber": 1356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw restart button",
                "range": {
                  "startLineNumber": 1357,
                  "startColumn": 1,
                  "endLineNumber": 1357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        mouse_pos = pygame.mouse.get_pos()",
                "range": {
                  "startLineNumber": 1358,
                  "startColumn": 1,
                  "endLineNumber": 1358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        button_color = (GameConstants.BUTTON_HOVER_COLOR ",
                "range": {
                  "startLineNumber": 1359,
                  "startColumn": 1,
                  "endLineNumber": 1359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       if self.button_rect.collidepoint(mouse_pos) ",
                "range": {
                  "startLineNumber": 1360,
                  "startColumn": 1,
                  "endLineNumber": 1360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                       else GameConstants.BUTTON_COLOR)",
                "range": {
                  "startLineNumber": 1361,
                  "startColumn": 1,
                  "endLineNumber": 1361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1362,
                  "startColumn": 1,
                  "endLineNumber": 1362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(surface, button_color, self.button_rect)",
                "range": {
                  "startLineNumber": 1363,
                  "startColumn": 1,
                  "endLineNumber": 1363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1364,
                  "startColumn": 1,
                  "endLineNumber": 1364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Draw button text",
                "range": {
                  "startLineNumber": 1365,
                  "startColumn": 1,
                  "endLineNumber": 1365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        button_text = self.button_font.render(\"Restart\", True, ",
                "range": {
                  "startLineNumber": 1366,
                  "startColumn": 1,
                  "endLineNumber": 1366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            GameConstants.BUTTON_TEXT_COLOR)",
                "range": {
                  "startLineNumber": 1367,
                  "startColumn": 1,
                  "endLineNumber": 1367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        text_rect = button_text.get_rect(center=self.button_rect.center)",
                "range": {
                  "startLineNumber": 1368,
                  "startColumn": 1,
                  "endLineNumber": 1368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.blit(button_text, text_rect)",
                "range": {
                  "startLineNumber": 1369,
                  "startColumn": 1,
                  "endLineNumber": 1369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1370,
                  "startColumn": 1,
                  "endLineNumber": 1370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_input(self):",
                "range": {
                  "startLineNumber": 1371,
                  "startColumn": 1,
                  "endLineNumber": 1371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle input events for the victory screen\"\"\"",
                "range": {
                  "startLineNumber": 1372,
                  "startColumn": 1,
                  "endLineNumber": 1372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for event in pygame.event.get():",
                "range": {
                  "startLineNumber": 1373,
                  "startColumn": 1,
                  "endLineNumber": 1373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if event.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 1374,
                  "startColumn": 1,
                  "endLineNumber": 1374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return \"quit\"",
                "range": {
                  "startLineNumber": 1375,
                  "startColumn": 1,
                  "endLineNumber": 1375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if event.type == pygame.MOUSEBUTTONDOWN:",
                "range": {
                  "startLineNumber": 1376,
                  "startColumn": 1,
                  "endLineNumber": 1376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if self.button_rect.collidepoint(event.pos):",
                "range": {
                  "startLineNumber": 1377,
                  "startColumn": 1,
                  "endLineNumber": 1377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    return \"restart\"",
                "range": {
                  "startLineNumber": 1378,
                  "startColumn": 1,
                  "endLineNumber": 1378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if event.type == pygame.KEYDOWN:",
                "range": {
                  "startLineNumber": 1379,
                  "startColumn": 1,
                  "endLineNumber": 1379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if event.key == pygame.K_ESCAPE:",
                "range": {
                  "startLineNumber": 1380,
                  "startColumn": 1,
                  "endLineNumber": 1380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    return \"restart\"",
                "range": {
                  "startLineNumber": 1381,
                  "startColumn": 1,
                  "endLineNumber": 1381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1382,
                  "startColumn": 1,
                  "endLineNumber": 1382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1383,
                  "startColumn": 1,
                  "endLineNumber": 1383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1384,
                  "startColumn": 1,
                  "endLineNumber": 1384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1385,
                  "startColumn": 1,
                  "endLineNumber": 1385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1386,
                  "startColumn": 1,
                  "endLineNumber": 1386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1387,
                  "startColumn": 1,
                  "endLineNumber": 1387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1388,
                  "startColumn": 1,
                  "endLineNumber": 1388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1389,
                  "startColumn": 1,
                  "endLineNumber": 1389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1390,
                  "startColumn": 1,
                  "endLineNumber": 1390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1391,
                  "startColumn": 1,
                  "endLineNumber": 1391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1392,
                  "startColumn": 1,
                  "endLineNumber": 1392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Calculate spawn positions",
                "range": {
                  "startLineNumber": 1393,
                  "startColumn": 1,
                  "endLineNumber": 1393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_width = pantalla_principal.get_screen_data(\"width\")",
                "range": {
                  "startLineNumber": 1394,
                  "startColumn": 1,
                  "endLineNumber": 1394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_height = pantalla_principal.get_screen_data(\"height\")",
                "range": {
                  "startLineNumber": 1395,
                  "startColumn": 1,
                  "endLineNumber": 1395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    spawn_positions = GameConstants.calculate_spawn_positions(screen_width, screen_height)",
                "range": {
                  "startLineNumber": 1396,
                  "startColumn": 1,
                  "endLineNumber": 1396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1397,
                  "startColumn": 1,
                  "endLineNumber": 1397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Create players with calculated spawn positions",
                "range": {
                  "startLineNumber": 1398,
                  "startColumn": 1,
                  "endLineNumber": 1398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1399,
                  "startColumn": 1,
                  "endLineNumber": 1399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1400,
                  "startColumn": 1,
                  "endLineNumber": 1400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[1][0],",
                "range": {
                  "startLineNumber": 1401,
                  "startColumn": 1,
                  "endLineNumber": 1401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[1][1],",
                "range": {
                  "startLineNumber": 1402,
                  "startColumn": 1,
                  "endLineNumber": 1402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1403,
                  "startColumn": 1,
                  "endLineNumber": 1403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=1",
                "range": {
                  "startLineNumber": 1404,
                  "startColumn": 1,
                  "endLineNumber": 1404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ),",
                "range": {
                  "startLineNumber": 1405,
                  "startColumn": 1,
                  "endLineNumber": 1405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1406,
                  "startColumn": 1,
                  "endLineNumber": 1406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[2][0],",
                "range": {
                  "startLineNumber": 1407,
                  "startColumn": 1,
                  "endLineNumber": 1407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            spawn_positions[2][1],",
                "range": {
                  "startLineNumber": 1408,
                  "startColumn": 1,
                  "endLineNumber": 1408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1409,
                  "startColumn": 1,
                  "endLineNumber": 1409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=2",
                "range": {
                  "startLineNumber": 1410,
                  "startColumn": 1,
                  "endLineNumber": 1410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1411,
                  "startColumn": 1,
                  "endLineNumber": 1411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 1412,
                  "startColumn": 1,
                  "endLineNumber": 1412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1413,
                  "startColumn": 1,
                  "endLineNumber": 1413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1414,
                  "startColumn": 1,
                  "endLineNumber": 1414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1415,
                  "startColumn": 1,
                  "endLineNumber": 1415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    try:",
                "range": {
                  "startLineNumber": 1416,
                  "startColumn": 1,
                  "endLineNumber": 1416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1417,
                  "startColumn": 1,
                  "endLineNumber": 1417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla_principal,",
                "range": {
                  "startLineNumber": 1418,
                  "startColumn": 1,
                  "endLineNumber": 1418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores,",
                "range": {
                  "startLineNumber": 1419,
                  "startColumn": 1,
                  "endLineNumber": 1419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador,",
                "range": {
                  "startLineNumber": 1420,
                  "startColumn": 1,
                  "endLineNumber": 1420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud",
                "range": {
                  "startLineNumber": 1421,
                  "startColumn": 1,
                  "endLineNumber": 1421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1422,
                  "startColumn": 1,
                  "endLineNumber": 1422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        game_manager.run()",
                "range": {
                  "startLineNumber": 1423,
                  "startColumn": 1,
                  "endLineNumber": 1423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1424,
                  "startColumn": 1,
                  "endLineNumber": 1424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1425,
                  "startColumn": 1073741825,
                  "endLineNumber": 1425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1426,
                  "startColumn": 1073741825,
                  "endLineNumber": 1426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1427,
                  "startColumn": 1073741825,
                  "endLineNumber": 1427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1428,
                  "startColumn": 1073741825,
                  "endLineNumber": 1428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1429,
                  "startColumn": 1073741825,
                  "endLineNumber": 1429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1430,
                  "startColumn": 1073741825,
                  "endLineNumber": 1430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1431,
                  "startColumn": 1073741825,
                  "endLineNumber": 1431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1432,
                  "startColumn": 1073741825,
                  "endLineNumber": 1432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1433,
                  "startColumn": 1073741825,
                  "endLineNumber": 1433,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 6955,
          "totalElapsed": 51173
        },
        "metadata": {
          "applyEditsId": "bd74c04a-dc4e-4156-8d32-7da7d35fadc8",
          "modelMessageId": "6e98cd54-4a67-4535-95b1-c30eb6cf0287",
          "responseId": "d1e13a14-2d98-4690-8d42-9a84b66e5b0d",
          "sessionId": "3fbd0529-330d-4c0b-a014-6ca286fad0ff",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    }
  ]
}