{
  "requesterUsername": "OnlyToCode",
  "requesterAvatarIconUri": {
    "$mid": 1,
    "path": "/u/188051009",
    "scheme": "https",
    "authority": "avatars.githubusercontent.com",
    "query": "v=4"
  },
  "responderUsername": "GitHub Copilot",
  "responderAvatarIconUri": {
    "id": "copilot"
  },
  "initialLocation": "editing-session",
  "requests": [
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 199
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 200
            },
            "text": "agrega las teclas \"q\" sera para bloquear y \"e\" para cargar energia en una direccion, para el jugador que usa \"WASD\", para el jugador que usa flesha usa ctrol derecho y 0 del numpath en el mismo orden",
            "kind": "text"
          }
        ],
        "text": "agrega las teclas \"q\" sera para bloquear y \"e\" para cargar energia en una direccion, para el jugador que usa \"WASD\", para el jugador que usa flesha usa ctrol derecho y 0 del numpath en el mismo orden"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "\\workspaces\\Ultimate-Cube-Battle\\Main.py",
              "_sep": 1,
              "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
              "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
              "scheme": "vscode-remote",
              "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
            },
            "id": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "### Main.py\n\nAgregar nuevas teclas de control para bloquear y cargar energía para ambos jugadores.\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
            "scheme": "vscode-remote",
            "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
          }
        },
        {
          "value": "# ...existing code...\n\nclass PlayerControls:\n    \"\"\"Configuration class for player controls\"\"\"\n    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, \n                 left=pygame.K_LEFT, right=pygame.K_RIGHT, \n                 block=pygame.K_RCTRL, charge=pygame.K_KP0):\n        self.controls = {\n            'up': up,\n            'down': down,\n            'left': left,\n            'right': right,\n            'block': block,\n            'charge': charge\n        }\n    \n    def get_key(self, action):\n        return self.controls.get(action)\n    \n    def set_key(self, action, key):\n        if action in self.controls:\n            self.controls[action] = key\n\n    @classmethod\n    def get_default_controls(cls, player_number=1):\n        if player_number == 1:\n            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)\n        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)\n\n# ...existing code...\n```",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
            "scheme": "vscode-remote",
            "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear jugadores",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    mid_x = pantalla_principal.get_screen_data(\"mid_x\")",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            mid_x - 50,  # Más a la izquierda",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            300,",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=1",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ),",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            mid_x + 50,  # Más a la derecha",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            300,",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=2",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    try:",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla_principal,",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores,",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador,",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        game_manager.run()",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    finally:",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.quit()",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "if __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1073741825,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1073741825,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1073741825,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 2600,
          "totalElapsed": 26119
        },
        "metadata": {
          "applyEditsId": "fa2a023d-e813-4f5f-9745-cdf5157c7c21",
          "modelMessageId": "a7c68cc0-e220-460d-ac46-d4c5b25e556b",
          "responseId": "79e67671-ba04-4854-9483-c9df02dc6592",
          "sessionId": "8655bd10-6186-4d1f-8bb5-ce4a47f66b16",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Editar archivos en el área de trabajo",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 218
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 219
            },
            "text": "haz las coliciones, jugador contra otro jugador, el que tenga menor velocidad resivira daño igual a la diferenica de velocidades, y pon un umbral de daño minimo para poder hacer daño, y otra opcion para reducir el daño",
            "kind": "text"
          }
        ],
        "text": "haz las coliciones, jugador contra otro jugador, el que tenga menor velocidad resivira daño igual a la diferenica de velocidades, y pon un umbral de daño minimo para poder hacer daño, y otra opcion para reducir el daño"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "\\workspaces\\Ultimate-Cube-Battle\\Main.py",
              "_sep": 1,
              "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
              "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
              "scheme": "vscode-remote",
              "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
            },
            "id": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "### Main.py\n\nAgregar detección de colisiones entre jugadores y aplicar daño basado en la diferencia de velocidades.\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
            "scheme": "vscode-remote",
            "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
          }
        },
        {
          "value": "# ...existing code...\n\nclass CollisionHandler:\n    \"\"\"Class to handle collision detection and response\"\"\"\n    @staticmethod\n    def check_collisions(character_rects, platforms):\n        state = CollisionState()\n        \n        for platform in platforms:\n            if character_rects['main'].colliderect(platform):\n                state.body = True\n            if character_rects['top'].colliderect(platform):\n                state.top = True\n            if character_rects['bottom'].colliderect(platform):\n                state.bottom = True\n                state.platform = platform\n                \n        return state\n\n    @staticmethod\n    def check_player_collisions(player1, player2, damage_threshold, damage_reduction_factor):\n        \"\"\"Check for collisions between players and apply damage\"\"\"\n        if player1.get_rect().colliderect(player2.get_rect()):\n            velocity_diff = abs(player1.velocidad_x - player2.velocidad_x) + abs(player1.velocidad_y - player2.velocidad_y)\n            if velocity_diff > damage_threshold:\n                damage = (velocity_diff - damage_threshold) * damage_reduction_factor\n                if player1.velocidad_x + player1.velocidad_y < player2.velocidad_x + player2.velocidad_y:\n                    player1.take_damage(damage)\n                else:\n                    player2.take_damage(damage)\n\n    @staticmethod\n    def update_character_state(character, collision_state, keys):\n        \"\"\"Update character state based on collisions\"\"\"\n        if collision_state.body:\n            # Usar los controles específicos del jugador para verificar la tecla abajo\n            down_key = character.controls.get_key('down')\n            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and \n                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key\n                character.estado_gravedad = GameConstants.STATE_DIGGING\n            else:\n                character.estado_gravedad = GameConstants.STATE_IDLE\n            \n        if collision_state.top:\n            character.saltando(True)\n        \n        if collision_state.bottom:\n            character.saltando(True)\n            character.cavando(True)\n            character.ensima_Colision = collision_state.platform\n        else:\n            character.estado_gravedad = GameConstants.STATE_FALLING\n            character.cavando(False)\n\n# ...existing code...\n\nclass GameStateManager:\n    \"\"\"Manages game states and transitions\"\"\"\n    def __init__(self, pantalla, jugadores, controlador, hud):\n        self.pantalla = pantalla\n        self._setup_game_objects(jugadores, controlador, hud)\n        self._setup_game_state()\n\n    def _setup_game_objects(self, jugadores, controlador, hud):\n        \"\"\"Initialize game objects\"\"\"\n        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]\n        self.controlador = controlador\n        self.hud = hud\n        self.fondo = Fondo()\n        self.resource_manager = ResourceManager()\n        self.resource_manager.load_resources()\n\n    def _setup_game_state(self):\n        \"\"\"Initialize game state variables\"\"\"\n        self.clock = pygame.time.Clock()\n        self.current_state = \"menu\"\n        self.running = True\n        self.controlador = crear_plataformas(self.controlador, self.pantalla)\n\n    def run(self):\n        \"\"\"Main game loop\"\"\"\n        while self.running:\n            self.running = not self._handle_current_state()\n        return True\n\n    def _handle_current_state(self):\n        \"\"\"Handle current game state\"\"\"\n        state_handlers = {\n            \"menu\": self.handle_menu,\n            \"playing\": self.handle_playing\n        }\n        return state_handlers.get(self.current_state, lambda: False)()\n\n    def handle_menu(self):\n        \"\"\"Handle menu state\"\"\"\n        if self._check_quit_event():\n            return True\n\n        teclas = pygame.key.get_pressed()\n        self.pantalla.actualizar_menu()\n\n        if teclas[pygame.K_ESCAPE]:\n            self._transition_to_state(\"playing\")\n        elif teclas[pygame.K_BACKSPACE]:\n            return True\n        return False\n\n    def handle_playing(self):\n        \"\"\"Handle playing state\"\"\"\n        if self._check_quit_event():\n            return True\n\n        delta_time = self._update_time()\n        teclas = pygame.key.get_pressed()\n\n        if self._handle_escape_key(teclas):\n            return False\n\n        self._update_game_state(teclas, delta_time)\n        self._render_game()\n        return False\n\n    def _check_quit_event(self):\n        \"\"\"Check for quit events\"\"\"\n        for evento in pygame.event.get():\n            if evento.type == pygame.QUIT:\n                return True\n        return False\n        \n    def _transition_to_state(self, new_state):\n        \"\"\"Handle state transition\"\"\"\n        pygame.time.wait(200)\n        self.current_state = new_state\n\n    def _handle_escape_key(self, teclas):\n        \"\"\"Handle escape key press\"\"\"\n        if teclas[pygame.K_ESCAPE]:\n            self._transition_to_state(\"menu\")\n            return True\n        return False\n\n    def _update_time(self):\n        \"\"\"Update game time\"\"\"\n        return self.clock.tick(GameConstants.FPS) / 1000.0\n\n    def _update_game_state(self, teclas, delta_time):\n        \"\"\"Update game state for all players\"\"\"\n        for jugador in self.jugadores:\n            self._update_player(jugador, teclas, delta_time)\n        \n        # Check for player collisions and apply damage\n        if len(self.jugadores) > 1:\n            CollisionHandler.check_player_collisions(\n                self.jugadores[0], \n                self.jugadores[1], \n                damage_threshold=5, \n                damage_reduction_factor=0.5\n            )\n\n    def _update_player(self, jugador, teclas, delta_time):\n        \"\"\"Update individual player state\"\"\"\n        jugador.calcular_colision(self.controlador, teclas)\n        jugador.mover(teclas, delta_time, self.pantalla)\n\n    def _render_game(self):\n        \"\"\"Render game state\"\"\"\n        self.pantalla.actualizar_juego(\n            fondo=self.fondo,\n            jugadores=self.jugadores,\n            plataforma=self.controlador,\n            hud=lambda p: self.hud.dibujar(p, self.jugadores)\n        )\n\n# ...existing code...\n```",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
            "scheme": "vscode-remote",
            "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold, damage_reduction_factor):",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for collisions between players and apply damage\"\"\"",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            velocity_diff = abs(player1.velocidad_x - player2.velocidad_x) + abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if velocity_diff > damage_threshold:",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage = (velocity_diff - damage_threshold) * damage_reduction_factor",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if player1.velocidad_x + player1.velocidad_y < player2.velocidad_x + player2.velocidad_y:",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    player1.take_damage(damage)",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                else:",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    player2.take_damage(damage)",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Check for player collisions and apply damage",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0], ",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1], ",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=5, ",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_reduction_factor=0.5",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear jugadores",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    mid_x = pantalla_principal.get_screen_data(\"mid_x\")",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            mid_x - 50,  # Más a la izquierda",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            300,",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=1",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ),",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            mid_x + 50,  # Más a la derecha",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            300,",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=2",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1073741825,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1073741825,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1073741825,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try:",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1073741825,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1073741825,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pantalla_principal,",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1073741825,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            jugadores,",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1073741825,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            controlador,",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1073741825,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            hud",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1073741825,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1073741825,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager.run()",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1073741825,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1073741825,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1073741825,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1073741825,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1073741825,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1073741825,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1073741825,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1073741825,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1073741825,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1073741825,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1073741825,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 3768,
          "totalElapsed": 76903
        },
        "metadata": {
          "applyEditsId": "75ddbfa8-acea-48b8-8fb0-8d4726187ede",
          "modelMessageId": "354638d9-832f-4ad2-9090-0c12f35cb845",
          "responseId": "01b18b5d-b34d-41d5-b5ad-77b042e8d1f1",
          "sessionId": "8655bd10-6186-4d1f-8bb5-ce4a47f66b16",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Editar archivos en el área de trabajo",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    },
    {
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 137
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 138
            },
            "text": "implemeta bloquear, solo bloquea una direcion precionado la tecla de bloquear, la siquiente tecla de movimiento bloqueara un 50% del daño",
            "kind": "text"
          }
        ],
        "text": "implemeta bloquear, solo bloquea una direcion precionado la tecla de bloquear, la siquiente tecla de movimiento bloqueara un 50% del daño"
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "\\workspaces\\Ultimate-Cube-Battle\\Main.py",
              "_sep": 1,
              "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
              "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
              "scheme": "vscode-remote",
              "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
            },
            "id": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "name": "Main.py",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "### Main.py\n\nImplementar la funcionalidad de bloqueo para reducir el daño en un 50% en la dirección del movimiento.\n\n```python\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
            "scheme": "vscode-remote",
            "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
          }
        },
        {
          "value": "# ...existing code...\n\nclass Personaje:\n    \"\"\"Player character with configurable controls and physics\"\"\"\n    def __init__(self, x, y, tamaño, controls=None, player_id=1):\n        self._init_physics(x, y, tamaño)\n        self._init_state(player_id)\n        self._init_controls(controls, player_id)\n        self._init_stats()\n\n    def _init_physics(self, x, y, tamaño):\n        \"\"\"Initialize physics-related attributes\"\"\"\n        self.rect = pygame.Rect(x, y, tamaño, tamaño)\n        self.tamaño = tamaño\n        self._create_collision_rects(x, y)\n        self._setup_movement_params()\n        \n    def _create_collision_rects(self, x, y):\n        \"\"\"Create collision detection rectangles\"\"\"\n        h = self.tamaño / 2\n        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)\n        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)\n        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)\n        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)\n\n    def _setup_movement_params(self):\n        \"\"\"Setup movement and physics parameters\"\"\"\n        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR\n        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR\n        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR\n        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR\n        self.velocidad_x = 0\n        self.velocidad_y = 0\n\n    def _init_state(self, player_id):\n        \"\"\"Initialize state variables\"\"\"\n        self.player_id = player_id\n        # Configurar sprite según player_id\n        self.sprite_config = {\n            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)\n            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)\n        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2\n        \n        self.salto = False\n        self.cavar = False\n        self.ensima_Colision = None\n        self.estado_gravedad = GameConstants.STATE_FALLING\n        self.bloqueando = False\n        self.direccion_bloqueo = None\n\n    def _init_controls(self, controls, player_id):\n        \"\"\"Initialize player controls\"\"\"\n        self.controls = controls or PlayerControls.get_default_controls(player_id)  \n        \n    def _init_stats(self):\n        \"\"\"Initialize player stats\"\"\"\n        self.health = GameConstants.PLAYER_MAX_HEALTH\n\n    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):\n        \"\"\"Update velocities based on input\"\"\"\n        self._handle_horizontal_movement(teclas, velocidad_escalada_x)\n        self._handle_vertical_movement(teclas, velocidad_escalada_y)\n\n    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):\n        \"\"\"Handle left/right movement\"\"\"\n        if (teclas[self.controls.get_key('left')] and \n            self.velocidad_maxima * -1 <= velocidad_escalada_x):\n            self.velocidad_x -= self.aceleracion\n            \n        if (teclas[self.controls.get_key('right')] and \n            self.velocidad_maxima >= velocidad_escalada_x):\n            self.velocidad_x += self.aceleracion\n\n    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):\n        \"\"\"Handle jumping and digging\"\"\"\n        resource_manager = ResourceManager()\n        \n        # Jumping\n        if self._can_jump(teclas, velocidad_escalada_y):\n            self._perform_jump(resource_manager)\n            \n        # Digging\n        if self._can_dig(teclas, velocidad_escalada_y):\n            self._perform_dig(resource_manager)\n\n    def _can_jump(self, teclas, velocidad_escalada_y):\n        return (teclas[self.controls.get_key('up')] and \n                self.velocidad_maxima * -1 <= velocidad_escalada_y and \n                self.salto)\n\n    def _can_dig(self, teclas, velocidad_escalada_y):\n        return (teclas[self.controls.get_key('down')] and \n                self.velocidad_maxima >= velocidad_escalada_y and \n                self.cavar)\n\n    def _perform_jump(self, resource_manager):\n        resource_manager.play_sound('jump')\n        self.salto = False\n        self.estado_gravedad = GameConstants.STATE_FALLING\n        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE\n\n    def _perform_dig(self, resource_manager):\n        resource_manager.play_sound('dig')\n        self.cavar = False\n        self.estado_gravedad = GameConstants.STATE_DIGGING\n        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE\n\n    def frenar(self, teclas):\n        \"\"\"Apply braking forces\"\"\"\n        self._brake_horizontal(teclas)\n        self._brake_vertical(teclas)\n\n    def _brake_horizontal(self, teclas):\n        \"\"\"Apply horizontal braking\"\"\"\n        left_key = self.controls.get_key('left')\n        right_key = self.controls.get_key('right')\n        \n        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:\n            self._apply_horizontal_brake()\n        else:\n            self._apply_horizontal_resistance()\n\n    def _brake_vertical(self, teclas):\n        \"\"\"Apply vertical braking\"\"\"\n        up_key = self.controls.get_key('up')\n        down_key = self.controls.get_key('down')\n        \n        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:\n            self._apply_vertical_brake()\n        else:\n            self._apply_vertical_resistance()\n\n    def _apply_horizontal_brake(self):\n        \"\"\"Apply horizontal brake force\"\"\"\n        if self.velocidad_x > 0:\n            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno\n        elif self.velocidad_x < 0:\n            self.velocidad_x += self.freno / 10 if not self.salto else self.freno\n\n    def _apply_horizontal_resistance(self):\n        \"\"\"Apply horizontal resistance\"\"\"\n        if self.velocidad_x > 0:\n            self.velocidad_x -= int(self.freno / 10)\n        elif self.velocidad_x < 0:\n            self.velocidad_x += int(self.freno / 10)\n\n    def _apply_vertical_brake(self):\n        \"\"\"Apply vertical brake force\"\"\"\n        if self.velocidad_y > 0:\n            self.velocidad_y -= int(self.freno / 1.5)\n        elif self.velocidad_y < 0:\n            self.velocidad_y += int(self.freno)\n\n    def _apply_vertical_resistance(self):\n        \"\"\"Apply vertical resistance\"\"\"\n        if self.velocidad_y > 0:\n            self.velocidad_y -= int(self.freno / 4)\n        elif self.velocidad_y < 0:\n            self.velocidad_y += int(self.freno / 4)\n\n    def get_rect(self):\n        return self.rect\n\n    def saltando(self, nuevo_estado):\n        self.salto = nuevo_estado\n    \n    def cavando(self, nuevo_estado):\n        self.cavar = nuevo_estado\n\n    def bloquear(self, teclas):\n        \"\"\"Handle blocking\"\"\"\n        block_key = self.controls.get_key('block')\n        if teclas[block_key]:\n            self.bloqueando = True\n            if teclas[self.controls.get_key('left')]:\n                self.direccion_bloqueo = 'left'\n            elif teclas[self.controls.get_key('right')]:\n                self.direccion_bloqueo = 'right'\n            elif teclas[self.controls.get_key('up')]:\n                self.direccion_bloqueo = 'up'\n            elif teclas[self.controls.get_key('down')]:\n                self.direccion_bloqueo = 'down'\n        else:\n            self.bloqueando = False\n            self.direccion_bloqueo = None\n\n    def take_damage(self, amount, direction=None):\n        if self.bloqueando and direction == self.direccion_bloqueo:\n            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction\n        self.health = max(0, self.health - amount)\n\n    def get_collision_rects(self):\n        \"\"\"Get all collision rectangles\"\"\"\n        return {\n            'main': self.rect,\n            'top': self.arriba_rect,\n            'bottom': self.abajo_rect\n        }\n\n    def calcular_colision(self, controlador, teclas):\n        collision_state = CollisionHandler.check_collisions(\n            self.get_collision_rects(), \n            controlador.get_rects()\n        )\n        CollisionHandler.update_character_state(self, collision_state, teclas)\n                    \n    def actualizar_posicion_rects(self):\n        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"\n        self.arriba_rect.x = self.rect.x\n        self.arriba_rect.y = self.rect.y - self.tamaño / 2\n        self.abajo_rect.x = self.rect.x\n        self.abajo_rect.y = self.rect.y + self.tamaño\n        self.derecha_rect.x = self.rect.x + self.tamaño\n        self.derecha_rect.y = self.rect.y\n        self.izquierda_rect.x = self.rect.x - self.tamaño/2\n        self.izquierda_rect.y = self.rect.y\n\n    def reiniciar_posicion(self, x, y):\n        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"\n        self.velocidad_x = 0\n        self.velocidad_y = 0\n        self.rect.x = x\n        self.rect.y = y\n        self.actualizar_posicion_rects()\n\n    def accion_gravedad(self):\n        if self.estado_gravedad == GameConstants.STATE_FALLING:\n            self.velocidad_y += self.gravedad\n        elif self.estado_gravedad == GameConstants.STATE_DIGGING:\n            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)\n            if -0.01 < self.velocidad_y < 0.01:\n                self.rect.y = self.ensima_Colision.y - self.tamaño\n                self.actualizar_posicion_rects()\n        elif self.estado_gravedad == GameConstants.STATE_IDLE:\n            self.velocidad_y = 0\n            self.rect.y = self.ensima_Colision.y - self.tamaño\n            self.actualizar_posicion_rects()\n\n    def mover(self, teclas, delta_time, pantalla):\n        self._check_respawn(pantalla)\n        self._update_physics(teclas)\n        \n        velocidad_escalada = self._scale_velocities(delta_time)\n        self.actualizar_velocidades(teclas, *velocidad_escalada)\n        self._update_position(velocidad_escalada)\n\n    def _check_respawn(self, pantalla):\n        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"\n        datos_pantalla = pantalla.get_screen_data(\n            \"tiles_y\", \"tiles_x\", \"border_x\", \n            \"border_y\", \"tile_size\"\n        )\n        inicio_X = datos_pantalla[2] // 2 \n        inicio_Y = datos_pantalla[3] // 2\n        tamaño_X = datos_pantalla[4] * datos_pantalla[1]\n        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]\n        \n        if self.rect.y > tamaño_Y + self.tamaño:\n            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)\n            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)\n\n    def _update_physics(self, teclas):\n        \"\"\"Update physics state\"\"\"\n        self.accion_gravedad()\n        self.frenar(teclas)\n        self.bloquear(teclas)\n\n    def _update_position(self, velocidades):\n        \"\"\"Update position based on scaled velocities\"\"\"\n        self.rect.x += velocidades[0]\n        self.rect.y += velocidades[1]\n        self.actualizar_posicion_rects()\n\n    def _scale_velocities(self, delta_time):\n        \"\"\"Scale velocities based on delta time\"\"\"\n        scale_factor = delta_time * 10\n        return (\n            int(self.velocidad_x * scale_factor) / 10,\n            int(self.velocidad_y * scale_factor) / 10\n        )\n\n# ...existing code...\n\nclass CollisionHandler:\n    \"\"\"Class to handle collision detection and response\"\"\"\n    @staticmethod\n    def check_collisions(character_rects, platforms):\n        state = CollisionState()\n        \n        for platform in platforms:\n            if character_rects['main'].colliderect(platform):\n                state.body = True\n            if character_rects['top'].colliderect(platform):\n                state.top = True\n            if character_rects['bottom'].colliderect(platform):\n                state.bottom = True\n                state.platform = platform\n                \n        return state\n\n    @staticmethod\n    def check_player_collisions(player1, player2, damage_threshold, damage_reduction_factor):\n        \"\"\"Check for collisions between players and apply damage\"\"\"\n        if player1.get_rect().colliderect(player2.get_rect()):\n            velocity_diff = abs(player1.velocidad_x - player2.velocidad_x) + abs(player1.velocidad_y - player2.velocidad_y)\n            if velocity_diff > damage_threshold:\n                damage = (velocity_diff - damage_threshold) * damage_reduction_factor\n                if player1.velocidad_x + player1.velocidad_y < player2.velocidad_x + player2.velocidad_y:\n                    player1.take_damage(damage, direction=player2.direccion_bloqueo)\n                else:\n                    player2.take_damage(damage, direction=player1.direccion_bloqueo)\n\n    @staticmethod\n    def update_character_state(character, collision_state, keys):\n        \"\"\"Update character state based on collisions\"\"\"\n        if collision_state.body:\n            # Usar los controles específicos del jugador para verificar la tecla abajo\n            down_key = character.controls.get_key('down')\n            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and \n                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key\n                character.estado_gravedad = GameConstants.STATE_DIGGING\n            else:\n                character.estado_gravedad = GameConstants.STATE_IDLE\n            \n        if collision_state.top:\n            character.saltando(True)\n        \n        if collision_state.bottom:\n            character.saltando(True)\n            character.cavando(True)\n            character.ensima_Colision = collision_state.platform\n        else:\n            character.estado_gravedad = GameConstants.STATE_FALLING\n            character.cavando(False)\n\n# ...existing code...\n```",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "vscode-remote://codespaces%2Bopulent-winner-4jwp64p7r6gp2j7qv/workspaces/Ultimate-Cube-Battle/Main.py",
            "path": "/workspaces/Ultimate-Cube-Battle/Main.py",
            "scheme": "vscode-remote",
            "authority": "codespaces+opulent-winner-4jwp64p7r6gp2j7qv"
          },
          "edits": [
            [
              {
                "text": "import pygame",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "import math",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "from screeninfo import get_monitors",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameConstants:",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Estados",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_FALLING = \"Cayendo\"",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_DIGGING = \"Cavando\"",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    STATE_IDLE = \"Quieto\"",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Colores",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    COLORS = {",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'RED': (255, 0, 0),",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLACK': (0, 0, 0),",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'WHITE': (255, 255, 255),",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'BLUE': (0, 0, 255),",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        'GREEN': (0, 255, 0)",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Physics",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    GRAVITY_FACTOR = 5",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ACCELERATION_FACTOR = 5",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    BRAKE_FACTOR = 13",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MAX_SPEED_FACTOR = 15",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    JUMP_FORCE = 20",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Display",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    FPS = 60",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_ALPHA = 20",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    MENU_OVERLAY_COLOR = (200, 200, 200)",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    TILE_DIVISOR = 30",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # UI Constants",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN = 20  # Margen desde los bordes",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_WIDTH = 200  # Ancho de la barra de vida",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_HEALTH_HEIGHT = 30  # Alto de la barra de vida",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    UI_MARGIN_BOTTOM = 50  # Nueva constante para margen inferior",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_MAX_HEALTH = 300",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    PLAYER_RESPAWN_DAMAGE = 100  # Renombrado de PLAYER_DAMAGE_FALL",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class AudioConfig:",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for audio settings\"\"\"",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.master_volume = 1.0  # 0.0 to 1.0",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sfx_volume = 0.7     # Volumen efectos de sonido",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.music_volume = 0.5   # Volumen música",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.enabled = True       # Audio habilitado/deshabilitado",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configuración individual de sonidos",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_configs = {",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'jump': {",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Jump.wav',",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.5,    # Volumen relativo al sfx_volume",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 300,     # Delay en milisegundos",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 0      # Canal de audio",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'dig': {",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Audio/SFX_Dig.wav',",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'volume': 0.3,",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'delay': 1000,",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'channel': 1",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Valores por defecto",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_delay = 200",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_volume = 0.5",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.default_channel = 0",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ScreenData:",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Auxiliary class to handle screen data and calculations\"\"\"",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_width = 0",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.total_height = 0",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_y = 0",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.mid_x = 0",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = 0",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = 0",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = 0",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = 0",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = 0",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = None",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_tile_size(self):",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate tile size and related measurements\"\"\"",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tile_size = self.total_width // GameConstants.TILE_DIVISOR",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_x = self.total_width // self.tile_size",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tiles_y = self.total_height // self.tile_size",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_x = self.total_width - (self.tiles_x * self.tile_size)",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.border_y = self.total_height - (self.tiles_y * self.tile_size)",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calculate_position(self, x_tiles, y_tiles):",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Calculate pixel position from tile coordinates\"\"\"",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * x_tiles) + self.border_x // 2,",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            math.ceil(self.tile_size * y_tiles) + self.border_y // 2",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_data(self, *args):",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data by parameter names\"\"\"",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        data = {",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"width\": self.total_width,",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"height\": self.total_height,",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_x\": self.mid_x,",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"mid_y\": self.mid_y,",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\": self.tile_size,",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\": self.border_x,",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\": self.border_y,",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\": self.tiles_x,",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\": self.tiles_y,",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\": self.display_surface",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [data[arg] for arg in args if arg in data] if len(args) > 1 else data[args[0]]",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar cada pantalla",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Pantalla:",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, width, height, title=\"Screen\"):",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data = ScreenData()",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.width = width",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.height = height",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.set_caption(title)",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface = self._select_screen(1)",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._calculate_dimensions()",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _calculate_dimensions(self):",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.calculate_tile_size()",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _select_screen(self, screen_index):",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        monitors = get_monitors()",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (screen_index < 0 or screen_index >= len(monitors)):",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_index = 0",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_width = monitors[screen_index].width",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.total_height = monitors[screen_index].height",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_y = self.screen_data.total_height // 2",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.mid_x = self.screen_data.total_width // 2",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.screen_data.display_surface = pygame.display.set_mode(",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height),",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.FULLSCREEN,",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display=screen_index",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.display_surface",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_screen_data(self, *args):",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get screen data using method chaining\"\"\"",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(args) == 1:",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return self.screen_data.get_data(args[0])",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.screen_data.get_data(*args)",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_juego(self, **kwargs):",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game display with all game objects\"\"\"",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._clear_screen()",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_all_objects(kwargs)",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _clear_screen(self):",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Clear screen with background color\"\"\"",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.fill(GameConstants.COLORS['BLACK'])",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_all_objects(self, game_objects):",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw all game objects in the correct order\"\"\"",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar fondo primero",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'fondo' in game_objects:",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['fondo'].dibujar(self)",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que no están cavando",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar plataformas",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'plataforma' in game_objects:",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['plataforma'].dibujar(self)",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar jugadores que están cavando",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'jugadores' in game_objects:",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for jugador in game_objects['jugadores']:",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if jugador.estado_gravedad != GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    jugador.dibujar(self)",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar HUD al final",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if 'hud' in game_objects:",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            game_objects['hud'](self)",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_display(self):",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update the display\"\"\"",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.flip()",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_menu(self):",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update menu display with overlay\"\"\"",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #self._clear_screen()#",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_menu_overlay()",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_display()",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_menu_overlay(self):",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw semi-transparent menu overlay\"\"\"",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay = pygame.Surface(",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            (self.screen_data.total_width, self.screen_data.total_height), ",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.SRCALPHA",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        overlay.fill((*GameConstants.MENU_OVERLAY_COLOR, GameConstants.MENU_OVERLAY_ALPHA))",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.display_surface.blit(overlay, (0, 0))",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def detener(self):",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.display.quit()",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el personaje",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionState:",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision states\"\"\"",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.body = False",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.top = False",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bottom = False",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.platform = None",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class CollisionHandler:",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Class to handle collision detection and response\"\"\"",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_collisions(character_rects, platforms):",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state = CollisionState()",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for platform in platforms:",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['main'].colliderect(platform):",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.body = True",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['top'].colliderect(platform):",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.top = True",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if character_rects['bottom'].colliderect(platform):",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.bottom = True",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                state.platform = platform",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def check_player_collisions(player1, player2, damage_threshold, damage_reduction_factor):",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for collisions between players and apply damage\"\"\"",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player1.get_rect().colliderect(player2.get_rect()):",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            velocity_diff = abs(player1.velocidad_x - player2.velocidad_x) + abs(player1.velocidad_y - player2.velocidad_y)",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if velocity_diff > damage_threshold:",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage = (velocity_diff - damage_threshold) * damage_reduction_factor",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if player1.velocidad_x + player1.velocidad_y < player2.velocidad_x + player2.velocidad_y:",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    player1.take_damage(damage, direction=player2.direccion_bloqueo)",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                else:",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    player2.take_damage(damage, direction=player1.direccion_bloqueo)",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @staticmethod",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_character_state(character, collision_state, keys):",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update character state based on collisions\"\"\"",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.body:",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            # Usar los controles específicos del jugador para verificar la tecla abajo",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            down_key = character.controls.get_key('down')",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if (character.estado_gravedad in [GameConstants.STATE_DIGGING, GameConstants.STATE_FALLING] and ",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                keys[down_key]):  # Cambiar pygame.K_DOWN por down_key",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                character.estado_gravedad = GameConstants.STATE_IDLE",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.top:",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if collision_state.bottom:",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.saltando(True)",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(True)",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.ensima_Colision = collision_state.platform",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            character.cavando(False)",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Personaje:",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Player character with configurable controls and physics\"\"\"",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, x, y, tamaño, controls=None, player_id=1):",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_physics(x, y, tamaño)",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_state(player_id)",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_controls(controls, player_id)",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._init_stats()",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_physics(self, x, y, tamaño):",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize physics-related attributes\"\"\"",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(x, y, tamaño, tamaño)",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tamaño = tamaño",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._create_collision_rects(x, y)",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_movement_params()",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_collision_rects(self, x, y):",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create collision detection rectangles\"\"\"",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        h = self.tamaño / 2",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect = pygame.Rect(x, y - h, self.tamaño, h)",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect = pygame.Rect(x, y + self.tamaño, self.tamaño, h)",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect = pygame.Rect(x + self.tamaño, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect = pygame.Rect(x - h, y, h, self.tamaño)",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_movement_params(self):",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup movement and physics parameters\"\"\"",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_maxima = self.tamaño / GameConstants.MAX_SPEED_FACTOR",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.gravedad = self.tamaño / GameConstants.GRAVITY_FACTOR",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.freno = self.tamaño / GameConstants.BRAKE_FACTOR",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.aceleracion = self.tamaño / GameConstants.ACCELERATION_FACTOR",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_state(self, player_id):",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize state variables\"\"\"",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.player_id = player_id",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Configurar sprite según player_id",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprite_config = {",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            1: {'row': 0, 'col': 0},  # Jugador 1: sprite en (0,0)",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            2: {'row': 1, 'col': 1}   # Jugador 2: sprite en (1,1)",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }.get(player_id, {'row': 0, 'col': 0})  # Default a (0,0) si no es 1 o 2",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ensima_Colision = None",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloqueando = False",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_controls(self, controls, player_id):",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player controls\"\"\"",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = controls or PlayerControls.get_default_controls(player_id)  ",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _init_stats(self):",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize player stats\"\"\"",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_velocidades(self, teclas, velocidad_escalada_x, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update velocities based on input\"\"\"",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_horizontal_movement(teclas, velocidad_escalada_x)",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._handle_vertical_movement(teclas, velocidad_escalada_y)",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_horizontal_movement(self, teclas, velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle left/right movement\"\"\"",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('left')] and ",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima * -1 <= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.aceleracion",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (teclas[self.controls.get_key('right')] and ",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_maxima >= velocidad_escalada_x):",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.aceleracion",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_vertical_movement(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle jumping and digging\"\"\"",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Jumping",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_jump(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_jump(resource_manager)",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Digging",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._can_dig(teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._perform_dig(resource_manager)",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_jump(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('up')] and ",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima * -1 <= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.salto)",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _can_dig(self, teclas, velocidad_escalada_y):",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (teclas[self.controls.get_key('down')] and ",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.velocidad_maxima >= velocidad_escalada_y and ",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.cavar)",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_jump(self, resource_manager):",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('jump')",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = False",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_FALLING",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y -= self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _perform_dig(self, resource_manager):",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager.play_sound('dig')",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = False",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.estado_gravedad = GameConstants.STATE_DIGGING",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y += self.aceleracion * GameConstants.JUMP_FORCE",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def frenar(self, teclas):",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply braking forces\"\"\"",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_horizontal(teclas)",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._brake_vertical(teclas)",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_horizontal(self, teclas):",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal braking\"\"\"",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        left_key = self.controls.get_key('left')",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        right_key = self.controls.get_key('right')",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[left_key] and not teclas[right_key] and self.velocidad_x != 0:",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_brake()",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_horizontal_resistance()",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _brake_vertical(self, teclas):",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical braking\"\"\"",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        up_key = self.controls.get_key('up')",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        down_key = self.controls.get_key('down')",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not teclas[up_key] and not teclas[down_key] and self.velocidad_y != 0:",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_brake()",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._apply_vertical_resistance()",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_brake(self):",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal brake force\"\"\"",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += self.freno / 10 if not self.salto else self.freno",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_horizontal_resistance(self):",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply horizontal resistance\"\"\"",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_x > 0:",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x -= int(self.freno / 10)",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_x < 0:",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_x += int(self.freno / 10)",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_brake(self):",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical brake force\"\"\"",
                "range": {
                  "startLineNumber": 415,
                  "startColumn": 1,
                  "endLineNumber": 415,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 416,
                  "startColumn": 1,
                  "endLineNumber": 416,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 1.5)",
                "range": {
                  "startLineNumber": 417,
                  "startColumn": 1,
                  "endLineNumber": 417,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 418,
                  "startColumn": 1,
                  "endLineNumber": 418,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno)",
                "range": {
                  "startLineNumber": 419,
                  "startColumn": 1,
                  "endLineNumber": 419,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 420,
                  "startColumn": 1,
                  "endLineNumber": 420,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _apply_vertical_resistance(self):",
                "range": {
                  "startLineNumber": 421,
                  "startColumn": 1,
                  "endLineNumber": 421,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Apply vertical resistance\"\"\"",
                "range": {
                  "startLineNumber": 422,
                  "startColumn": 1,
                  "endLineNumber": 422,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.velocidad_y > 0:",
                "range": {
                  "startLineNumber": 423,
                  "startColumn": 1,
                  "endLineNumber": 423,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= int(self.freno / 4)",
                "range": {
                  "startLineNumber": 424,
                  "startColumn": 1,
                  "endLineNumber": 424,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.velocidad_y < 0:",
                "range": {
                  "startLineNumber": 425,
                  "startColumn": 1,
                  "endLineNumber": 425,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += int(self.freno / 4)",
                "range": {
                  "startLineNumber": 426,
                  "startColumn": 1,
                  "endLineNumber": 426,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 427,
                  "startColumn": 1,
                  "endLineNumber": 427,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 428,
                  "startColumn": 1,
                  "endLineNumber": 428,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 429,
                  "startColumn": 1,
                  "endLineNumber": 429,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 430,
                  "startColumn": 1,
                  "endLineNumber": 430,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def saltando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 431,
                  "startColumn": 1,
                  "endLineNumber": 431,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.salto = nuevo_estado",
                "range": {
                  "startLineNumber": 432,
                  "startColumn": 1,
                  "endLineNumber": 432,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 433,
                  "startColumn": 1,
                  "endLineNumber": 433,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def cavando(self, nuevo_estado):",
                "range": {
                  "startLineNumber": 434,
                  "startColumn": 1,
                  "endLineNumber": 434,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.cavar = nuevo_estado",
                "range": {
                  "startLineNumber": 435,
                  "startColumn": 1,
                  "endLineNumber": 435,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 436,
                  "startColumn": 1,
                  "endLineNumber": 436,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def bloquear(self, teclas):",
                "range": {
                  "startLineNumber": 437,
                  "startColumn": 1,
                  "endLineNumber": 437,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle blocking\"\"\"",
                "range": {
                  "startLineNumber": 438,
                  "startColumn": 1,
                  "endLineNumber": 438,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        block_key = self.controls.get_key('block')",
                "range": {
                  "startLineNumber": 439,
                  "startColumn": 1,
                  "endLineNumber": 439,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[block_key]:",
                "range": {
                  "startLineNumber": 440,
                  "startColumn": 1,
                  "endLineNumber": 440,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = True",
                "range": {
                  "startLineNumber": 441,
                  "startColumn": 1,
                  "endLineNumber": 441,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if teclas[self.controls.get_key('left')]:",
                "range": {
                  "startLineNumber": 442,
                  "startColumn": 1,
                  "endLineNumber": 442,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'left'",
                "range": {
                  "startLineNumber": 443,
                  "startColumn": 1,
                  "endLineNumber": 443,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('right')]:",
                "range": {
                  "startLineNumber": 444,
                  "startColumn": 1,
                  "endLineNumber": 444,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'right'",
                "range": {
                  "startLineNumber": 445,
                  "startColumn": 1,
                  "endLineNumber": 445,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('up')]:",
                "range": {
                  "startLineNumber": 446,
                  "startColumn": 1,
                  "endLineNumber": 446,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'up'",
                "range": {
                  "startLineNumber": 447,
                  "startColumn": 1,
                  "endLineNumber": 447,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            elif teclas[self.controls.get_key('down')]:",
                "range": {
                  "startLineNumber": 448,
                  "startColumn": 1,
                  "endLineNumber": 448,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.direccion_bloqueo = 'down'",
                "range": {
                  "startLineNumber": 449,
                  "startColumn": 1,
                  "endLineNumber": 449,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 450,
                  "startColumn": 1,
                  "endLineNumber": 450,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.bloqueando = False",
                "range": {
                  "startLineNumber": 451,
                  "startColumn": 1,
                  "endLineNumber": 451,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.direccion_bloqueo = None",
                "range": {
                  "startLineNumber": 452,
                  "startColumn": 1,
                  "endLineNumber": 452,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 453,
                  "startColumn": 1,
                  "endLineNumber": 453,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount, direction=None):",
                "range": {
                  "startLineNumber": 454,
                  "startColumn": 1,
                  "endLineNumber": 454,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.bloqueando and direction == self.direccion_bloqueo:",
                "range": {
                  "startLineNumber": 455,
                  "startColumn": 1,
                  "endLineNumber": 455,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            amount *= 0.5  # Reduce damage by 50% if blocking in the correct direction",
                "range": {
                  "startLineNumber": 456,
                  "startColumn": 1,
                  "endLineNumber": 456,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 457,
                  "startColumn": 1,
                  "endLineNumber": 457,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 458,
                  "startColumn": 1,
                  "endLineNumber": 458,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_collision_rects(self):",
                "range": {
                  "startLineNumber": 459,
                  "startColumn": 1,
                  "endLineNumber": 459,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get all collision rectangles\"\"\"",
                "range": {
                  "startLineNumber": 460,
                  "startColumn": 1,
                  "endLineNumber": 460,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return {",
                "range": {
                  "startLineNumber": 461,
                  "startColumn": 1,
                  "endLineNumber": 461,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'main': self.rect,",
                "range": {
                  "startLineNumber": 462,
                  "startColumn": 1,
                  "endLineNumber": 462,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'top': self.arriba_rect,",
                "range": {
                  "startLineNumber": 463,
                  "startColumn": 1,
                  "endLineNumber": 463,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'bottom': self.abajo_rect",
                "range": {
                  "startLineNumber": 464,
                  "startColumn": 1,
                  "endLineNumber": 464,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 465,
                  "startColumn": 1,
                  "endLineNumber": 465,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 466,
                  "startColumn": 1,
                  "endLineNumber": 466,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def calcular_colision(self, controlador, teclas):",
                "range": {
                  "startLineNumber": 467,
                  "startColumn": 1,
                  "endLineNumber": 467,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        collision_state = CollisionHandler.check_collisions(",
                "range": {
                  "startLineNumber": 468,
                  "startColumn": 1,
                  "endLineNumber": 468,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.get_collision_rects(), ",
                "range": {
                  "startLineNumber": 469,
                  "startColumn": 1,
                  "endLineNumber": 469,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            controlador.get_rects()",
                "range": {
                  "startLineNumber": 470,
                  "startColumn": 1,
                  "endLineNumber": 470,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 471,
                  "startColumn": 1,
                  "endLineNumber": 471,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        CollisionHandler.update_character_state(self, collision_state, teclas)",
                "range": {
                  "startLineNumber": 472,
                  "startColumn": 1,
                  "endLineNumber": 472,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    ",
                "range": {
                  "startLineNumber": 473,
                  "startColumn": 1,
                  "endLineNumber": 473,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def actualizar_posicion_rects(self):",
                "range": {
                  "startLineNumber": 474,
                  "startColumn": 1,
                  "endLineNumber": 474,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Actualiza la posición de todos los rectángulos del personaje\"\"\"",
                "range": {
                  "startLineNumber": 475,
                  "startColumn": 1,
                  "endLineNumber": 475,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 476,
                  "startColumn": 1,
                  "endLineNumber": 476,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.arriba_rect.y = self.rect.y - self.tamaño / 2",
                "range": {
                  "startLineNumber": 477,
                  "startColumn": 1,
                  "endLineNumber": 477,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.x = self.rect.x",
                "range": {
                  "startLineNumber": 478,
                  "startColumn": 1,
                  "endLineNumber": 478,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.abajo_rect.y = self.rect.y + self.tamaño",
                "range": {
                  "startLineNumber": 479,
                  "startColumn": 1,
                  "endLineNumber": 479,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.x = self.rect.x + self.tamaño",
                "range": {
                  "startLineNumber": 480,
                  "startColumn": 1,
                  "endLineNumber": 480,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.derecha_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 481,
                  "startColumn": 1,
                  "endLineNumber": 481,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.x = self.rect.x - self.tamaño/2",
                "range": {
                  "startLineNumber": 482,
                  "startColumn": 1,
                  "endLineNumber": 482,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.izquierda_rect.y = self.rect.y",
                "range": {
                  "startLineNumber": 483,
                  "startColumn": 1,
                  "endLineNumber": 483,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 484,
                  "startColumn": 1,
                  "endLineNumber": 484,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def reiniciar_posicion(self, x, y):",
                "range": {
                  "startLineNumber": 485,
                  "startColumn": 1,
                  "endLineNumber": 485,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Reinicia la posición del personaje y todos sus rectángulos\"\"\"",
                "range": {
                  "startLineNumber": 486,
                  "startColumn": 1,
                  "endLineNumber": 486,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_x = 0",
                "range": {
                  "startLineNumber": 487,
                  "startColumn": 1,
                  "endLineNumber": 487,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 488,
                  "startColumn": 1,
                  "endLineNumber": 488,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x = x",
                "range": {
                  "startLineNumber": 489,
                  "startColumn": 1,
                  "endLineNumber": 489,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y = y",
                "range": {
                  "startLineNumber": 490,
                  "startColumn": 1,
                  "endLineNumber": 490,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 491,
                  "startColumn": 1,
                  "endLineNumber": 491,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 492,
                  "startColumn": 1,
                  "endLineNumber": 492,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def accion_gravedad(self):",
                "range": {
                  "startLineNumber": 493,
                  "startColumn": 1,
                  "endLineNumber": 493,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.estado_gravedad == GameConstants.STATE_FALLING:",
                "range": {
                  "startLineNumber": 494,
                  "startColumn": 1,
                  "endLineNumber": 494,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y += self.gravedad",
                "range": {
                  "startLineNumber": 495,
                  "startColumn": 1,
                  "endLineNumber": 495,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_DIGGING:",
                "range": {
                  "startLineNumber": 496,
                  "startColumn": 1,
                  "endLineNumber": 496,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y -= (self.rect.y - (self.ensima_Colision.y-self.tamaño/2))*int(self.tamaño/4)",
                "range": {
                  "startLineNumber": 497,
                  "startColumn": 1,
                  "endLineNumber": 497,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if -0.01 < self.velocidad_y < 0.01:",
                "range": {
                  "startLineNumber": 498,
                  "startColumn": 1,
                  "endLineNumber": 498,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 499,
                  "startColumn": 1,
                  "endLineNumber": 499,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 500,
                  "startColumn": 1,
                  "endLineNumber": 500,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif self.estado_gravedad == GameConstants.STATE_IDLE:",
                "range": {
                  "startLineNumber": 501,
                  "startColumn": 1,
                  "endLineNumber": 501,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.velocidad_y = 0",
                "range": {
                  "startLineNumber": 502,
                  "startColumn": 1,
                  "endLineNumber": 502,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.rect.y = self.ensima_Colision.y - self.tamaño",
                "range": {
                  "startLineNumber": 503,
                  "startColumn": 1,
                  "endLineNumber": 503,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 504,
                  "startColumn": 1,
                  "endLineNumber": 504,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 505,
                  "startColumn": 1,
                  "endLineNumber": 505,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def mover(self, teclas, delta_time, pantalla):",
                "range": {
                  "startLineNumber": 506,
                  "startColumn": 1,
                  "endLineNumber": 506,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._check_respawn(pantalla)",
                "range": {
                  "startLineNumber": 507,
                  "startColumn": 1,
                  "endLineNumber": 507,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_physics(teclas)",
                "range": {
                  "startLineNumber": 508,
                  "startColumn": 1,
                  "endLineNumber": 508,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 509,
                  "startColumn": 1,
                  "endLineNumber": 509,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        velocidad_escalada = self._scale_velocities(delta_time)",
                "range": {
                  "startLineNumber": 510,
                  "startColumn": 1,
                  "endLineNumber": 510,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_velocidades(teclas, *velocidad_escalada)",
                "range": {
                  "startLineNumber": 511,
                  "startColumn": 1,
                  "endLineNumber": 511,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_position(velocidad_escalada)",
                "range": {
                  "startLineNumber": 512,
                  "startColumn": 1,
                  "endLineNumber": 512,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 513,
                  "startColumn": 1,
                  "endLineNumber": 513,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_respawn(self, pantalla):",
                "range": {
                  "startLineNumber": 514,
                  "startColumn": 1,
                  "endLineNumber": 514,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check if player needs to respawn and apply respawn damage\"\"\"",
                "range": {
                  "startLineNumber": 515,
                  "startColumn": 1,
                  "endLineNumber": 515,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 516,
                  "startColumn": 1,
                  "endLineNumber": 516,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", \"tiles_x\", \"border_x\", ",
                "range": {
                  "startLineNumber": 517,
                  "startColumn": 1,
                  "endLineNumber": 517,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\", \"tile_size\"",
                "range": {
                  "startLineNumber": 518,
                  "startColumn": 1,
                  "endLineNumber": 518,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 519,
                  "startColumn": 1,
                  "endLineNumber": 519,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_X = datos_pantalla[2] // 2 ",
                "range": {
                  "startLineNumber": 520,
                  "startColumn": 1,
                  "endLineNumber": 520,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        inicio_Y = datos_pantalla[3] // 2",
                "range": {
                  "startLineNumber": 521,
                  "startColumn": 1,
                  "endLineNumber": 521,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_X = datos_pantalla[4] * datos_pantalla[1]",
                "range": {
                  "startLineNumber": 522,
                  "startColumn": 1,
                  "endLineNumber": 522,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño_Y = datos_pantalla[4] * datos_pantalla[0]",
                "range": {
                  "startLineNumber": 523,
                  "startColumn": 1,
                  "endLineNumber": 523,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 524,
                  "startColumn": 1,
                  "endLineNumber": 524,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.rect.y > tamaño_Y + self.tamaño:",
                "range": {
                  "startLineNumber": 525,
                  "startColumn": 1,
                  "endLineNumber": 525,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.take_damage(GameConstants.PLAYER_RESPAWN_DAMAGE)",
                "range": {
                  "startLineNumber": 526,
                  "startColumn": 1,
                  "endLineNumber": 526,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.reiniciar_posicion(inicio_X + tamaño_X//2, inicio_Y + tamaño_Y//2)",
                "range": {
                  "startLineNumber": 527,
                  "startColumn": 1,
                  "endLineNumber": 527,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 528,
                  "startColumn": 1,
                  "endLineNumber": 528,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_physics(self, teclas):",
                "range": {
                  "startLineNumber": 529,
                  "startColumn": 1,
                  "endLineNumber": 529,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update physics state\"\"\"",
                "range": {
                  "startLineNumber": 530,
                  "startColumn": 1,
                  "endLineNumber": 530,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.accion_gravedad()",
                "range": {
                  "startLineNumber": 531,
                  "startColumn": 1,
                  "endLineNumber": 531,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.frenar(teclas)",
                "range": {
                  "startLineNumber": 532,
                  "startColumn": 1,
                  "endLineNumber": 532,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.bloquear(teclas)",
                "range": {
                  "startLineNumber": 533,
                  "startColumn": 1,
                  "endLineNumber": 533,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 534,
                  "startColumn": 1,
                  "endLineNumber": 534,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_position(self, velocidades):",
                "range": {
                  "startLineNumber": 535,
                  "startColumn": 1,
                  "endLineNumber": 535,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update position based on scaled velocities\"\"\"",
                "range": {
                  "startLineNumber": 536,
                  "startColumn": 1,
                  "endLineNumber": 536,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.x += velocidades[0]",
                "range": {
                  "startLineNumber": 537,
                  "startColumn": 1,
                  "endLineNumber": 537,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect.y += velocidades[1]",
                "range": {
                  "startLineNumber": 538,
                  "startColumn": 1,
                  "endLineNumber": 538,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.actualizar_posicion_rects()",
                "range": {
                  "startLineNumber": 539,
                  "startColumn": 1,
                  "endLineNumber": 539,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 540,
                  "startColumn": 1,
                  "endLineNumber": 540,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _scale_velocities(self, delta_time):",
                "range": {
                  "startLineNumber": 541,
                  "startColumn": 1,
                  "endLineNumber": 541,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Scale velocities based on delta time\"\"\"",
                "range": {
                  "startLineNumber": 542,
                  "startColumn": 1,
                  "endLineNumber": 542,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        scale_factor = delta_time * 10",
                "range": {
                  "startLineNumber": 543,
                  "startColumn": 1,
                  "endLineNumber": 543,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return (",
                "range": {
                  "startLineNumber": 544,
                  "startColumn": 1,
                  "endLineNumber": 544,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_x * scale_factor) / 10,",
                "range": {
                  "startLineNumber": 545,
                  "startColumn": 1,
                  "endLineNumber": 545,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            int(self.velocidad_y * scale_factor) / 10",
                "range": {
                  "startLineNumber": 546,
                  "startColumn": 1,
                  "endLineNumber": 546,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 547,
                  "startColumn": 1,
                  "endLineNumber": 547,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 548,
                  "startColumn": 1,
                  "endLineNumber": 548,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def take_damage(self, amount):",
                "range": {
                  "startLineNumber": 549,
                  "startColumn": 1,
                  "endLineNumber": 549,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = max(0, self.health - amount)",
                "range": {
                  "startLineNumber": 550,
                  "startColumn": 1,
                  "endLineNumber": 550,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 551,
                  "startColumn": 1,
                  "endLineNumber": 551,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def heal(self, amount):",
                "range": {
                  "startLineNumber": 552,
                  "startColumn": 1,
                  "endLineNumber": 552,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.health = min(GameConstants.PLAYER_MAX_HEALTH, self.health + amount)",
                "range": {
                  "startLineNumber": 553,
                  "startColumn": 1,
                  "endLineNumber": 553,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 554,
                  "startColumn": 1,
                  "endLineNumber": 554,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_health_percentage(self):",
                "range": {
                  "startLineNumber": 555,
                  "startColumn": 1,
                  "endLineNumber": 555,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.health / GameConstants.PLAYER_MAX_HEALTH",
                "range": {
                  "startLineNumber": 556,
                  "startColumn": 1,
                  "endLineNumber": 556,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 557,
                  "startColumn": 1,
                  "endLineNumber": 557,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 558,
                  "startColumn": 1,
                  "endLineNumber": 558,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 559,
                  "startColumn": 1,
                  "endLineNumber": 559,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 560,
                  "startColumn": 1,
                  "endLineNumber": 560,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 561,
                  "startColumn": 1,
                  "endLineNumber": 561,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        player_image = resource_manager.get_scaled_sprite(",
                "range": {
                  "startLineNumber": 562,
                  "startColumn": 1,
                  "endLineNumber": 562,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player', ",
                "range": {
                  "startLineNumber": 563,
                  "startColumn": 1,
                  "endLineNumber": 563,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 564,
                  "startColumn": 1,
                  "endLineNumber": 564,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.tamaño, ",
                "range": {
                  "startLineNumber": 565,
                  "startColumn": 1,
                  "endLineNumber": 565,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['row'], ",
                "range": {
                  "startLineNumber": 566,
                  "startColumn": 1,
                  "endLineNumber": 566,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.sprite_config['col']",
                "range": {
                  "startLineNumber": 567,
                  "startColumn": 1,
                  "endLineNumber": 567,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 568,
                  "startColumn": 1,
                  "endLineNumber": 568,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 569,
                  "startColumn": 1,
                  "endLineNumber": 569,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_image:",
                "range": {
                  "startLineNumber": 570,
                  "startColumn": 1,
                  "endLineNumber": 570,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display.blit(player_image, self.rect)",
                "range": {
                  "startLineNumber": 571,
                  "startColumn": 1,
                  "endLineNumber": 571,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 572,
                  "startColumn": 1,
                  "endLineNumber": 572,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.draw.rect(display, GameConstants.COLORS['RED'], self.rect)",
                "range": {
                  "startLineNumber": 573,
                  "startColumn": 1,
                  "endLineNumber": 573,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 574,
                  "startColumn": 1,
                  "endLineNumber": 574,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        #probar hitbox",
                "range": {
                  "startLineNumber": 575,
                  "startColumn": 1,
                  "endLineNumber": 575,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.arriba_rect)",
                "range": {
                  "startLineNumber": 576,
                  "startColumn": 1,
                  "endLineNumber": 576,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.abajo_rect)",
                "range": {
                  "startLineNumber": 577,
                  "startColumn": 1,
                  "endLineNumber": 577,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.derecha_rect)",
                "range": {
                  "startLineNumber": 578,
                  "startColumn": 1,
                  "endLineNumber": 578,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, GameConstants.COLORS['BLUE'], self.izquierda_rect)",
                "range": {
                  "startLineNumber": 579,
                  "startColumn": 1,
                  "endLineNumber": 579,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 580,
                  "startColumn": 1,
                  "endLineNumber": 580,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 581,
                  "startColumn": 1,
                  "endLineNumber": 581,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar el fondo",
                "range": {
                  "startLineNumber": 582,
                  "startColumn": 1,
                  "endLineNumber": 582,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Fondo:",
                "range": {
                  "startLineNumber": 583,
                  "startColumn": 1,
                  "endLineNumber": 583,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 584,
                  "startColumn": 1,
                  "endLineNumber": 584,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pass",
                "range": {
                  "startLineNumber": 585,
                  "startColumn": 1,
                  "endLineNumber": 585,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 586,
                  "startColumn": 1,
                  "endLineNumber": 586,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 587,
                  "startColumn": 1,
                  "endLineNumber": 587,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        datos_pantalla = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 588,
                  "startColumn": 1,
                  "endLineNumber": 588,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_y\", ",
                "range": {
                  "startLineNumber": 589,
                  "startColumn": 1,
                  "endLineNumber": 589,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tiles_x\",",
                "range": {
                  "startLineNumber": 590,
                  "startColumn": 1,
                  "endLineNumber": 590,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_x\",",
                "range": {
                  "startLineNumber": 591,
                  "startColumn": 1,
                  "endLineNumber": 591,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"border_y\",",
                "range": {
                  "startLineNumber": 592,
                  "startColumn": 1,
                  "endLineNumber": 592,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"tile_size\",",
                "range": {
                  "startLineNumber": 593,
                  "startColumn": 1,
                  "endLineNumber": 593,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"display\"",
                "range": {
                  "startLineNumber": 594,
                  "startColumn": 1,
                  "endLineNumber": 594,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 595,
                  "startColumn": 1,
                  "endLineNumber": 595,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 596,
                  "startColumn": 1,
                  "endLineNumber": 596,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(datos_pantalla[0]):",
                "range": {
                  "startLineNumber": 597,
                  "startColumn": 1,
                  "endLineNumber": 597,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(datos_pantalla[1]):",
                "range": {
                  "startLineNumber": 598,
                  "startColumn": 1,
                  "endLineNumber": 598,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 if (x + y) % 2 == 0:",
                "range": {
                  "startLineNumber": 599,
                  "startColumn": 1,
                  "endLineNumber": 599,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    rect = pygame.Rect(",
                "range": {
                  "startLineNumber": 600,
                  "startColumn": 1,
                  "endLineNumber": 600,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[2] // 2 + x * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 601,
                  "startColumn": 1,
                  "endLineNumber": 601,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[3] // 2 + y * datos_pantalla[4],",
                "range": {
                  "startLineNumber": 602,
                  "startColumn": 1,
                  "endLineNumber": 602,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4],",
                "range": {
                  "startLineNumber": 603,
                  "startColumn": 1,
                  "endLineNumber": 603,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        datos_pantalla[4]",
                "range": {
                  "startLineNumber": 604,
                  "startColumn": 1,
                  "endLineNumber": 604,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    )",
                "range": {
                  "startLineNumber": 605,
                  "startColumn": 1,
                  "endLineNumber": 605,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    pygame.draw.rect(datos_pantalla[5], GameConstants.COLORS['WHITE'], rect)",
                "range": {
                  "startLineNumber": 606,
                  "startColumn": 1,
                  "endLineNumber": 606,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 607,
                  "startColumn": 1,
                  "endLineNumber": 607,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 608,
                  "startColumn": 1,
                  "endLineNumber": 608,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Clase para manejar Plataformas",
                "range": {
                  "startLineNumber": 609,
                  "startColumn": 1,
                  "endLineNumber": 609,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class Plataforma:",
                "range": {
                  "startLineNumber": 610,
                  "startColumn": 1,
                  "endLineNumber": 610,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, **kwargs):",
                "range": {
                  "startLineNumber": 611,
                  "startColumn": 1,
                  "endLineNumber": 611,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = kwargs.get('tipo', 'default')",
                "range": {
                  "startLineNumber": 612,
                  "startColumn": 1,
                  "endLineNumber": 612,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto = kwargs.get('alto', 0)",
                "range": {
                  "startLineNumber": 613,
                  "startColumn": 1,
                  "endLineNumber": 613,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho = kwargs.get('ancho', 0)",
                "range": {
                  "startLineNumber": 614,
                  "startColumn": 1,
                  "endLineNumber": 614,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_X = kwargs.get('posicion_X', 0)",
                "range": {
                  "startLineNumber": 615,
                  "startColumn": 1,
                  "endLineNumber": 615,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.posicion_Y = kwargs.get('posicion_Y', 0)",
                "range": {
                  "startLineNumber": 616,
                  "startColumn": 1,
                  "endLineNumber": 616,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = kwargs.get('visible', True)",
                "range": {
                  "startLineNumber": 617,
                  "startColumn": 1,
                  "endLineNumber": 617,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.rect = pygame.Rect(self.posicion_X, self.posicion_Y, self.ancho, self.alto)",
                "range": {
                  "startLineNumber": 618,
                  "startColumn": 1,
                  "endLineNumber": 618,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 619,
                  "startColumn": 1,
                  "endLineNumber": 619,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rect(self):",
                "range": {
                  "startLineNumber": 620,
                  "startColumn": 1,
                  "endLineNumber": 620,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.rect",
                "range": {
                  "startLineNumber": 621,
                  "startColumn": 1,
                  "endLineNumber": 621,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 622,
                  "startColumn": 1,
                  "endLineNumber": 622,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def switch_visible(self):",
                "range": {
                  "startLineNumber": 623,
                  "startColumn": 1,
                  "endLineNumber": 623,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.visible = not self.visible",
                "range": {
                  "startLineNumber": 624,
                  "startColumn": 1,
                  "endLineNumber": 624,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 625,
                  "startColumn": 1,
                  "endLineNumber": 625,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"def _make_plataform(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 626,
                  "startColumn": 1,
                  "endLineNumber": 626,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 627,
                  "startColumn": 1,
                  "endLineNumber": 627,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 628,
                  "startColumn": 1,
                  "endLineNumber": 628,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_left = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 629,
                  "startColumn": 1,
                  "endLineNumber": 629,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_esquina_right = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 2)",
                "range": {
                  "startLineNumber": 630,
                  "startColumn": 1,
                  "endLineNumber": 630,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_row = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 1)",
                "range": {
                  "startLineNumber": 631,
                  "startColumn": 1,
                  "endLineNumber": 631,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        platform_col = resource_manager.get_scaled_sprite('platform_', tamaño, tamaño, 0, 3)",
                "range": {
                  "startLineNumber": 632,
                  "startColumn": 1,
                  "endLineNumber": 632,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return pantalla.get_screen_data(\"tiles_x\", \"tiles_y\")\"\"\"",
                "range": {
                  "startLineNumber": 633,
                  "startColumn": 1,
                  "endLineNumber": 633,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 634,
                  "startColumn": 1,
                  "endLineNumber": 634,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 635,
                  "startColumn": 1,
                  "endLineNumber": 635,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self.visible:",
                "range": {
                  "startLineNumber": 636,
                  "startColumn": 1,
                  "endLineNumber": 636,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño = pantalla.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 637,
                  "startColumn": 1,
                  "endLineNumber": 637,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pantalla = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 638,
                  "startColumn": 1,
                  "endLineNumber": 638,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 639,
                  "startColumn": 1,
                  "endLineNumber": 639,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            #platform = _make_plataform(pantalla)",
                "range": {
                  "startLineNumber": 640,
                  "startColumn": 1,
                  "endLineNumber": 640,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 641,
                  "startColumn": 1,
                  "endLineNumber": 641,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 642,
                  "startColumn": 1,
                  "endLineNumber": 642,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            platform_row = resource_manager.get_scaled_sprite('platform_rock', tamaño, tamaño, 0, 0)",
                "range": {
                  "startLineNumber": 643,
                  "startColumn": 1,
                  "endLineNumber": 643,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 644,
                  "startColumn": 1,
                  "endLineNumber": 644,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if platform_row:",
                "range": {
                  "startLineNumber": 645,
                  "startColumn": 1,
                  "endLineNumber": 645,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pantalla.blit(platform_row, self.rect)",
                "range": {
                  "startLineNumber": 646,
                  "startColumn": 1,
                  "endLineNumber": 646,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            else:",
                "range": {
                  "startLineNumber": 647,
                  "startColumn": 1,
                  "endLineNumber": 647,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                pygame.draw.rect(pantalla, GameConstants.COLORS['GREEN'], self.rect)",
                "range": {
                  "startLineNumber": 648,
                  "startColumn": 1,
                  "endLineNumber": 648,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 649,
                  "startColumn": 1,
                  "endLineNumber": 649,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class controlador_plataformas:",
                "range": {
                  "startLineNumber": 650,
                  "startColumn": 1,
                  "endLineNumber": 650,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 651,
                  "startColumn": 1,
                  "endLineNumber": 651,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas = []",
                "range": {
                  "startLineNumber": 652,
                  "startColumn": 1,
                  "endLineNumber": 652,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 653,
                  "startColumn": 1,
                  "endLineNumber": 653,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def agregar_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 654,
                  "startColumn": 1,
                  "endLineNumber": 654,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.plataformas.append(plataforma)",
                "range": {
                  "startLineNumber": 655,
                  "startColumn": 1,
                  "endLineNumber": 655,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 656,
                  "startColumn": 1,
                  "endLineNumber": 656,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def remover_plataforma(self, plataforma):",
                "range": {
                  "startLineNumber": 657,
                  "startColumn": 1,
                  "endLineNumber": 657,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 658,
                  "startColumn": 1,
                  "endLineNumber": 658,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.plataformas.remove(plataforma)",
                "range": {
                  "startLineNumber": 659,
                  "startColumn": 1,
                  "endLineNumber": 659,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 660,
                  "startColumn": 1,
                  "endLineNumber": 660,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_rects(self):",
                "range": {
                  "startLineNumber": 661,
                  "startColumn": 1,
                  "endLineNumber": 661,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [plataforma.get_rect() for plataforma in self.plataformas]",
                "range": {
                  "startLineNumber": 662,
                  "startColumn": 1,
                  "endLineNumber": 662,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 663,
                  "startColumn": 1,
                  "endLineNumber": 663,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 664,
                  "startColumn": 1,
                  "endLineNumber": 664,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for plataforma in self.plataformas:",
                "range": {
                  "startLineNumber": 665,
                  "startColumn": 1,
                  "endLineNumber": 665,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma.dibujar(pantalla)",
                "range": {
                  "startLineNumber": 666,
                  "startColumn": 1,
                  "endLineNumber": 666,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 667,
                  "startColumn": 1,
                  "endLineNumber": 667,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlatformConfig:",
                "range": {
                  "startLineNumber": 668,
                  "startColumn": 1,
                  "endLineNumber": 668,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for platform creation\"\"\"",
                "range": {
                  "startLineNumber": 669,
                  "startColumn": 1,
                  "endLineNumber": 669,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, tipo, alto_factor, ancho_factor, pos_x, pos_y):",
                "range": {
                  "startLineNumber": 670,
                  "startColumn": 1,
                  "endLineNumber": 670,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.tipo = tipo",
                "range": {
                  "startLineNumber": 671,
                  "startColumn": 1,
                  "endLineNumber": 671,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.alto_factor = alto_factor  # Factor multiplicador para alto",
                "range": {
                  "startLineNumber": 672,
                  "startColumn": 1,
                  "endLineNumber": 672,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.ancho_factor = ancho_factor  # Factor multiplicador para ancho",
                "range": {
                  "startLineNumber": 673,
                  "startColumn": 1,
                  "endLineNumber": 673,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_x = pos_x  # Posición X en baldosas",
                "range": {
                  "startLineNumber": 674,
                  "startColumn": 1,
                  "endLineNumber": 674,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pos_y = pos_y  # Posición Y en baldosas",
                "range": {
                  "startLineNumber": 675,
                  "startColumn": 1,
                  "endLineNumber": 675,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 676,
                  "startColumn": 1,
                  "endLineNumber": 676,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def crear_plataformas(controlador=controlador_plataformas, pantalla=Pantalla):",
                "range": {
                  "startLineNumber": 677,
                  "startColumn": 1,
                  "endLineNumber": 677,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    screen_data = pantalla.get_screen_data(",
                "range": {
                  "startLineNumber": 678,
                  "startColumn": 1,
                  "endLineNumber": 678,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"mid_y\", \"mid_x\", \"tile_size\", ",
                "range": {
                  "startLineNumber": 679,
                  "startColumn": 1,
                  "endLineNumber": 679,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"border_x\", \"border_y\", \"tiles_x\", \"tiles_y\"",
                "range": {
                  "startLineNumber": 680,
                  "startColumn": 1,
                  "endLineNumber": 680,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    )",
                "range": {
                  "startLineNumber": 681,
                  "startColumn": 1,
                  "endLineNumber": 681,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 682,
                  "startColumn": 1,
                  "endLineNumber": 682,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Configuración de todas las plataformas",
                "range": {
                  "startLineNumber": 683,
                  "startColumn": 1,
                  "endLineNumber": 683,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    plataformas_config = [",
                "range": {
                  "startLineNumber": 684,
                  "startColumn": 1,
                  "endLineNumber": 684,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"suelo\", 4, screen_data[5]/2, screen_data[6]/4, screen_data[6]*3/4),",
                "range": {
                  "startLineNumber": 685,
                  "startColumn": 1,
                  "endLineNumber": 685,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"voladora\", 1, 3, 6, 10),",
                "range": {
                  "startLineNumber": 686,
                  "startColumn": 1,
                  "endLineNumber": 686,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba1\", 0.5, 4, 12, 9),",
                "range": {
                  "startLineNumber": 687,
                  "startColumn": 1,
                  "endLineNumber": 687,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        PlatformConfig(\"prueba2\", 1, 4, 25, 14)",
                "range": {
                  "startLineNumber": 688,
                  "startColumn": 1,
                  "endLineNumber": 688,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ]",
                "range": {
                  "startLineNumber": 689,
                  "startColumn": 1,
                  "endLineNumber": 689,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 690,
                  "startColumn": 1,
                  "endLineNumber": 690,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear y agregar cada plataforma",
                "range": {
                  "startLineNumber": 691,
                  "startColumn": 1,
                  "endLineNumber": 691,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    for config in plataformas_config:",
                "range": {
                  "startLineNumber": 692,
                  "startColumn": 1,
                  "endLineNumber": 692,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        x, y = pantalla.screen_data.calculate_position(config.pos_x, config.pos_y)",
                "range": {
                  "startLineNumber": 693,
                  "startColumn": 1,
                  "endLineNumber": 693,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 694,
                  "startColumn": 1,
                  "endLineNumber": 694,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        plataforma = Plataforma(",
                "range": {
                  "startLineNumber": 695,
                  "startColumn": 1,
                  "endLineNumber": 695,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tipo=config.tipo,",
                "range": {
                  "startLineNumber": 696,
                  "startColumn": 1,
                  "endLineNumber": 696,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            alto=screen_data[2] * config.alto_factor,",
                "range": {
                  "startLineNumber": 697,
                  "startColumn": 1,
                  "endLineNumber": 697,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ancho=screen_data[2] * config.ancho_factor,",
                "range": {
                  "startLineNumber": 698,
                  "startColumn": 1,
                  "endLineNumber": 698,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_X=x,",
                "range": {
                  "startLineNumber": 699,
                  "startColumn": 1,
                  "endLineNumber": 699,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            posicion_Y=y",
                "range": {
                  "startLineNumber": 700,
                  "startColumn": 1,
                  "endLineNumber": 700,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 701,
                  "startColumn": 1,
                  "endLineNumber": 701,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        controlador.agregar_plataforma(plataforma)",
                "range": {
                  "startLineNumber": 702,
                  "startColumn": 1,
                  "endLineNumber": 702,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 703,
                  "startColumn": 1,
                  "endLineNumber": 703,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return controlador",
                "range": {
                  "startLineNumber": 704,
                  "startColumn": 1,
                  "endLineNumber": 704,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 705,
                  "startColumn": 1,
                  "endLineNumber": 705,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class GameStateManager:",
                "range": {
                  "startLineNumber": 706,
                  "startColumn": 1,
                  "endLineNumber": 706,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game states and transitions\"\"\"",
                "range": {
                  "startLineNumber": 707,
                  "startColumn": 1,
                  "endLineNumber": 707,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, pantalla, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 708,
                  "startColumn": 1,
                  "endLineNumber": 708,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla = pantalla",
                "range": {
                  "startLineNumber": 709,
                  "startColumn": 1,
                  "endLineNumber": 709,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_objects(jugadores, controlador, hud)",
                "range": {
                  "startLineNumber": 710,
                  "startColumn": 1,
                  "endLineNumber": 710,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_game_state()",
                "range": {
                  "startLineNumber": 711,
                  "startColumn": 1,
                  "endLineNumber": 711,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 712,
                  "startColumn": 1,
                  "endLineNumber": 712,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_objects(self, jugadores, controlador, hud):",
                "range": {
                  "startLineNumber": 713,
                  "startColumn": 1,
                  "endLineNumber": 713,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game objects\"\"\"",
                "range": {
                  "startLineNumber": 714,
                  "startColumn": 1,
                  "endLineNumber": 714,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.jugadores = jugadores if isinstance(jugadores, list) else [jugadores]",
                "range": {
                  "startLineNumber": 715,
                  "startColumn": 1,
                  "endLineNumber": 715,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = controlador",
                "range": {
                  "startLineNumber": 716,
                  "startColumn": 1,
                  "endLineNumber": 716,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.hud = hud",
                "range": {
                  "startLineNumber": 717,
                  "startColumn": 1,
                  "endLineNumber": 717,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.fondo = Fondo()",
                "range": {
                  "startLineNumber": 718,
                  "startColumn": 1,
                  "endLineNumber": 718,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager = ResourceManager()",
                "range": {
                  "startLineNumber": 719,
                  "startColumn": 1,
                  "endLineNumber": 719,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.resource_manager.load_resources()",
                "range": {
                  "startLineNumber": 720,
                  "startColumn": 1,
                  "endLineNumber": 720,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 721,
                  "startColumn": 1,
                  "endLineNumber": 721,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_game_state(self):",
                "range": {
                  "startLineNumber": 722,
                  "startColumn": 1,
                  "endLineNumber": 722,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize game state variables\"\"\"",
                "range": {
                  "startLineNumber": 723,
                  "startColumn": 1,
                  "endLineNumber": 723,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.clock = pygame.time.Clock()",
                "range": {
                  "startLineNumber": 724,
                  "startColumn": 1,
                  "endLineNumber": 724,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = \"menu\"",
                "range": {
                  "startLineNumber": 725,
                  "startColumn": 1,
                  "endLineNumber": 725,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.running = True",
                "range": {
                  "startLineNumber": 726,
                  "startColumn": 1,
                  "endLineNumber": 726,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controlador = crear_plataformas(self.controlador, self.pantalla)",
                "range": {
                  "startLineNumber": 727,
                  "startColumn": 1,
                  "endLineNumber": 727,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 728,
                  "startColumn": 1,
                  "endLineNumber": 728,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def run(self):",
                "range": {
                  "startLineNumber": 729,
                  "startColumn": 1,
                  "endLineNumber": 729,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Main game loop\"\"\"",
                "range": {
                  "startLineNumber": 730,
                  "startColumn": 1,
                  "endLineNumber": 730,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        while self.running:",
                "range": {
                  "startLineNumber": 731,
                  "startColumn": 1,
                  "endLineNumber": 731,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.running = not self._handle_current_state()",
                "range": {
                  "startLineNumber": 732,
                  "startColumn": 1,
                  "endLineNumber": 732,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return True",
                "range": {
                  "startLineNumber": 733,
                  "startColumn": 1,
                  "endLineNumber": 733,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 734,
                  "startColumn": 1,
                  "endLineNumber": 734,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_current_state(self):",
                "range": {
                  "startLineNumber": 735,
                  "startColumn": 1,
                  "endLineNumber": 735,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle current game state\"\"\"",
                "range": {
                  "startLineNumber": 736,
                  "startColumn": 1,
                  "endLineNumber": 736,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        state_handlers = {",
                "range": {
                  "startLineNumber": 737,
                  "startColumn": 1,
                  "endLineNumber": 737,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"menu\": self.handle_menu,",
                "range": {
                  "startLineNumber": 738,
                  "startColumn": 1,
                  "endLineNumber": 738,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            \"playing\": self.handle_playing",
                "range": {
                  "startLineNumber": 739,
                  "startColumn": 1,
                  "endLineNumber": 739,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 740,
                  "startColumn": 1,
                  "endLineNumber": 740,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return state_handlers.get(self.current_state, lambda: False)()",
                "range": {
                  "startLineNumber": 741,
                  "startColumn": 1,
                  "endLineNumber": 741,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 742,
                  "startColumn": 1,
                  "endLineNumber": 742,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_menu(self):",
                "range": {
                  "startLineNumber": 743,
                  "startColumn": 1,
                  "endLineNumber": 743,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle menu state\"\"\"",
                "range": {
                  "startLineNumber": 744,
                  "startColumn": 1,
                  "endLineNumber": 744,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 745,
                  "startColumn": 1,
                  "endLineNumber": 745,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 746,
                  "startColumn": 1,
                  "endLineNumber": 746,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 747,
                  "startColumn": 1,
                  "endLineNumber": 747,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 748,
                  "startColumn": 1,
                  "endLineNumber": 748,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_menu()",
                "range": {
                  "startLineNumber": 749,
                  "startColumn": 1,
                  "endLineNumber": 749,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 750,
                  "startColumn": 1,
                  "endLineNumber": 750,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 751,
                  "startColumn": 1,
                  "endLineNumber": 751,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"playing\")",
                "range": {
                  "startLineNumber": 752,
                  "startColumn": 1,
                  "endLineNumber": 752,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        elif teclas[pygame.K_BACKSPACE]:",
                "range": {
                  "startLineNumber": 753,
                  "startColumn": 1,
                  "endLineNumber": 753,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 754,
                  "startColumn": 1,
                  "endLineNumber": 754,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 755,
                  "startColumn": 1,
                  "endLineNumber": 755,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 756,
                  "startColumn": 1,
                  "endLineNumber": 756,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def handle_playing(self):",
                "range": {
                  "startLineNumber": 757,
                  "startColumn": 1,
                  "endLineNumber": 757,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle playing state\"\"\"",
                "range": {
                  "startLineNumber": 758,
                  "startColumn": 1,
                  "endLineNumber": 758,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._check_quit_event():",
                "range": {
                  "startLineNumber": 759,
                  "startColumn": 1,
                  "endLineNumber": 759,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 760,
                  "startColumn": 1,
                  "endLineNumber": 760,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 761,
                  "startColumn": 1,
                  "endLineNumber": 761,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        delta_time = self._update_time()",
                "range": {
                  "startLineNumber": 762,
                  "startColumn": 1,
                  "endLineNumber": 762,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        teclas = pygame.key.get_pressed()",
                "range": {
                  "startLineNumber": 763,
                  "startColumn": 1,
                  "endLineNumber": 763,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 764,
                  "startColumn": 1,
                  "endLineNumber": 764,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._handle_escape_key(teclas):",
                "range": {
                  "startLineNumber": 765,
                  "startColumn": 1,
                  "endLineNumber": 765,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return False",
                "range": {
                  "startLineNumber": 766,
                  "startColumn": 1,
                  "endLineNumber": 766,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 767,
                  "startColumn": 1,
                  "endLineNumber": 767,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._update_game_state(teclas, delta_time)",
                "range": {
                  "startLineNumber": 768,
                  "startColumn": 1,
                  "endLineNumber": 768,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._render_game()",
                "range": {
                  "startLineNumber": 769,
                  "startColumn": 1,
                  "endLineNumber": 769,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 770,
                  "startColumn": 1,
                  "endLineNumber": 770,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 771,
                  "startColumn": 1,
                  "endLineNumber": 771,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _check_quit_event(self):",
                "range": {
                  "startLineNumber": 772,
                  "startColumn": 1,
                  "endLineNumber": 772,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Check for quit events\"\"\"",
                "range": {
                  "startLineNumber": 773,
                  "startColumn": 1,
                  "endLineNumber": 773,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for evento in pygame.event.get():",
                "range": {
                  "startLineNumber": 774,
                  "startColumn": 1,
                  "endLineNumber": 774,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if evento.type == pygame.QUIT:",
                "range": {
                  "startLineNumber": 775,
                  "startColumn": 1,
                  "endLineNumber": 775,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return True",
                "range": {
                  "startLineNumber": 776,
                  "startColumn": 1,
                  "endLineNumber": 776,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 777,
                  "startColumn": 1,
                  "endLineNumber": 777,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 778,
                  "startColumn": 1,
                  "endLineNumber": 778,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _transition_to_state(self, new_state):",
                "range": {
                  "startLineNumber": 779,
                  "startColumn": 1,
                  "endLineNumber": 779,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle state transition\"\"\"",
                "range": {
                  "startLineNumber": 780,
                  "startColumn": 1,
                  "endLineNumber": 780,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.time.wait(200)",
                "range": {
                  "startLineNumber": 781,
                  "startColumn": 1,
                  "endLineNumber": 781,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.current_state = new_state",
                "range": {
                  "startLineNumber": 782,
                  "startColumn": 1,
                  "endLineNumber": 782,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 783,
                  "startColumn": 1,
                  "endLineNumber": 783,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _handle_escape_key(self, teclas):",
                "range": {
                  "startLineNumber": 784,
                  "startColumn": 1,
                  "endLineNumber": 784,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Handle escape key press\"\"\"",
                "range": {
                  "startLineNumber": 785,
                  "startColumn": 1,
                  "endLineNumber": 785,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if teclas[pygame.K_ESCAPE]:",
                "range": {
                  "startLineNumber": 786,
                  "startColumn": 1,
                  "endLineNumber": 786,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._transition_to_state(\"menu\")",
                "range": {
                  "startLineNumber": 787,
                  "startColumn": 1,
                  "endLineNumber": 787,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return True",
                "range": {
                  "startLineNumber": 788,
                  "startColumn": 1,
                  "endLineNumber": 788,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return False",
                "range": {
                  "startLineNumber": 789,
                  "startColumn": 1,
                  "endLineNumber": 789,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 790,
                  "startColumn": 1,
                  "endLineNumber": 790,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_time(self):",
                "range": {
                  "startLineNumber": 791,
                  "startColumn": 1,
                  "endLineNumber": 791,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game time\"\"\"",
                "range": {
                  "startLineNumber": 792,
                  "startColumn": 1,
                  "endLineNumber": 792,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.clock.tick(GameConstants.FPS) / 1000.0",
                "range": {
                  "startLineNumber": 793,
                  "startColumn": 1,
                  "endLineNumber": 793,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 794,
                  "startColumn": 1,
                  "endLineNumber": 794,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_game_state(self, teclas, delta_time):",
                "range": {
                  "startLineNumber": 795,
                  "startColumn": 1,
                  "endLineNumber": 795,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update game state for all players\"\"\"",
                "range": {
                  "startLineNumber": 796,
                  "startColumn": 1,
                  "endLineNumber": 796,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for jugador in self.jugadores:",
                "range": {
                  "startLineNumber": 797,
                  "startColumn": 1,
                  "endLineNumber": 797,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self._update_player(jugador, teclas, delta_time)",
                "range": {
                  "startLineNumber": 798,
                  "startColumn": 1,
                  "endLineNumber": 798,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 799,
                  "startColumn": 1,
                  "endLineNumber": 799,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Check for player collisions and apply damage",
                "range": {
                  "startLineNumber": 800,
                  "startColumn": 1,
                  "endLineNumber": 800,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if len(self.jugadores) > 1:",
                "range": {
                  "startLineNumber": 801,
                  "startColumn": 1,
                  "endLineNumber": 801,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            CollisionHandler.check_player_collisions(",
                "range": {
                  "startLineNumber": 802,
                  "startColumn": 1,
                  "endLineNumber": 802,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[0], ",
                "range": {
                  "startLineNumber": 803,
                  "startColumn": 1,
                  "endLineNumber": 803,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.jugadores[1], ",
                "range": {
                  "startLineNumber": 804,
                  "startColumn": 1,
                  "endLineNumber": 804,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_threshold=5, ",
                "range": {
                  "startLineNumber": 805,
                  "startColumn": 1,
                  "endLineNumber": 805,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                damage_reduction_factor=0.5",
                "range": {
                  "startLineNumber": 806,
                  "startColumn": 1,
                  "endLineNumber": 806,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            )",
                "range": {
                  "startLineNumber": 807,
                  "startColumn": 1,
                  "endLineNumber": 807,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 808,
                  "startColumn": 1,
                  "endLineNumber": 808,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _update_player(self, jugador, teclas, delta_time):",
                "range": {
                  "startLineNumber": 809,
                  "startColumn": 1,
                  "endLineNumber": 809,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update individual player state\"\"\"",
                "range": {
                  "startLineNumber": 810,
                  "startColumn": 1,
                  "endLineNumber": 810,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.calcular_colision(self.controlador, teclas)",
                "range": {
                  "startLineNumber": 811,
                  "startColumn": 1,
                  "endLineNumber": 811,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        jugador.mover(teclas, delta_time, self.pantalla)",
                "range": {
                  "startLineNumber": 812,
                  "startColumn": 1,
                  "endLineNumber": 812,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 813,
                  "startColumn": 1,
                  "endLineNumber": 813,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _render_game(self):",
                "range": {
                  "startLineNumber": 814,
                  "startColumn": 1,
                  "endLineNumber": 814,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Render game state\"\"\"",
                "range": {
                  "startLineNumber": 815,
                  "startColumn": 1,
                  "endLineNumber": 815,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.pantalla.actualizar_juego(",
                "range": {
                  "startLineNumber": 816,
                  "startColumn": 1,
                  "endLineNumber": 816,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            fondo=self.fondo,",
                "range": {
                  "startLineNumber": 817,
                  "startColumn": 1,
                  "endLineNumber": 817,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores=self.jugadores,",
                "range": {
                  "startLineNumber": 818,
                  "startColumn": 1,
                  "endLineNumber": 818,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            plataforma=self.controlador,",
                "range": {
                  "startLineNumber": 819,
                  "startColumn": 1,
                  "endLineNumber": 819,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            hud=lambda p: self.hud.dibujar(p, self.jugadores)",
                "range": {
                  "startLineNumber": 820,
                  "startColumn": 1,
                  "endLineNumber": 820,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 821,
                  "startColumn": 1,
                  "endLineNumber": 821,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 822,
                  "startColumn": 1,
                  "endLineNumber": 822,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class SpriteSheet:",
                "range": {
                  "startLineNumber": 823,
                  "startColumn": 1,
                  "endLineNumber": 823,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Handles sprite sheets and tile cutting\"\"\"",
                "range": {
                  "startLineNumber": 824,
                  "startColumn": 1,
                  "endLineNumber": 824,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, surface):",
                "range": {
                  "startLineNumber": 825,
                  "startColumn": 1,
                  "endLineNumber": 825,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sheet = surface",
                "range": {
                  "startLineNumber": 826,
                  "startColumn": 1,
                  "endLineNumber": 826,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 827,
                  "startColumn": 1,
                  "endLineNumber": 827,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, x, y, width, height):",
                "range": {
                  "startLineNumber": 828,
                  "startColumn": 1,
                  "endLineNumber": 828,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a single sprite from the sheet\"\"\"",
                "range": {
                  "startLineNumber": 829,
                  "startColumn": 1,
                  "endLineNumber": 829,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 830,
                  "startColumn": 1,
                  "endLineNumber": 830,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite.blit(self.sheet, (0, 0), (x, y, width, height))",
                "range": {
                  "startLineNumber": 831,
                  "startColumn": 1,
                  "endLineNumber": 831,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprite",
                "range": {
                  "startLineNumber": 832,
                  "startColumn": 1,
                  "endLineNumber": 832,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 833,
                  "startColumn": 1,
                  "endLineNumber": 833,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_row(self, y, sprite_width, sprite_height, count):",
                "range": {
                  "startLineNumber": 834,
                  "startColumn": 1,
                  "endLineNumber": 834,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a row of sprites\"\"\"",
                "range": {
                  "startLineNumber": 835,
                  "startColumn": 1,
                  "endLineNumber": 835,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return [self.get_sprite(i * sprite_width, y, sprite_width, sprite_height) ",
                "range": {
                  "startLineNumber": 836,
                  "startColumn": 1,
                  "endLineNumber": 836,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                for i in range(count)]",
                "range": {
                  "startLineNumber": 837,
                  "startColumn": 1,
                  "endLineNumber": 837,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 838,
                  "startColumn": 1,
                  "endLineNumber": 838,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite_grid(self, sprite_width, sprite_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 839,
                  "startColumn": 1,
                  "endLineNumber": 839,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a grid of sprites starting from specific row and column\"\"\"",
                "range": {
                  "startLineNumber": 840,
                  "startColumn": 1,
                  "endLineNumber": 840,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprites = []",
                "range": {
                  "startLineNumber": 841,
                  "startColumn": 1,
                  "endLineNumber": 841,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for y in range(rows):",
                "range": {
                  "startLineNumber": 842,
                  "startColumn": 1,
                  "endLineNumber": 842,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            row = []",
                "range": {
                  "startLineNumber": 843,
                  "startColumn": 1,
                  "endLineNumber": 843,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for x in range(cols):",
                "range": {
                  "startLineNumber": 844,
                  "startColumn": 1,
                  "endLineNumber": 844,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sprite = self.get_sprite(",
                "range": {
                  "startLineNumber": 845,
                  "startColumn": 1,
                  "endLineNumber": 845,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (x + start_col) * sprite_width, ",
                "range": {
                  "startLineNumber": 846,
                  "startColumn": 1,
                  "endLineNumber": 846,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    (y + start_row) * sprite_height, ",
                "range": {
                  "startLineNumber": 847,
                  "startColumn": 1,
                  "endLineNumber": 847,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_width, ",
                "range": {
                  "startLineNumber": 848,
                  "startColumn": 1,
                  "endLineNumber": 848,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    sprite_height",
                "range": {
                  "startLineNumber": 849,
                  "startColumn": 1,
                  "endLineNumber": 849,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 850,
                  "startColumn": 1,
                  "endLineNumber": 850,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                row.append(sprite)",
                "range": {
                  "startLineNumber": 851,
                  "startColumn": 1,
                  "endLineNumber": 851,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sprites.append(row)",
                "range": {
                  "startLineNumber": 852,
                  "startColumn": 1,
                  "endLineNumber": 852,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return sprites",
                "range": {
                  "startLineNumber": 853,
                  "startColumn": 1,
                  "endLineNumber": 853,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 854,
                  "startColumn": 1,
                  "endLineNumber": 854,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class ResourceManager:",
                "range": {
                  "startLineNumber": 855,
                  "startColumn": 1,
                  "endLineNumber": 855,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Manages game resources like images and sounds\"\"\"",
                "range": {
                  "startLineNumber": 856,
                  "startColumn": 1,
                  "endLineNumber": 856,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    _instance = None",
                "range": {
                  "startLineNumber": 857,
                  "startColumn": 1,
                  "endLineNumber": 857,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 858,
                  "startColumn": 1,
                  "endLineNumber": 858,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __new__(cls):",
                "range": {
                  "startLineNumber": 859,
                  "startColumn": 1,
                  "endLineNumber": 859,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if cls._instance is None:",
                "range": {
                  "startLineNumber": 860,
                  "startColumn": 1,
                  "endLineNumber": 860,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance = super(ResourceManager, cls).__new__(cls)",
                "range": {
                  "startLineNumber": 861,
                  "startColumn": 1,
                  "endLineNumber": 861,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            cls._instance._initialized = False",
                "range": {
                  "startLineNumber": 862,
                  "startColumn": 1,
                  "endLineNumber": 862,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls._instance",
                "range": {
                  "startLineNumber": 863,
                  "startColumn": 1,
                  "endLineNumber": 863,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 864,
                  "startColumn": 1,
                  "endLineNumber": 864,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self):",
                "range": {
                  "startLineNumber": 865,
                  "startColumn": 1,
                  "endLineNumber": 865,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if self._initialized:",
                "range": {
                  "startLineNumber": 866,
                  "startColumn": 1,
                  "endLineNumber": 866,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 867,
                  "startColumn": 1,
                  "endLineNumber": 867,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 868,
                  "startColumn": 1,
                  "endLineNumber": 868,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.images = {}",
                "range": {
                  "startLineNumber": 869,
                  "startColumn": 1,
                  "endLineNumber": 869,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sounds = {}",
                "range": {
                  "startLineNumber": 870,
                  "startColumn": 1,
                  "endLineNumber": 870,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sound_delays = {}  # Almacena el tiempo de último uso de cada sonido",
                "range": {
                  "startLineNumber": 871,
                  "startColumn": 1,
                  "endLineNumber": 871,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.spritesheets = {}  # Para almacenar spritesheets",
                "range": {
                  "startLineNumber": 872,
                  "startColumn": 1,
                  "endLineNumber": 872,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.sprites = {}       # Para almacenar sprites individuales",
                "range": {
                  "startLineNumber": 873,
                  "startColumn": 1,
                  "endLineNumber": 873,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config = AudioConfig()",
                "range": {
                  "startLineNumber": 874,
                  "startColumn": 1,
                  "endLineNumber": 874,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._initialized = True",
                "range": {
                  "startLineNumber": 875,
                  "startColumn": 1,
                  "endLineNumber": 875,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 876,
                  "startColumn": 1,
                  "endLineNumber": 876,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 877,
                  "startColumn": 1,
                  "endLineNumber": 877,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 878,
                  "startColumn": 1,
                  "endLineNumber": 878,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def play_sound(self, key):",
                "range": {
                  "startLineNumber": 879,
                  "startColumn": 1,
                  "endLineNumber": 879,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Play a sound by key with configurable delay control\"\"\"",
                "range": {
                  "startLineNumber": 880,
                  "startColumn": 1,
                  "endLineNumber": 880,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 881,
                  "startColumn": 1,
                  "endLineNumber": 881,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 882,
                  "startColumn": 1,
                  "endLineNumber": 882,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 883,
                  "startColumn": 1,
                  "endLineNumber": 883,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        current_time = pygame.time.get_ticks()",
                "range": {
                  "startLineNumber": 884,
                  "startColumn": 1,
                  "endLineNumber": 884,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        last_played = self.sound_delays.get(key, 0)",
                "range": {
                  "startLineNumber": 885,
                  "startColumn": 1,
                  "endLineNumber": 885,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 886,
                  "startColumn": 1,
                  "endLineNumber": 886,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sound_config = self.audio_config.sound_configs.get(key, {",
                "range": {
                  "startLineNumber": 887,
                  "startColumn": 1,
                  "endLineNumber": 887,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'delay': self.audio_config.default_delay,",
                "range": {
                  "startLineNumber": 888,
                  "startColumn": 1,
                  "endLineNumber": 888,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'channel': self.audio_config.default_channel,",
                "range": {
                  "startLineNumber": 889,
                  "startColumn": 1,
                  "endLineNumber": 889,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'volume': self.audio_config.default_volume",
                "range": {
                  "startLineNumber": 890,
                  "startColumn": 1,
                  "endLineNumber": 890,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        })",
                "range": {
                  "startLineNumber": 891,
                  "startColumn": 1,
                  "endLineNumber": 891,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 892,
                  "startColumn": 1,
                  "endLineNumber": 892,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if current_time - last_played >= sound_config['delay']:",
                "range": {
                  "startLineNumber": 893,
                  "startColumn": 1,
                  "endLineNumber": 893,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            sound = self.get_sound(key)",
                "range": {
                  "startLineNumber": 894,
                  "startColumn": 1,
                  "endLineNumber": 894,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound:",
                "range": {
                  "startLineNumber": 895,
                  "startColumn": 1,
                  "endLineNumber": 895,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 896,
                  "startColumn": 1,
                  "endLineNumber": 896,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 897,
                  "startColumn": 1,
                  "endLineNumber": 897,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         sound_config['volume'])",
                "range": {
                  "startLineNumber": 898,
                  "startColumn": 1,
                  "endLineNumber": 898,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 899,
                  "startColumn": 1,
                  "endLineNumber": 899,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.play()",
                "range": {
                  "startLineNumber": 900,
                  "startColumn": 1,
                  "endLineNumber": 900,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sound_delays[key] = current_time",
                "range": {
                  "startLineNumber": 901,
                  "startColumn": 1,
                  "endLineNumber": 901,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 902,
                  "startColumn": 1,
                  "endLineNumber": 902,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 903,
                  "startColumn": 1,
                  "endLineNumber": 903,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 904,
                  "startColumn": 1,
                  "endLineNumber": 904,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def load_resources(self):",
                "range": {
                  "startLineNumber": 905,
                  "startColumn": 1,
                  "endLineNumber": 905,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game resources\"\"\"",
                "range": {
                  "startLineNumber": 906,
                  "startColumn": 1,
                  "endLineNumber": 906,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_images()",
                "range": {
                  "startLineNumber": 907,
                  "startColumn": 1,
                  "endLineNumber": 907,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._load_sounds()",
                "range": {
                  "startLineNumber": 908,
                  "startColumn": 1,
                  "endLineNumber": 908,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 909,
                  "startColumn": 1,
                  "endLineNumber": 909,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_images(self):",
                "range": {
                  "startLineNumber": 910,
                  "startColumn": 1,
                  "endLineNumber": 910,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game images\"\"\"",
                "range": {
                  "startLineNumber": 911,
                  "startColumn": 1,
                  "endLineNumber": 911,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 912,
                  "startColumn": 1,
                  "endLineNumber": 912,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        image_paths = {",
                "range": {
                  "startLineNumber": 913,
                  "startColumn": 1,
                  "endLineNumber": 913,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': 'assets/Texturas/background.png'",
                "range": {
                  "startLineNumber": 914,
                  "startColumn": 1,
                  "endLineNumber": 914,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 915,
                  "startColumn": 1,
                  "endLineNumber": 915,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 916,
                  "startColumn": 1,
                  "endLineNumber": 916,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y cortar spritesheets",
                "range": {
                  "startLineNumber": 917,
                  "startColumn": 1,
                  "endLineNumber": 917,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        spritesheet_configs = {",
                "range": {
                  "startLineNumber": 918,
                  "startColumn": 1,
                  "endLineNumber": 918,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'player': {",
                "range": {
                  "startLineNumber": 919,
                  "startColumn": 1,
                  "endLineNumber": 919,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Jugador.png',",
                "range": {
                  "startLineNumber": 920,
                  "startColumn": 1,
                  "endLineNumber": 920,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 16,",
                "range": {
                  "startLineNumber": 921,
                  "startColumn": 1,
                  "endLineNumber": 921,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 16,",
                "range": {
                  "startLineNumber": 922,
                  "startColumn": 1,
                  "endLineNumber": 922,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 2,",
                "range": {
                  "startLineNumber": 923,
                  "startColumn": 1,
                  "endLineNumber": 923,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 2,",
                "range": {
                  "startLineNumber": 924,
                  "startColumn": 1,
                  "endLineNumber": 924,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0,  # Fila inicial para recortar",
                "range": {
                  "startLineNumber": 925,
                  "startColumn": 1,
                  "endLineNumber": 925,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   # Columna inicial para recortar",
                "range": {
                  "startLineNumber": 926,
                  "startColumn": 1,
                  "endLineNumber": 926,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            },",
                "range": {
                  "startLineNumber": 927,
                  "startColumn": 1,
                  "endLineNumber": 927,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'platform': {",
                "range": {
                  "startLineNumber": 928,
                  "startColumn": 1,
                  "endLineNumber": 928,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'path': 'assets/Texturas/Plataformas.png',",
                "range": {
                  "startLineNumber": 929,
                  "startColumn": 1,
                  "endLineNumber": 929,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_width': 8,",
                "range": {
                  "startLineNumber": 930,
                  "startColumn": 1,
                  "endLineNumber": 930,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'sprite_height': 8,",
                "range": {
                  "startLineNumber": 931,
                  "startColumn": 1,
                  "endLineNumber": 931,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'rows': 0,",
                "range": {
                  "startLineNumber": 932,
                  "startColumn": 1,
                  "endLineNumber": 932,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'cols': 0,",
                "range": {
                  "startLineNumber": 933,
                  "startColumn": 1,
                  "endLineNumber": 933,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_row': 0, ",
                "range": {
                  "startLineNumber": 934,
                  "startColumn": 1,
                  "endLineNumber": 934,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                'start_col': 0   ",
                "range": {
                  "startLineNumber": 935,
                  "startColumn": 1,
                  "endLineNumber": 935,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 936,
                  "startColumn": 1,
                  "endLineNumber": 936,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 937,
                  "startColumn": 1,
                  "endLineNumber": 937,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 938,
                  "startColumn": 1,
                  "endLineNumber": 938,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar imágenes normales",
                "range": {
                  "startLineNumber": 939,
                  "startColumn": 1,
                  "endLineNumber": 939,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, path in image_paths.items():",
                "range": {
                  "startLineNumber": 940,
                  "startColumn": 1,
                  "endLineNumber": 940,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 941,
                  "startColumn": 1,
                  "endLineNumber": 941,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = pygame.image.load(path).convert_alpha()",
                "range": {
                  "startLineNumber": 942,
                  "startColumn": 1,
                  "endLineNumber": 942,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 943,
                  "startColumn": 1,
                  "endLineNumber": 943,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load image {path}\")",
                "range": {
                  "startLineNumber": 944,
                  "startColumn": 1,
                  "endLineNumber": 944,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.images[key] = self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 945,
                  "startColumn": 1,
                  "endLineNumber": 945,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 946,
                  "startColumn": 1,
                  "endLineNumber": 946,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Cargar y procesar spritesheets",
                "range": {
                  "startLineNumber": 947,
                  "startColumn": 1,
                  "endLineNumber": 947,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in spritesheet_configs.items():",
                "range": {
                  "startLineNumber": 948,
                  "startColumn": 1,
                  "endLineNumber": 948,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 949,
                  "startColumn": 1,
                  "endLineNumber": 949,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sheet_surface = pygame.image.load(config['path']).convert_alpha()",
                "range": {
                  "startLineNumber": 950,
                  "startColumn": 1,
                  "endLineNumber": 950,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.spritesheets[key] = SpriteSheet(sheet_surface)",
                "range": {
                  "startLineNumber": 951,
                  "startColumn": 1,
                  "endLineNumber": 951,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = self.spritesheets[key].get_sprite_grid(",
                "range": {
                  "startLineNumber": 952,
                  "startColumn": 1,
                  "endLineNumber": 952,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'],",
                "range": {
                  "startLineNumber": 953,
                  "startColumn": 1,
                  "endLineNumber": 953,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height'],",
                "range": {
                  "startLineNumber": 954,
                  "startColumn": 1,
                  "endLineNumber": 954,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['rows'],",
                "range": {
                  "startLineNumber": 955,
                  "startColumn": 1,
                  "endLineNumber": 955,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['cols'],",
                "range": {
                  "startLineNumber": 956,
                  "startColumn": 1,
                  "endLineNumber": 956,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_row', 0),  # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 957,
                  "startColumn": 1,
                  "endLineNumber": 957,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config.get('start_col', 0)   # Usar 0 como valor por defecto",
                "range": {
                  "startLineNumber": 958,
                  "startColumn": 1,
                  "endLineNumber": 958,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )",
                "range": {
                  "startLineNumber": 959,
                  "startColumn": 1,
                  "endLineNumber": 959,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 960,
                  "startColumn": 1,
                  "endLineNumber": 960,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load spritesheet {config['path']}\")",
                "range": {
                  "startLineNumber": 961,
                  "startColumn": 1,
                  "endLineNumber": 961,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sprites[key] = [[self._create_fallback_surface(",
                "range": {
                  "startLineNumber": 962,
                  "startColumn": 1,
                  "endLineNumber": 962,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_width'], ",
                "range": {
                  "startLineNumber": 963,
                  "startColumn": 1,
                  "endLineNumber": 963,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    config['sprite_height']",
                "range": {
                  "startLineNumber": 964,
                  "startColumn": 1,
                  "endLineNumber": 964,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                )]]",
                "range": {
                  "startLineNumber": 965,
                  "startColumn": 1,
                  "endLineNumber": 965,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 966,
                  "startColumn": 1,
                  "endLineNumber": 966,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _create_fallback_surface(self, width, height):",
                "range": {
                  "startLineNumber": 967,
                  "startColumn": 1,
                  "endLineNumber": 967,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a fallback surface with checkerboard pattern\"\"\"",
                "range": {
                  "startLineNumber": 968,
                  "startColumn": 1,
                  "endLineNumber": 968,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface = pygame.Surface((width, height), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 969,
                  "startColumn": 1,
                  "endLineNumber": 969,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        surface.fill(GameConstants.COLORS['RED'])",
                "range": {
                  "startLineNumber": 970,
                  "startColumn": 1,
                  "endLineNumber": 970,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return surface",
                "range": {
                  "startLineNumber": 971,
                  "startColumn": 1,
                  "endLineNumber": 971,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 972,
                  "startColumn": 1,
                  "endLineNumber": 972,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_image(self, key):",
                "range": {
                  "startLineNumber": 973,
                  "startColumn": 1,
                  "endLineNumber": 973,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get an image by key\"\"\"",
                "range": {
                  "startLineNumber": 974,
                  "startColumn": 1,
                  "endLineNumber": 974,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.images.get(key)",
                "range": {
                  "startLineNumber": 975,
                  "startColumn": 1,
                  "endLineNumber": 975,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 976,
                  "startColumn": 1,
                  "endLineNumber": 976,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sound(self, key):",
                "range": {
                  "startLineNumber": 977,
                  "startColumn": 1,
                  "endLineNumber": 977,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sound by key\"\"\"",
                "range": {
                  "startLineNumber": 978,
                  "startColumn": 1,
                  "endLineNumber": 978,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.sounds.get(key)",
                "range": {
                  "startLineNumber": 979,
                  "startColumn": 1,
                  "endLineNumber": 979,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 980,
                  "startColumn": 1,
                  "endLineNumber": 980,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def update_volumes(self):",
                "range": {
                  "startLineNumber": 981,
                  "startColumn": 1,
                  "endLineNumber": 981,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Update all sound volumes based on current configuration\"\"\"",
                "range": {
                  "startLineNumber": 982,
                  "startColumn": 1,
                  "endLineNumber": 982,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, sound in self.sounds.items():",
                "range": {
                  "startLineNumber": 983,
                  "startColumn": 1,
                  "endLineNumber": 983,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            if sound and key in self.audio_config.sound_configs:",
                "range": {
                  "startLineNumber": 984,
                  "startColumn": 1,
                  "endLineNumber": 984,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                config = self.audio_config.sound_configs[key]",
                "range": {
                  "startLineNumber": 985,
                  "startColumn": 1,
                  "endLineNumber": 985,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 986,
                  "startColumn": 1,
                  "endLineNumber": 986,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 987,
                  "startColumn": 1,
                  "endLineNumber": 987,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 988,
                  "startColumn": 1,
                  "endLineNumber": 988,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 989,
                  "startColumn": 1,
                  "endLineNumber": 989,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 990,
                  "startColumn": 1,
                  "endLineNumber": 990,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_master_volume(self, volume):",
                "range": {
                  "startLineNumber": 991,
                  "startColumn": 1,
                  "endLineNumber": 991,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set master volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 992,
                  "startColumn": 1,
                  "endLineNumber": 992,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.master_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 993,
                  "startColumn": 1,
                  "endLineNumber": 993,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 994,
                  "startColumn": 1,
                  "endLineNumber": 994,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 995,
                  "startColumn": 1,
                  "endLineNumber": 995,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_sfx_volume(self, volume):",
                "range": {
                  "startLineNumber": 996,
                  "startColumn": 1,
                  "endLineNumber": 996,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Set SFX volume and update all sounds\"\"\"",
                "range": {
                  "startLineNumber": 997,
                  "startColumn": 1,
                  "endLineNumber": 997,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.sfx_volume = max(0.0, min(1.0, volume))",
                "range": {
                  "startLineNumber": 998,
                  "startColumn": 1,
                  "endLineNumber": 998,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.update_volumes()",
                "range": {
                  "startLineNumber": 999,
                  "startColumn": 1,
                  "endLineNumber": 999,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1000,
                  "startColumn": 1,
                  "endLineNumber": 1000,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def toggle_audio(self):",
                "range": {
                  "startLineNumber": 1001,
                  "startColumn": 1,
                  "endLineNumber": 1001,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Toggle audio on/off\"\"\"",
                "range": {
                  "startLineNumber": 1002,
                  "startColumn": 1,
                  "endLineNumber": 1002,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.audio_config.enabled = not self.audio_config.enabled",
                "range": {
                  "startLineNumber": 1003,
                  "startColumn": 1,
                  "endLineNumber": 1003,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not self.audio_config.enabled:",
                "range": {
                  "startLineNumber": 1004,
                  "startColumn": 1,
                  "endLineNumber": 1004,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.pause()",
                "range": {
                  "startLineNumber": 1005,
                  "startColumn": 1,
                  "endLineNumber": 1005,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        else:",
                "range": {
                  "startLineNumber": 1006,
                  "startColumn": 1,
                  "endLineNumber": 1006,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            pygame.mixer.unpause()",
                "range": {
                  "startLineNumber": 1007,
                  "startColumn": 1,
                  "endLineNumber": 1007,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1008,
                  "startColumn": 1,
                  "endLineNumber": 1008,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_sprite(self, key, row=0, col=0):",
                "range": {
                  "startLineNumber": 1009,
                  "startColumn": 1,
                  "endLineNumber": 1009,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a specific sprite from a spritesheet\"\"\"",
                "range": {
                  "startLineNumber": 1010,
                  "startColumn": 1,
                  "endLineNumber": 1010,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if key in self.sprites:",
                "range": {
                  "startLineNumber": 1011,
                  "startColumn": 1,
                  "endLineNumber": 1011,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1012,
                  "startColumn": 1,
                  "endLineNumber": 1012,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self.sprites[key][row][col]",
                "range": {
                  "startLineNumber": 1013,
                  "startColumn": 1,
                  "endLineNumber": 1013,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except IndexError:",
                "range": {
                  "startLineNumber": 1014,
                  "startColumn": 1,
                  "endLineNumber": 1014,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Invalid sprite indices for {key}: row={row}, col={col}\")",
                "range": {
                  "startLineNumber": 1015,
                  "startColumn": 1,
                  "endLineNumber": 1015,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                return self._create_fallback_surface(32, 32)",
                "range": {
                  "startLineNumber": 1016,
                  "startColumn": 1,
                  "endLineNumber": 1016,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1017,
                  "startColumn": 1,
                  "endLineNumber": 1017,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1018,
                  "startColumn": 1,
                  "endLineNumber": 1018,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _load_sounds(self):",
                "range": {
                  "startLineNumber": 1019,
                  "startColumn": 1,
                  "endLineNumber": 1019,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Load all game sounds and configure volumes\"\"\"",
                "range": {
                  "startLineNumber": 1020,
                  "startColumn": 1,
                  "endLineNumber": 1020,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for key, config in self.audio_config.sound_configs.items():",
                "range": {
                  "startLineNumber": 1021,
                  "startColumn": 1,
                  "endLineNumber": 1021,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            try:",
                "range": {
                  "startLineNumber": 1022,
                  "startColumn": 1,
                  "endLineNumber": 1022,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound = pygame.mixer.Sound(config['path'])",
                "range": {
                  "startLineNumber": 1023,
                  "startColumn": 1,
                  "endLineNumber": 1023,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                # Aplicar volumen combinado (master * sfx * sound)",
                "range": {
                  "startLineNumber": 1024,
                  "startColumn": 1,
                  "endLineNumber": 1024,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                volume = (self.audio_config.master_volume * ",
                "range": {
                  "startLineNumber": 1025,
                  "startColumn": 1,
                  "endLineNumber": 1025,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         self.audio_config.sfx_volume * ",
                "range": {
                  "startLineNumber": 1026,
                  "startColumn": 1,
                  "endLineNumber": 1026,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                         config['volume'])",
                "range": {
                  "startLineNumber": 1027,
                  "startColumn": 1,
                  "endLineNumber": 1027,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                sound.set_volume(volume)",
                "range": {
                  "startLineNumber": 1028,
                  "startColumn": 1,
                  "endLineNumber": 1028,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                self.sounds[key] = sound",
                "range": {
                  "startLineNumber": 1029,
                  "startColumn": 1,
                  "endLineNumber": 1029,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            except (pygame.error, FileNotFoundError):",
                "range": {
                  "startLineNumber": 1030,
                  "startColumn": 1,
                  "endLineNumber": 1030,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                print(f\"Warning: Could not load sound {config['path']}\")",
                "range": {
                  "startLineNumber": 1031,
                  "startColumn": 1,
                  "endLineNumber": 1031,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1032,
                  "startColumn": 1,
                  "endLineNumber": 1032,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_scaled_sprite(self, key, width, height, row=0, col=0):",
                "range": {
                  "startLineNumber": 1033,
                  "startColumn": 1,
                  "endLineNumber": 1033,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Get a sprite scaled to specified dimensions\"\"\"",
                "range": {
                  "startLineNumber": 1034,
                  "startColumn": 1,
                  "endLineNumber": 1034,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        sprite = self.get_sprite(key, row, col)",
                "range": {
                  "startLineNumber": 1035,
                  "startColumn": 1,
                  "endLineNumber": 1035,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if sprite:",
                "range": {
                  "startLineNumber": 1036,
                  "startColumn": 1,
                  "endLineNumber": 1036,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return pygame.transform.scale(sprite, (width, height))",
                "range": {
                  "startLineNumber": 1037,
                  "startColumn": 1,
                  "endLineNumber": 1037,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return None",
                "range": {
                  "startLineNumber": 1038,
                  "startColumn": 1,
                  "endLineNumber": 1038,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1039,
                  "startColumn": 1,
                  "endLineNumber": 1039,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def create_combined_surface(self, key, tile_width, tile_height, rows, cols, start_row=0, start_col=0):",
                "range": {
                  "startLineNumber": 1040,
                  "startColumn": 1,
                  "endLineNumber": 1040,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Create a combined surface from multiple tiles\"\"\"",
                "range": {
                  "startLineNumber": 1041,
                  "startColumn": 1,
                  "endLineNumber": 1041,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        combined_surface = pygame.Surface((tile_width * cols, tile_height * rows), pygame.SRCALPHA)",
                "range": {
                  "startLineNumber": 1042,
                  "startColumn": 1,
                  "endLineNumber": 1042,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        for row in range(rows):",
                "range": {
                  "startLineNumber": 1043,
                  "startColumn": 1,
                  "endLineNumber": 1043,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            for col in range(cols):",
                "range": {
                  "startLineNumber": 1044,
                  "startColumn": 1,
                  "endLineNumber": 1044,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                tile = self.get_scaled_sprite(key, tile_width, tile_height, start_row + row, start_col + col)",
                "range": {
                  "startLineNumber": 1045,
                  "startColumn": 1,
                  "endLineNumber": 1045,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if tile:",
                "range": {
                  "startLineNumber": 1046,
                  "startColumn": 1,
                  "endLineNumber": 1046,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    combined_surface.blit(tile, (col * tile_width, row * tile_height))",
                "range": {
                  "startLineNumber": 1047,
                  "startColumn": 1,
                  "endLineNumber": 1047,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return combined_surface",
                "range": {
                  "startLineNumber": 1048,
                  "startColumn": 1,
                  "endLineNumber": 1048,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1049,
                  "startColumn": 1,
                  "endLineNumber": 1049,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class HUD:",
                "range": {
                  "startLineNumber": 1050,
                  "startColumn": 1,
                  "endLineNumber": 1050,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Heads Up Display for game interface\"\"\"",
                "range": {
                  "startLineNumber": 1051,
                  "startColumn": 1,
                  "endLineNumber": 1051,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, game_constants):",
                "range": {
                  "startLineNumber": 1052,
                  "startColumn": 1,
                  "endLineNumber": 1052,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.constants = game_constants",
                "range": {
                  "startLineNumber": 1053,
                  "startColumn": 1,
                  "endLineNumber": 1053,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_colors()",
                "range": {
                  "startLineNumber": 1054,
                  "startColumn": 1,
                  "endLineNumber": 1054,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._setup_rects()",
                "range": {
                  "startLineNumber": 1055,
                  "startColumn": 1,
                  "endLineNumber": 1055,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1056,
                  "startColumn": 1,
                  "endLineNumber": 1056,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_colors(self):",
                "range": {
                  "startLineNumber": 1057,
                  "startColumn": 1,
                  "endLineNumber": 1057,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Setup color references for better readability\"\"\"",
                "range": {
                  "startLineNumber": 1058,
                  "startColumn": 1,
                  "endLineNumber": 1058,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.colors = {",
                "range": {
                  "startLineNumber": 1059,
                  "startColumn": 1,
                  "endLineNumber": 1059,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'background': self.constants.COLORS['RED'],",
                "range": {
                  "startLineNumber": 1060,
                  "startColumn": 1,
                  "endLineNumber": 1060,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'health': self.constants.COLORS['GREEN'],",
                "range": {
                  "startLineNumber": 1061,
                  "startColumn": 1,
                  "endLineNumber": 1061,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'border': self.constants.COLORS['WHITE']",
                "range": {
                  "startLineNumber": 1062,
                  "startColumn": 1,
                  "endLineNumber": 1062,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1063,
                  "startColumn": 1,
                  "endLineNumber": 1063,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1064,
                  "startColumn": 1,
                  "endLineNumber": 1064,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _setup_rects(self):",
                "range": {
                  "startLineNumber": 1065,
                  "startColumn": 1,
                  "endLineNumber": 1065,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Initialize health bar rectangles for both players\"\"\"",
                "range": {
                  "startLineNumber": 1066,
                  "startColumn": 1,
                  "endLineNumber": 1066,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_width = pygame.display.get_surface().get_width()",
                "range": {
                  "startLineNumber": 1067,
                  "startColumn": 1,
                  "endLineNumber": 1067,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        screen_height = pygame.display.get_surface().get_height()",
                "range": {
                  "startLineNumber": 1068,
                  "startColumn": 1,
                  "endLineNumber": 1068,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1069,
                  "startColumn": 1,
                  "endLineNumber": 1069,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 1 (izquierda)",
                "range": {
                  "startLineNumber": 1070,
                  "startColumn": 1,
                  "endLineNumber": 1070,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p1 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1071,
                  "startColumn": 1,
                  "endLineNumber": 1071,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1072,
                  "startColumn": 1,
                  "endLineNumber": 1072,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1073,
                  "startColumn": 1,
                  "endLineNumber": 1073,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1074,
                  "startColumn": 1,
                  "endLineNumber": 1074,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1075,
                  "startColumn": 1,
                  "endLineNumber": 1075,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1076,
                  "startColumn": 1,
                  "endLineNumber": 1076,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1077,
                  "startColumn": 1,
                  "endLineNumber": 1077,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Rectángulo jugador 2 (derecha)",
                "range": {
                  "startLineNumber": 1078,
                  "startColumn": 1,
                  "endLineNumber": 1078,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.background_rect_p2 = pygame.Rect(",
                "range": {
                  "startLineNumber": 1079,
                  "startColumn": 1,
                  "endLineNumber": 1079,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_width - self.constants.UI_HEALTH_WIDTH - self.constants.UI_MARGIN,",
                "range": {
                  "startLineNumber": 1080,
                  "startColumn": 1,
                  "endLineNumber": 1080,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            screen_height - self.constants.UI_MARGIN_BOTTOM,",
                "range": {
                  "startLineNumber": 1081,
                  "startColumn": 1,
                  "endLineNumber": 1081,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_WIDTH,",
                "range": {
                  "startLineNumber": 1082,
                  "startColumn": 1,
                  "endLineNumber": 1082,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.constants.UI_HEALTH_HEIGHT",
                "range": {
                  "startLineNumber": 1083,
                  "startColumn": 1,
                  "endLineNumber": 1083,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1084,
                  "startColumn": 1,
                  "endLineNumber": 1084,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1085,
                  "startColumn": 1,
                  "endLineNumber": 1085,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def dibujar(self, pantalla=Pantalla, jugadores=None):",
                "range": {
                  "startLineNumber": 1086,
                  "startColumn": 1,
                  "endLineNumber": 1086,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if not jugadores or len(jugadores) < 2:",
                "range": {
                  "startLineNumber": 1087,
                  "startColumn": 1,
                  "endLineNumber": 1087,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return",
                "range": {
                  "startLineNumber": 1088,
                  "startColumn": 1,
                  "endLineNumber": 1088,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            ",
                "range": {
                  "startLineNumber": 1089,
                  "startColumn": 1,
                  "endLineNumber": 1089,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        display = pantalla.get_screen_data(\"display\")",
                "range": {
                  "startLineNumber": 1090,
                  "startColumn": 1,
                  "endLineNumber": 1090,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1091,
                  "startColumn": 1,
                  "endLineNumber": 1091,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 1",
                "range": {
                  "startLineNumber": 1092,
                  "startColumn": 1,
                  "endLineNumber": 1092,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1093,
                  "startColumn": 1,
                  "endLineNumber": 1093,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display, ",
                "range": {
                  "startLineNumber": 1094,
                  "startColumn": 1,
                  "endLineNumber": 1094,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[0].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1095,
                  "startColumn": 1,
                  "endLineNumber": 1095,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p1",
                "range": {
                  "startLineNumber": 1096,
                  "startColumn": 1,
                  "endLineNumber": 1096,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1097,
                  "startColumn": 1,
                  "endLineNumber": 1097,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1098,
                  "startColumn": 1,
                  "endLineNumber": 1098,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Dibujar barra de vida jugador 2",
                "range": {
                  "startLineNumber": 1099,
                  "startColumn": 1,
                  "endLineNumber": 1099,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self._draw_player_health_bar(",
                "range": {
                  "startLineNumber": 1100,
                  "startColumn": 1,
                  "endLineNumber": 1100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            display,",
                "range": {
                  "startLineNumber": 1101,
                  "startColumn": 1,
                  "endLineNumber": 1101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            jugadores[1].get_health_percentage(),",
                "range": {
                  "startLineNumber": 1102,
                  "startColumn": 1,
                  "endLineNumber": 1102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.background_rect_p2",
                "range": {
                  "startLineNumber": 1103,
                  "startColumn": 1,
                  "endLineNumber": 1103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        )",
                "range": {
                  "startLineNumber": 1104,
                  "startColumn": 1,
                  "endLineNumber": 1104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1105,
                  "startColumn": 1,
                  "endLineNumber": 1105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def _draw_player_health_bar(self, display, health_percentage, background_rect):",
                "range": {
                  "startLineNumber": 1106,
                  "startColumn": 1,
                  "endLineNumber": 1106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        \"\"\"Draw health bar for a specific player\"\"\"",
                "range": {
                  "startLineNumber": 1107,
                  "startColumn": 1,
                  "endLineNumber": 1107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Fondo",
                "range": {
                  "startLineNumber": 1108,
                  "startColumn": 1,
                  "endLineNumber": 1108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['background'], background_rect)",
                "range": {
                  "startLineNumber": 1109,
                  "startColumn": 1,
                  "endLineNumber": 1109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1110,
                  "startColumn": 1,
                  "endLineNumber": 1110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Barra de vida actual",
                "range": {
                  "startLineNumber": 1111,
                  "startColumn": 1,
                  "endLineNumber": 1111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect = background_rect.copy()",
                "range": {
                  "startLineNumber": 1112,
                  "startColumn": 1,
                  "endLineNumber": 1112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        health_rect.width = self.constants.UI_HEALTH_WIDTH * health_percentage",
                "range": {
                  "startLineNumber": 1113,
                  "startColumn": 1,
                  "endLineNumber": 1113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['health'], health_rect)",
                "range": {
                  "startLineNumber": 1114,
                  "startColumn": 1,
                  "endLineNumber": 1114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ",
                "range": {
                  "startLineNumber": 1115,
                  "startColumn": 1,
                  "endLineNumber": 1115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        # Borde",
                "range": {
                  "startLineNumber": 1116,
                  "startColumn": 1,
                  "endLineNumber": 1116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        pygame.draw.rect(display, self.colors['border'], background_rect, 2)",
                "range": {
                  "startLineNumber": 1117,
                  "startColumn": 1,
                  "endLineNumber": 1117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1118,
                  "startColumn": 1,
                  "endLineNumber": 1118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "class PlayerControls:",
                "range": {
                  "startLineNumber": 1119,
                  "startColumn": 1,
                  "endLineNumber": 1119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    \"\"\"Configuration class for player controls\"\"\"",
                "range": {
                  "startLineNumber": 1120,
                  "startColumn": 1,
                  "endLineNumber": 1120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def __init__(self, up=pygame.K_UP, down=pygame.K_DOWN, ",
                "range": {
                  "startLineNumber": 1121,
                  "startColumn": 1,
                  "endLineNumber": 1121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 left=pygame.K_LEFT, right=pygame.K_RIGHT, ",
                "range": {
                  "startLineNumber": 1122,
                  "startColumn": 1,
                  "endLineNumber": 1122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                 block=pygame.K_RCTRL, charge=pygame.K_KP0):",
                "range": {
                  "startLineNumber": 1123,
                  "startColumn": 1,
                  "endLineNumber": 1123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        self.controls = {",
                "range": {
                  "startLineNumber": 1124,
                  "startColumn": 1,
                  "endLineNumber": 1124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'up': up,",
                "range": {
                  "startLineNumber": 1125,
                  "startColumn": 1,
                  "endLineNumber": 1125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'down': down,",
                "range": {
                  "startLineNumber": 1126,
                  "startColumn": 1,
                  "endLineNumber": 1126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'left': left,",
                "range": {
                  "startLineNumber": 1127,
                  "startColumn": 1,
                  "endLineNumber": 1127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'right': right,",
                "range": {
                  "startLineNumber": 1128,
                  "startColumn": 1,
                  "endLineNumber": 1128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'block': block,",
                "range": {
                  "startLineNumber": 1129,
                  "startColumn": 1,
                  "endLineNumber": 1129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            'charge': charge",
                "range": {
                  "startLineNumber": 1130,
                  "startColumn": 1,
                  "endLineNumber": 1130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 1131,
                  "startColumn": 1,
                  "endLineNumber": 1131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1132,
                  "startColumn": 1,
                  "endLineNumber": 1132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_key(self, action):",
                "range": {
                  "startLineNumber": 1133,
                  "startColumn": 1,
                  "endLineNumber": 1133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return self.controls.get(action)",
                "range": {
                  "startLineNumber": 1134,
                  "startColumn": 1,
                  "endLineNumber": 1134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1135,
                  "startColumn": 1,
                  "endLineNumber": 1135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def set_key(self, action, key):",
                "range": {
                  "startLineNumber": 1136,
                  "startColumn": 1,
                  "endLineNumber": 1136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if action in self.controls:",
                "range": {
                  "startLineNumber": 1137,
                  "startColumn": 1,
                  "endLineNumber": 1137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            self.controls[action] = key",
                "range": {
                  "startLineNumber": 1138,
                  "startColumn": 1,
                  "endLineNumber": 1138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1139,
                  "startColumn": 1,
                  "endLineNumber": 1139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    @classmethod",
                "range": {
                  "startLineNumber": 1140,
                  "startColumn": 1,
                  "endLineNumber": 1140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    def get_default_controls(cls, player_number=1):",
                "range": {
                  "startLineNumber": 1141,
                  "startColumn": 1,
                  "endLineNumber": 1141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if player_number == 1:",
                "range": {
                  "startLineNumber": 1142,
                  "startColumn": 1,
                  "endLineNumber": 1142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            return cls(pygame.K_UP, pygame.K_DOWN, pygame.K_LEFT, pygame.K_RIGHT, pygame.K_RCTRL, pygame.K_KP0)",
                "range": {
                  "startLineNumber": 1143,
                  "startColumn": 1,
                  "endLineNumber": 1143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        return cls(pygame.K_w, pygame.K_s, pygame.K_a, pygame.K_d, pygame.K_q, pygame.K_e)",
                "range": {
                  "startLineNumber": 1144,
                  "startColumn": 1,
                  "endLineNumber": 1144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 1145,
                  "startColumn": 1,
                  "endLineNumber": 1145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "# Modificar la función main para usar GameStateManager",
                "range": {
                  "startLineNumber": 1146,
                  "startColumn": 1,
                  "endLineNumber": 1146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "def main():",
                "range": {
                  "startLineNumber": 1147,
                  "startColumn": 1,
                  "endLineNumber": 1147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.init()",
                "range": {
                  "startLineNumber": 1148,
                  "startColumn": 1,
                  "endLineNumber": 1148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pygame.mixer.init()  # Inicializar el sistema de sonido",
                "range": {
                  "startLineNumber": 1149,
                  "startColumn": 1,
                  "endLineNumber": 1149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1150,
                  "startColumn": 1,
                  "endLineNumber": 1150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    pantalla_principal = Pantalla(800, 600, \"Ultimate Cube Battle\")",
                "range": {
                  "startLineNumber": 1151,
                  "startColumn": 1,
                  "endLineNumber": 1151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    tamaño_baldosa = pantalla_principal.get_screen_data(\"tile_size\")",
                "range": {
                  "startLineNumber": 1152,
                  "startColumn": 1,
                  "endLineNumber": 1152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    controlador = controlador_plataformas()",
                "range": {
                  "startLineNumber": 1153,
                  "startColumn": 1,
                  "endLineNumber": 1153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 1154,
                  "startColumn": 1,
                  "endLineNumber": 1154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    # Crear jugadores",
                "range": {
                  "startLineNumber": 1155,
                  "startColumn": 1,
                  "endLineNumber": 1155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    mid_x = pantalla_principal.get_screen_data(\"mid_x\")",
                "range": {
                  "startLineNumber": 1156,
                  "startColumn": 1,
                  "endLineNumber": 1156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    jugadores = [",
                "range": {
                  "startLineNumber": 1157,
                  "startColumn": 1,
                  "endLineNumber": 1157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1158,
                  "startColumn": 1,
                  "endLineNumber": 1158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            mid_x - 50,  # Más a la izquierda",
                "range": {
                  "startLineNumber": 1159,
                  "startColumn": 1,
                  "endLineNumber": 1159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            300,",
                "range": {
                  "startLineNumber": 1160,
                  "startColumn": 1,
                  "endLineNumber": 1160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1161,
                  "startColumn": 1,
                  "endLineNumber": 1161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            player_id=1",
                "range": {
                  "startLineNumber": 1162,
                  "startColumn": 1,
                  "endLineNumber": 1162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        ),",
                "range": {
                  "startLineNumber": 1163,
                  "startColumn": 1,
                  "endLineNumber": 1163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        Personaje(",
                "range": {
                  "startLineNumber": 1164,
                  "startColumn": 1,
                  "endLineNumber": 1164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            mid_x + 50,  # Más a la derecha",
                "range": {
                  "startLineNumber": 1165,
                  "startColumn": 1,
                  "endLineNumber": 1165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            300,",
                "range": {
                  "startLineNumber": 1166,
                  "startColumn": 1,
                  "endLineNumber": 1166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            tamaño_baldosa,",
                "range": {
                  "startLineNumber": 1167,
                  "startColumn": 1073741825,
                  "endLineNumber": 1167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            player_id=2",
                "range": {
                  "startLineNumber": 1168,
                  "startColumn": 1073741825,
                  "endLineNumber": 1168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1169,
                  "startColumn": 1073741825,
                  "endLineNumber": 1169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]",
                "range": {
                  "startLineNumber": 1170,
                  "startColumn": 1073741825,
                  "endLineNumber": 1170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 1171,
                  "startColumn": 1073741825,
                  "endLineNumber": 1171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    hud = HUD(GameConstants)",
                "range": {
                  "startLineNumber": 1172,
                  "startColumn": 1073741825,
                  "endLineNumber": 1172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1173,
                  "startColumn": 1073741825,
                  "endLineNumber": 1173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try:",
                "range": {
                  "startLineNumber": 1174,
                  "startColumn": 1073741825,
                  "endLineNumber": 1174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager = GameStateManager(",
                "range": {
                  "startLineNumber": 1175,
                  "startColumn": 1073741825,
                  "endLineNumber": 1175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            pantalla_principal,",
                "range": {
                  "startLineNumber": 1176,
                  "startColumn": 1073741825,
                  "endLineNumber": 1176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            jugadores,",
                "range": {
                  "startLineNumber": 1177,
                  "startColumn": 1073741825,
                  "endLineNumber": 1177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            controlador,",
                "range": {
                  "startLineNumber": 1178,
                  "startColumn": 1073741825,
                  "endLineNumber": 1178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            hud",
                "range": {
                  "startLineNumber": 1179,
                  "startColumn": 1073741825,
                  "endLineNumber": 1179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        )",
                "range": {
                  "startLineNumber": 1180,
                  "startColumn": 1073741825,
                  "endLineNumber": 1180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        game_manager.run()",
                "range": {
                  "startLineNumber": 1181,
                  "startColumn": 1073741825,
                  "endLineNumber": 1181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    except KeyboardInterrupt:",
                "range": {
                  "startLineNumber": 1182,
                  "startColumn": 1073741825,
                  "endLineNumber": 1182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        print(\"Interrupción del teclado detectada. Saliendo del juego...\")",
                "range": {
                  "startLineNumber": 1183,
                  "startColumn": 1073741825,
                  "endLineNumber": 1183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    finally:",
                "range": {
                  "startLineNumber": 1184,
                  "startColumn": 1073741825,
                  "endLineNumber": 1184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pantalla_principal.detener()",
                "range": {
                  "startLineNumber": 1185,
                  "startColumn": 1073741825,
                  "endLineNumber": 1185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        pygame.quit()",
                "range": {
                  "startLineNumber": 1186,
                  "startColumn": 1073741825,
                  "endLineNumber": 1186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1187,
                  "startColumn": 1073741825,
                  "endLineNumber": 1187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nif __name__ == \"__main__\":",
                "range": {
                  "startLineNumber": 1188,
                  "startColumn": 1073741825,
                  "endLineNumber": 1188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    main()",
                "range": {
                  "startLineNumber": 1189,
                  "startColumn": 1073741825,
                  "endLineNumber": 1189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1190,
                  "startColumn": 1073741825,
                  "endLineNumber": 1190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 1191,
                  "startColumn": 1073741825,
                  "endLineNumber": 1191,
                  "endColumn": 1073741825
                }
              }
            ]
          ]
        }
      ],
      "result": {
        "timings": {
          "firstProgress": 13834,
          "totalElapsed": 210834
        },
        "metadata": {
          "applyEditsId": "4c03b2f8-15c1-4948-8f93-9d2dc8b4044e",
          "modelMessageId": "6a427457-c7c3-43cf-89a0-0e9db06af1e5",
          "responseId": "23896ebd-3830-48d9-a62f-f05e1e6b892f",
          "sessionId": "8655bd10-6186-4d1f-8bb5-ce4a47f66b16",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Editar archivos en el área de trabajo",
        "when": "config.github.copilot.chat.edits.enabled",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "contentReferences": [],
      "codeCitations": []
    }
  ]
}